window.com={};window.com.imc={};window.com.imc.core={};window.com.imc.util={};window.com.imc.scorm={};window.com.imc.touch={};window.com.imc.media={};window.com.imc.storage={};window.com.imc.content={};window.com.imc.controls={};window.com.imc.animation={};window.com.imc.content.item={};window.com.imc.core.screens={};window.com.imc.scorm.scorm2004={};window.com.imc.core.navigation={};window.com.imc.core.statemachine={};window.com.imc.content.item.action={};window.com.imc.content.item.trigger={};
(function(f){f.Action=function(m,e){var c=this,a=m.delay||0,b=0;Object.defineProperty(c,"trigger",{value:e});c.process=function(){};c.startProcess=function(){window.clearTimeout(b);a?b=window.setTimeout(c.process,a):c.process()};return c}})(com.imc.content.item.action);(function(f){var m=com.imc.content.item.action.Action;f.GlobalHideAction=function(e,c){var a=m.call(this,e,c);this.process=function(){$(".imc-visible").each(function(b,c){c&&(c.hideItem&&!c.noGlobalHide)&&c.hideItem()})};return a}})(com.imc.content.item.action);
(function(f){var m=com.imc.content.item.action.Action;f.ShowAction=function(e,c){var a=m.call(this,e,c),b=e.objects;this.process=function(){for(var c,n=0;n<b.length;++n)if((c=document.getElementById(b[n]))&&c.showItem)c.showItem(),c.shownBy=a.trigger.item.id};return a}})(com.imc.content.item.action);
(function(f){var m=com.imc.content.item.action.Action;f.HideAction=function(e,c){var a=m.call(this,e,c),b=e.objects;this.process=function(){for(var c,a=0;a<b.length;++a)(c=document.getElementById(b[a]))&&c.hideItem&&c.hideItem()};return a}})(com.imc.content.item.action);(function(f){var m=com.imc.content.item.action.Action;f.PlayAction=function(e,c){var a=m.call(this,e,c);this.process=function(){$(a.trigger.area).trigger("imc:pause",!1)};return a}})(com.imc.content.item.action);
(function(f){f.ActionFactory={registered:{show:com.imc.content.item.action.ShowAction,hide:com.imc.content.item.action.HideAction,globalhide:com.imc.content.item.action.GlobalHideAction,play:com.imc.content.item.action.PlayAction},create:function(m,e){return!m.type?null:f.ActionFactory.registered[m.type]?new f.ActionFactory.registered[m.type](m,e):null}}})(com.imc.content.item.action);
(function(f){var m=com.imc.content.item.action.ActionFactory;f.Trigger=function(e,c,a){var b=this;Object.defineProperty(this,"area",{value:c});Object.defineProperty(this,"item",{value:a});Object.defineProperty(this,"active",{value:!0});Object.defineProperty(this,"actions",{value:[]});for(c=0;c<e.actions.length;++c)(a=m.create(e.actions[c],b))&&b.actions.push(a);b.processActions=function(){if(b.active)for(var c=0;c<b.actions.length;++c)b.actions[c].startProcess()};b.uninstall=function(){};return b}})(com.imc.content.item.trigger);
(function(f){var m=com.imc.content.item.trigger.Trigger;f.MouseReleaseTrigger=function(e,c,a){var b=m.call(this,e,c,a);$(b.area).css("cursor","pointer");var d=function(c){b.processActions();c.stopPropagation()};$(b.area).on("tap",d);b.uninstall=function(){$(b.area).off("tap",d)};return b}})(com.imc.content.item.trigger);
(function(f){var m=com.imc.content.item.trigger.Trigger;f.MouseLeaveTrigger=function(e,c,a){var b=m.call(this,e,c,a);$(b.area).css("cursor","pointer");var d=function(){b.processActions()};$(b.area).on("mouseout",d);b.uninstall=function(){$(b.area).off("mouseout",d)};return b}})(com.imc.content.item.trigger);
(function(f){var m=com.imc.content.item.trigger.Trigger;f.ContentResumedTrigger=function(e,c,a){var b=m.call(this,e,c,a),d=function(){b.processActions()};$(window).on("imc:contentResumed",d);b.uninstall=function(){$(window).off("imc:contentResumed",d)};return b}})(com.imc.content.item.trigger);
(function(f){var m=com.imc.content.item.trigger.Trigger;f.MouseEnterTrigger=function(e,c,a){var b=m.call(this,e,c,a);$(b.area).css("cursor","pointer");var d=function(c){b.processActions();"tap"===c.type&&c.stopPropagation()};$(b.area).on("mouseover",d);$(b.area).on("tap",d);b.uninstall=function(){$(b.area).off("mouseover",d);$(b.area).off("tap",d)};return b}})(com.imc.content.item.trigger);
(function(f){var m=com.imc.content.item.trigger.Trigger;f.StageMouseReleaseTrigger=function(e,c,a){var b=m.call(this,e,c,a),d=function(){b.item.isVisible&&b.processActions()};$(b.item.stage).on("tap",d);b.uninstall=function(){$(b.item.stage).off("tap",d)};return b}})(com.imc.content.item.trigger);
(function(f){var m=com.imc.content.item.trigger.Trigger;f.ContentPausedTrigger=function(e,c,a){var b=m.call(this,e,c,a);a.noGlobalHide=!0;var d=function(){b.processActions()};$(window).on("imc:contentPaused",d);b.uninstall=function(){$(window).off("imc:contentPaused",d)};return b}})(com.imc.content.item.trigger);
(function(f){f.TriggerFactory={registered:{mouseenter:com.imc.content.item.trigger.MouseEnterTrigger,mouseleave:com.imc.content.item.trigger.MouseLeaveTrigger,mouserelease:com.imc.content.item.trigger.MouseReleaseTrigger,stagemouserelease:com.imc.content.item.trigger.StageMouseReleaseTrigger,contentpaused:com.imc.content.item.trigger.ContentPausedTrigger,contentresumed:com.imc.content.item.trigger.ContentResumedTrigger},create:function(m,e,c){return!m.type?null:f.TriggerFactory.registered[m.type]?
new f.TriggerFactory.registered[m.type](m,e,c):null}}})(com.imc.content.item.trigger);
(function(f){var m=function(c){return'"'+c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'},e={parse:function(c,a){function b(b){q<M||(q>M&&(M=q,R=[]),R.push(b))}function d(){var a,d,g,k,h,e;"none"===c.substr(q,4)?(a="none",q+=4):(a=null,0===E&&b('"none"'));if(null===a)if(h=q,a=n(),null!==a){d=[];e=q;k=y();if(null!==k)for(g=[];null!==k;)g.push(k),
k=y();else g=null;null!==g?(k=n(),null!==k?g=[g,k]:(g=null,q=e)):(g=null,q=e);for(;null!==g;){d.push(g);e=q;k=y();if(null!==k)for(g=[];null!==k;)g.push(k),k=y();else g=null;null!==g?(k=n(),null!==k?g=[g,k]:(g=null,q=e)):(g=null,q=e)}null!==d?a=[a,d]:(a=null,q=h)}else a=null,q=h;return a}function n(){var b;b=e();null===b&&(b=h(),null===b&&(b=t(),null===b&&(b=j(),null===b&&(b=x(),null===b&&(b=g(),null===b&&(b=k(),null===b&&(b=r(),null===b&&(b=w(),null===b&&(b=f())))))))));return b}function e(){var a,
d,g,n,k,h,r,p,l,j,t,w,x,v,A,f,m,z,s;s=z=q;"matrix"===c.substr(q,6)?(a="matrix",q+=6):(a=null,0===E&&b('"matrix"'));if(null!==a){d=[];for(g=y();null!==g;)d.push(g),g=y();if(null!==d)if(40===c.charCodeAt(q)?(g="(",q++):(g=null,0===E&&b('"("')),null!==g){n=[];for(k=y();null!==k;)n.push(k),k=y();if(null!==n)if(k=D(),null!==k)if(h=B(),null!==h)if(r=D(),null!==r)if(p=B(),null!==p)if(l=D(),null!==l)if(j=B(),null!==j)if(t=D(),null!==t)if(w=B(),null!==w)if(x=D(),null!==x)if(v=B(),null!==v)if(A=D(),null!==
A){f=[];for(m=y();null!==m;)f.push(m),m=y();null!==f?(41===c.charCodeAt(q)?(m=")",q++):(m=null,0===E&&b('")"')),null!==m?a=[a,d,g,n,k,h,r,p,l,j,t,w,x,v,A,f,m]:(a=null,q=s)):(a=null,q=s)}else a=null,q=s;else a=null,q=s;else a=null,q=s;else a=null,q=s;else a=null,q=s;else a=null,q=s;else a=null,q=s;else a=null,q=s;else a=null,q=s;else a=null,q=s;else a=null,q=s;else a=null,q=s}else a=null,q=s;else a=null,q=s}else a=null,q=s;null!==a&&(K=G(K,[a[4],a[6],a[8],a[10],a[12],a[14]]),a=void 0);null===a&&(q=
z);return a}function h(){var a,d,g,n,k,h,e,r,l,j;j=l=q;"translate"===c.substr(q,9)?(a="translate",q+=9):(a=null,0===E&&b('"translate"'));if(null!==a){d=[];for(g=y();null!==g;)d.push(g),g=y();if(null!==d)if(40===c.charCodeAt(q)?(g="(",q++):(g=null,0===E&&b('"("')),null!==g){n=[];for(k=y();null!==k;)n.push(k),k=y();if(null!==n)if(k=p(),null!==k)if(r=q,h=B(),null!==h?(e=p(),null!==e?h=[h,e]:(h=null,q=r)):(h=null,q=r),h=null!==h?h:"",null!==h){e=[];for(r=y();null!==r;)e.push(r),r=y();null!==e?(41===c.charCodeAt(q)?
(r=")",q++):(r=null,0===E&&b('")"')),null!==r?a=[a,d,g,n,k,h,e,r]:(a=null,q=j)):(a=null,q=j)}else a=null,q=j;else a=null,q=j;else a=null,q=j}else a=null,q=j;else a=null,q=j}else a=null,q=j;null!==a&&(d=a[5],K[4]+=a[4],d&&(K[5]+=d[1]),a=void 0);null===a&&(q=l);return a}function t(){var a,d,g,n,k,h,e,r,l;l=r=q;"translateX"===c.substr(q,10)?(a="translateX",q+=10):(a=null,0===E&&b('"translateX"'));if(null!==a){d=[];for(g=y();null!==g;)d.push(g),g=y();if(null!==d)if(40===c.charCodeAt(q)?(g="(",q++):(g=
null,0===E&&b('"("')),null!==g){n=[];for(k=y();null!==k;)n.push(k),k=y();if(null!==n)if(k=p(),null!==k){h=[];for(e=y();null!==e;)h.push(e),e=y();null!==h?(41===c.charCodeAt(q)?(e=")",q++):(e=null,0===E&&b('")"')),null!==e?a=[a,d,g,n,k,h,e]:(a=null,q=l)):(a=null,q=l)}else a=null,q=l;else a=null,q=l}else a=null,q=l;else a=null,q=l}else a=null,q=l;null!==a&&(K[4]+=a[4],a=void 0);null===a&&(q=r);return a}function j(){var a,d,g,n,k,h,e,r,l;l=r=q;"translateY"===c.substr(q,10)?(a="translateY",q+=10):(a=
null,0===E&&b('"translateY"'));if(null!==a){d=[];for(g=y();null!==g;)d.push(g),g=y();if(null!==d)if(40===c.charCodeAt(q)?(g="(",q++):(g=null,0===E&&b('"("')),null!==g){n=[];for(k=y();null!==k;)n.push(k),k=y();if(null!==n)if(k=p(),null!==k){h=[];for(e=y();null!==e;)h.push(e),e=y();null!==h?(41===c.charCodeAt(q)?(e=")",q++):(e=null,0===E&&b('")"')),null!==e?a=[a,d,g,n,k,h,e]:(a=null,q=l)):(a=null,q=l)}else a=null,q=l;else a=null,q=l}else a=null,q=l;else a=null,q=l}else a=null,q=l;null!==a&&(K[5]+=a[4],
a=void 0);null===a&&(q=r);return a}function x(){var a,d,g,n,k,h,e,r,l,p;p=l=q;"scale"===c.substr(q,5)?(a="scale",q+=5):(a=null,0===E&&b('"scale"'));if(null!==a){d=[];for(g=y();null!==g;)d.push(g),g=y();if(null!==d)if(40===c.charCodeAt(q)?(g="(",q++):(g=null,0===E&&b('"("')),null!==g){n=[];for(k=y();null!==k;)n.push(k),k=y();if(null!==n)if(k=D(),null!==k)if(r=q,h=B(),null!==h?(e=D(),null!==e?h=[h,e]:(h=null,q=r)):(h=null,q=r),h=null!==h?h:"",null!==h){e=[];for(r=y();null!==r;)e.push(r),r=y();null!==
e?(41===c.charCodeAt(q)?(r=")",q++):(r=null,0===E&&b('")"')),null!==r?a=[a,d,g,n,k,h,e,r]:(a=null,q=p)):(a=null,q=p)}else a=null,q=p;else a=null,q=p;else a=null,q=p}else a=null,q=p;else a=null,q=p}else a=null,q=p;null!==a&&(d=a[4],a=a[5],K=G(K,[d,0,0,a?a[1]:d,0,0]),a=void 0);null===a&&(q=l);return a}function g(){var a,d,g,n,k,h,e,r,l;l=r=q;"scaleX"===c.substr(q,6)?(a="scaleX",q+=6):(a=null,0===E&&b('"scaleX"'));if(null!==a){d=[];for(g=y();null!==g;)d.push(g),g=y();if(null!==d)if(40===c.charCodeAt(q)?
(g="(",q++):(g=null,0===E&&b('"("')),null!==g){n=[];for(k=y();null!==k;)n.push(k),k=y();if(null!==n)if(k=D(),null!==k){h=[];for(e=y();null!==e;)h.push(e),e=y();null!==h?(41===c.charCodeAt(q)?(e=")",q++):(e=null,0===E&&b('")"')),null!==e?a=[a,d,g,n,k,h,e]:(a=null,q=l)):(a=null,q=l)}else a=null,q=l;else a=null,q=l}else a=null,q=l;else a=null,q=l}else a=null,q=l;null!==a&&(K=G(K,[a[4],0,0,1,0,0]),a=void 0);null===a&&(q=r);return a}function k(){var a,d,g,n,k,h,e,r,l;l=r=q;"scaleY"===c.substr(q,6)?(a=
"scaleY",q+=6):(a=null,0===E&&b('"scaleY"'));if(null!==a){d=[];for(g=y();null!==g;)d.push(g),g=y();if(null!==d)if(40===c.charCodeAt(q)?(g="(",q++):(g=null,0===E&&b('"("')),null!==g){n=[];for(k=y();null!==k;)n.push(k),k=y();if(null!==n)if(k=D(),null!==k){h=[];for(e=y();null!==e;)h.push(e),e=y();null!==h?(41===c.charCodeAt(q)?(e=")",q++):(e=null,0===E&&b('")"')),null!==e?a=[a,d,g,n,k,h,e]:(a=null,q=l)):(a=null,q=l)}else a=null,q=l;else a=null,q=l}else a=null,q=l;else a=null,q=l}else a=null,q=l;null!==
a&&(K=G(K,[1,0,0,val,0,0]),a=void 0);null===a&&(q=r);return a}function r(){var a,d,g,n,k,h,e,r,l;l=r=q;"rotate"===c.substr(q,6)?(a="rotate",q+=6):(a=null,0===E&&b('"rotate"'));if(null!==a){d=[];for(g=y();null!==g;)d.push(g),g=y();if(null!==d)if(40===c.charCodeAt(q)?(g="(",q++):(g=null,0===E&&b('"("')),null!==g){n=[];for(k=y();null!==k;)n.push(k),k=y();if(null!==n)if(k=v(),null!==k){h=[];for(e=y();null!==e;)h.push(e),e=y();null!==h?(41===c.charCodeAt(q)?(e=")",q++):(e=null,0===E&&b('")"')),null!==
e?a=[a,d,g,n,k,h,e]:(a=null,q=l)):(a=null,q=l)}else a=null,q=l;else a=null,q=l}else a=null,q=l;else a=null,q=l}else a=null,q=l;null!==a&&(a=a[4],K=G(K,[Math.cos(a),Math.sin(a),-Math.sin(a),Math.cos(a),0,0]),a=void 0);null===a&&(q=r);return a}function w(){var a,g,d,k,n,h,e,r,l;l=r=q;"skewX"===c.substr(q,5)?(a="skewX",q+=5):(a=null,0===E&&b('"skewX"'));if(null!==a){g=[];for(d=y();null!==d;)g.push(d),d=y();if(null!==g)if(40===c.charCodeAt(q)?(d="(",q++):(d=null,0===E&&b('"("')),null!==d){k=[];for(n=
y();null!==n;)k.push(n),n=y();if(null!==k)if(n=v(),null!==n){h=[];for(e=y();null!==e;)h.push(e),e=y();null!==h?(41===c.charCodeAt(q)?(e=")",q++):(e=null,0===E&&b('")"')),null!==e?a=[a,g,d,k,n,h,e]:(a=null,q=l)):(a=null,q=l)}else a=null,q=l;else a=null,q=l}else a=null,q=l;else a=null,q=l}else a=null,q=l;null!==a&&(K=G(K,[1,0,Math.tan(a[4]),1,0,0]),a=void 0);null===a&&(q=r);return a}function f(){var a,d,g,n,k,h,e,l,r;r=l=q;"skewY"===c.substr(q,5)?(a="skewY",q+=5):(a=null,0===E&&b('"skewY"'));if(null!==
a){d=[];for(g=y();null!==g;)d.push(g),g=y();if(null!==d)if(40===c.charCodeAt(q)?(g="(",q++):(g=null,0===E&&b('"("')),null!==g){n=[];for(k=y();null!==k;)n.push(k),k=y();if(null!==n)if(k=v(),null!==k){h=[];for(e=y();null!==e;)h.push(e),e=y();null!==h?(41===c.charCodeAt(q)?(e=")",q++):(e=null,0===E&&b('")"')),null!==e?a=[a,d,g,n,k,h,e]:(a=null,q=r)):(a=null,q=r)}else a=null,q=r;else a=null,q=r}else a=null,q=r;else a=null,q=r}else a=null,q=r;null!==a&&(K=G(K,[1,Math.tan(a[4]),0,1,0,0]),a=void 0);null===
a&&(q=l);return a}function B(){var a,b,g,d,c;c=q;b=y();if(null!==b)for(a=[];null!==b;)a.push(b),b=y();else a=null;if(null!==a)if(b=A(),b=null!==b?b:"",null!==b){g=[];for(d=y();null!==d;)g.push(d),d=y();null!==g?a=[a,b,g]:(a=null,q=c)}else a=null,q=c;else a=null,q=c;if(null===a){d=c=q;a=A();if(null!==a){b=[];for(g=y();null!==g;)b.push(g),g=y();null!==b?a=[a,b]:(a=null,q=d)}else a=null,q=d;null!==a&&(a=",");null===a&&(q=c)}return a}function A(){var a;44===c.charCodeAt(q)?(a=",",q++):(a=null,0===E&&
b('","'));return a}function v(){var a,g,d,k;k=d=q;a=D();null!==a?("deg"===c.substr(q,3)?(g="deg",q+=3):(g=null,0===E&&b('"deg"')),null===g&&("turn"===c.substr(q,4)?(g="turn",q+=4):(g=null,0===E&&b('"turn"'))),g=null!==g?g:"",null!==g?a=[a,g]:(a=null,q=k)):(a=null,q=k);if(null!==a)a:switch(g=a[0],a[1]){case "turn":a=2*g*Math.PI;break a;default:a=g/180*Math.PI}null===a&&(q=d);return a}function p(){var a,g,d,k;k=d=q;a=I();null!==a?("px"===c.substr(q,2)?(g="px",q+=2):(g=null,0===E&&b('"px"')),null!==
g?a=[a,g]:(a=null,q=k)):(a=null,q=k);null!==a&&(a=parseInt(a[0]));null===a&&(q=d);return a}function D(){var a,b,g,d;d=g=q;a=F();a=null!==a?a:"";null!==a?(b=C(),null!==b?a=[a,b]:(a=null,q=d)):(a=null,q=d);if(null===a){d=q;a=[];for(b=F();null!==b;)a.push(b),b=F();null!==a?(b=I(),null!==b?a=[a,b]:(a=null,q=d)):(a=null,q=d)}null!==a&&(a=parseFloat(a.join("")));null===a&&(q=g);return a}function I(){var a,b,g,d;d=g=q;a=F();a=null!==a?a:"";null!==a?(b=H(),null!==b?a=[a,b]:(a=null,q=d)):(a=null,q=d);null!==
a&&(a=parseInt(a.join("")));null===a&&(q=g);return a}function C(){var a,b,g,d;d=g=q;a=L();null!==a?(b=J(),b=null!==b?b:"",null!==b?a=[a,b]:(a=null,q=d)):(a=null,q=d);null===a&&(d=q,a=H(),null!==a?(b=J(),null!==b?a=[a,b]:(a=null,q=d)):(a=null,q=d));null!==a&&(a=a.join(""));null===a&&(q=g);return a}function L(){var a,g,d,k,n;n=k=q;a=H();a=null!==a?a:"";null!==a?(46===c.charCodeAt(q)?(g=".",q++):(g=null,0===E&&b('"."')),null!==g?(d=H(),null!==d?a=[a,g,d]:(a=null,q=n)):(a=null,q=n)):(a=null,q=n);null===
a&&(n=q,a=H(),null!==a?(46===c.charCodeAt(q)?(g=".",q++):(g=null,0===E&&b('"."')),null!==g?a=[a,g]:(a=null,q=n)):(a=null,q=n));null!==a&&(a=a.join(""));null===a&&(q=k);return a}function J(){var a,g,d,k,n;n=k=q;/^[eE]/.test(c.charAt(q))?(a=c.charAt(q),q++):(a=null,0===E&&b("[eE]"));null!==a?(g=F(),g=null!==g?g:"",null!==g?(d=H(),null!==d?a=[a,g,d]:(a=null,q=n)):(a=null,q=n)):(a=null,q=n);null!==a&&(a=a.join(""));null===a&&(q=k);return a}function F(){var a;/^[+\-]/.test(c.charAt(q))?(a=c.charAt(q),
q++):(a=null,0===E&&b("[+\\-]"));return a}function H(){var a,g,d;d=q;/^[0-9]/.test(c.charAt(q))?(g=c.charAt(q),q++):(g=null,0===E&&b("[0-9]"));if(null!==g)for(a=[];null!==g;)a.push(g),/^[0-9]/.test(c.charAt(q))?(g=c.charAt(q),q++):(g=null,0===E&&b("[0-9]"));else a=null;null!==a&&(a=a.join(""));null===a&&(q=d);return a}function y(){var a;/^[ \t\n\r]/.test(c.charAt(q))?(a=c.charAt(q),q++):(a=null,0===E&&b("[ \\t\\n\\r]"));return a}function u(a){a.sort();for(var b=null,g=[],d=0;d<a.length;d++)a[d]!==
b&&(g.push(a[d]),b=a[d]);return g}function G(a,b){return[a[0]*b[0]+a[2]*b[1],a[1]*b[0]+a[3]*b[1],a[0]*b[2]+a[2]*b[3],a[1]*b[2]+a[3]*b[3],a[4]+b[4],a[5]+b[5]]}var s={transform_list:function(){var a,b,g,c,k,n;n=k=q;a=[];for(b=y();null!==b;)a.push(b),b=y();if(null!==a)if(b=d(),b=null!==b?b:"",null!==b){g=[];for(c=y();null!==c;)g.push(c),c=y();null!==g?a=[a,b,g]:(a=null,q=n)}else a=null,q=n;else a=null,q=n;null!==a&&(a=K);null===a&&(q=k);return a},transforms:d,transform:n,matrix:e,translate:h,translateX:t,
translateY:j,scale:x,scaleX:g,scaleY:k,rotate:r,skewX:w,skewY:f,comma_wsp:B,comma:A,angle:v,translation_value:p,number:D,integer_constant:I,floating_point_constant:C,fractional_constant:L,exponent:J,sign:F,digit_sequence:H,wsp:y};if(void 0!==a){if(void 0===s[a])throw Error("Invalid rule name: "+m(a)+".");}else a="transform_list";var q=0,E=0,M=0,R=[],K=[1,0,0,1,0,0],s=s[a]();if(null===s||q!==c.length){for(var s=Math.max(q,M),X=s<c.length?c.charAt(s):null,W=1,U=1,P=!1,V=0;V<Math.max(q,M);V++){var Q=
c.charAt(V);"\n"===Q?(P||W++,U=1,P=!1):"\r"===Q||"\u2028"===Q||"\u2029"===Q?(W++,U=1,P=!0):(U++,P=!1)}throw new this.SyntaxError(u(R),X,s,W,U);}return s},toSource:function(){return this._source},SyntaxError:function(c,a,b,d,n){this.name="SyntaxError";this.expected=c;this.found=a;switch(c.length){case 0:c="end of input";break;case 1:c=c[0];break;default:c=c.slice(0,c.length-1).join(", ")+" or "+c[c.length-1]}a=a?m(a):"end of input";this.message="Expected "+c+" but "+a+" found.";this.offset=b;this.line=
d;this.column=n}};e.SyntaxError.prototype=Error.prototype;f.CSSTransformationParser=e})(com.imc.util);
(function(f){var m=com.imc.content.item.trigger.TriggerFactory;f.Item=function(e,c){var a=this,b=0,d=0;Object.defineProperty(this,"stage",{value:c});this.id=e.id;$(this).css({position:"absolute",overflow:"hidden"});$(this).css(e.style||{});var n=1;e.style&&"undefined"!==typeof e.style.opacity&&(n=parseFloat(e.style.opacity));Object.defineProperty(this,"baseOpacity",{value:n});e.href&&Object.defineProperty(this,"link",{value:e.href});Object.defineProperty(this,"trigger",{value:[]});Object.defineProperty(this,
"isVisible",{get:function(){return"none"!=$(a).css("display")}});var l=0;e&&"undefined"!==typeof e.displaymode&&(l=parseFloat(e.displaymode));Object.defineProperty(this,"displaymode",{get:function(){return l}});this.hideItem=function(b){window.clearTimeout(d);if(b)d=window.setTimeout(this.hideItem,b);else if($(a).css("display","none"),$(a).removeClass("imc-visible"),a.onhide)a.onhide()};this.showItem=function(d){window.clearTimeout(b);if(d)b=window.setTimeout(this.showItem,d);else if($(a).addClass("imc-visible"),
$(a).css("display","block"),a.onshow)a.onshow()};this.purge=function(){a.trigger.forEach(function(a){a.uninstall()});a.trigger=[];$(a).off();a.parentElement&&a.parentElement.removeChild(a);a.src&&(a.src=void 0)};this.installTrigger=function(b,d){var c=m.create(b,d,a);c&&a.trigger.push(c)}};f.Item.createLink=function(e){e.link&&$(e).on("tap",function(c){$(this).trigger("imc:navigationRequest",this.link);c.stopPropagation()}).addClass("link")}})(com.imc.content.item);
(function(f){var m=com.imc.util.CSSTransformationParser;f.Transform=function(e){var c=[1,0,0,1,0,0];try{"string"===typeof e?c=m.parse(e):e instanceof Array&&6===e.length&&(c=e),Object.defineProperty(this,"matrix",{value:c})}catch(a){throw console.error(a.message),a;}this.toString=function(){return"matrix("+c[0].toFixed(4)+","+c[1].toFixed(4)+","+c[2].toFixed(4)+","+c[3].toFixed(4)+","+c[4].toFixed(0)+","+c[5].toFixed(0)+")"};this.scale=function(a,d){var n=[a,0,0,d,0,0];c=[n[0]*c[0]+n[2]*c[1],n[1]*
c[0]+n[3]*c[1],n[0]*c[2]+n[2]*c[3],n[1]*c[2]+n[3]*c[3],n[4]+c[4],n[5]+c[5]]}};f.Transform.interpolate=function(e,c,a){e=[e.matrix[0]+(c.matrix[0]-e.matrix[0])*a,e.matrix[1]+(c.matrix[1]-e.matrix[1])*a,e.matrix[2]+(c.matrix[2]-e.matrix[2])*a,e.matrix[3]+(c.matrix[3]-e.matrix[3])*a,parseInt(e.matrix[4]+(c.matrix[4]-e.matrix[4])*a),parseInt(e.matrix[5]+(c.matrix[5]-e.matrix[5])*a)];return new f.Transform(e)}})(com.imc.animation);
(function(f){f.CheckBox=function(m){var e=document.createElement("div"),c=!1,a=!0;e.id=m;$(e).addClass("imc-choice-checkbox");Object.defineProperty(e,"checked",{get:function(){return c},set:function(a){a=!!a;a!==c&&((c=a)?$(e).addClass("checked"):$(e).removeClass("checked"))}});Object.defineProperty(e,"enabled",{get:function(){return a},set:function(b){b=!!b;b!==a&&((a=b)?$(e).removeClass("disabled"):$(e).addClass("disabled"))}});$(e).on("tap",function(a){a.stopPropagation();e.enabled&&$(e).trigger("imc:checkboxTapped")});
return e}})(com.imc.content.item);
(function(f){var m=com.imc.content.item.Item;f.InteractionItem=function(e,c){var a=e.solution;m.call(this,e,c);this.decodeSolution=function(){for(var b=this.id,d=b.length,c=[],e=0;e<a.length;++e)c.push(a[e]^b.charCodeAt(e%d));b=String.fromCharCode.apply(this,c);return JSON.parse(b)};this.evaluate=function(){return!1};this.disable=function(){};this.markSolution=function(){};this.getUserResponse=function(){return null};this.setUserResponse=function(){};Object.defineProperty(this,"isInteractive",{value:!0})}})(com.imc.content.item);
(function(f){function m(a,b,d,n){function l(a){$(g.element).css(g.property,k+(r-k)*a)}function h(a){a=k+(r-k)*a;"px"===w&&(a=parseInt(a));$(g.element).css(g.property,a.toString()+w)}function t(a){!f&&0.8<=a&&($(g.element).css(g.property,r),f=!0)}function j(){f||($(g.element).css(g.property,r),f=!0)}function x(a){$(g.element).css(g.property,e.interpolate(k,r,a).toString())}var g=this,k,r,w="",f=!1;Object.defineProperties(this,{element:{enumerable:!0,writable:!1,value:a},property:{enumerable:!0,writable:!1,
value:b}});r=d;"undefined"===typeof n?"none"===$(this.element).css("display")?($(this.element).css("display","block"),k=$(this.element).css(this.property),$(this.element).css("display","none")):k=$(this.element).css(this.property):k=n;switch(b){case "opacity":a=m.FLOAT;this.update=l;break;case "width":case "height":case "left":case "top":case "right":case "bottom":case "font-size":a=m.DIMENSION;this.update=h;break;case "display":a=m.DISPLAY;this.update="none"===r?t:j;break;case "transform":a=m.TRANSFORM;
this.update=x;break;default:a=m.BINARY,this.update=j}Object.defineProperties(this,{type:{enumerable:!0,writable:!1,value:a}});switch(this.type){case m.FLOAT:k=parseFloat(k);r=parseFloat(r);if(0.001>Math.abs(k-r))throw 0;if(k===r)throw 0;break;case m.DIMENSION:(a=c.exec(r))&&2===a.length&&(w=a[1]);k=parseFloat(k);r=parseFloat(r);break;case m.TRANSFORM:k=new e(k),r=new e(r)}this.reset=function(){f=!1}}var e=com.imc.animation.Transform,c=/.*(px|cm|mm|pt|em|%)$/;Object.defineProperties(m,{BINARY:{value:0},
FLOAT:{value:1},DIMENSION:{value:2},DISPLAY:{value:3},TRANSFORM:{value:4}});f.Animation=function(a,b,d){function c(a,b){for(var d in b){var n=b[d];try{n.length&&2===n.length?j.push(new m(a,d,n[1],n[0])):j.push(new m(a,d,n))}catch(e){}}}var e=b||0,h=a||300,t=f.Animation.easingFunctions[d]||f.Animation.easingFunctions.quadout,j=[],x=0;Object.defineProperties(this,{startTime:{enumerable:!0,get:function(){return e}},delay:{enumerable:!0,get:function(){return e},set:function(a){e=a}},endTime:{enumerable:!0,
get:function(){return e+h}},duration:{enumerable:!0,get:function(){return h},set:function(a){h=a}},ease:{enumerable:!0,get:function(){return t},set:function(a){t=f.Animation.easingFunctions[a]||f.Animation.easingFunctions.quadout}}});this.initialize=function(){for(var a=x=0,b=j.length;a<b;++a)j[a].reset()};this.setTime=function(a){if(!(a<e||a>e+h))if(a=(a-e)/h,!(1E-4>Math.abs(a-x))){x=a=t(a);a=0;for(var b=j.length;a<b;++a)j[a].update(x)}};this.animate=function(a,b){if(a.length)for(var d=0,e=a.length;d<
e;++d)c(a[d],b);else c(a,b)}};f.Animation.easingFunctions={linear:function(a){return a},quadin:function(a){return Math.pow(a,2)},quadout:function(a){return Math.sqrt(a)}}})(com.imc.animation);
(function(f){f.Control=function(f){var e=this;f.id&&(this.id=f.id);f["class"]&&$(this).addClass(f["class"]);var c,a=/watch\(([^,]+),([^\)]+)\)/,b;for(b in f)if(c=f[b],c=a.exec(c)){var d=c[1].trim();c=c[2].trim();for(var d=d.split("."),n=window,l=0;l<d.length;++l)n=n[d[l]];if(n.addWatcher){var h=b.replace(/\-([a-z])/,function(a,b){return b.toUpperCase()});e[h]=n[c];n.addWatcher(c,function(a,b){e[h]=b})}else console.warn("Property "+c+" is not watchable.")}$_P.deviceFamily!==com.imc.core.DeviceFamily.DESKTOP&&
$(this).addClass("touch-enabled")}})(com.imc.controls);
(function(f){f.ViewItem=function(f){var e=!1,c=!1,a=f.dataSource,b=f.view,d=f.identifier,n;f=document.createElement("div");var l=b.template,l=l.replace(/\$\{([^\}]+)\}/g,function(b,c){return a.data(d,c)});$(f).html(l);com.imc.util.ControlLoader.createControls(f);n=f.removeChild(f.firstElementChild);(c=a.data(d,"locked"))?$(n).addClass("locked"):$(n).removeClass("locked");Object.defineProperty(n,"identifier",{value:d});Object.defineProperty(n,"view",{value:b});Object.defineProperty(n,"dataSource",
{value:a});Object.defineProperty(n,"enabled",{enumerable:!0,get:function(){return!c}});Object.defineProperty(n,"selected",{get:function(){return e},set:function(a){a=!0===a;a!==e&&(e=a,$(this).toggleClass("selected"),e&&n.ensureVisible())}});n.ensureVisible=function(){try{var a=$(n.parentElement).position().top,b=$(n.view).height();if(0>a||a>b){var d=a+$(n.view).scrollTop();$(n.view).scrollTop(d)}}catch(c){console.error(c.message)}};$(n).on("tap",function(a){b&&(n.enabled?n.aggregate?$(n).trigger("imc:aggregateTapped"):
(b.select(d),$(n).trigger("imc:viewItemTapped",n.identifier)):$(n).trigger("imc:lockedItemTapped",n.identifier),a.stopPropagation())});return n}})(com.imc.controls);
(function(f){var m=com.imc.content.item.InteractionItem,e=com.imc.content.item.CheckBox;f.ChoiceItem=function(c,a){var b=document.createElement("div");m.call(b,c,a);Object.defineProperty(b,"checkboxes",{value:[]});if(!c.items)return b;for(var d=[],n=0;n<c.items.length;++n)d.push(c.items[n]);for(var n=!0,l=null,h=null,t=null,t=null;0<d.length;)c.random_order?(h=Math.round(Math.random()*(d.length-1)),l=d[h],d.splice(h,1)):l=d.shift(),h=document.createElement("div"),$(h).addClass("imc-choice-entry"),
!n&&c.vertical_offset&&$(h).css("margin-top",c.vertical_offset+"px"),t=e(l.id),h.appendChild(t),b.checkboxes.push(t),t=document.createElement("div"),$(t).addClass("imc-choice-text"),c.fontSize&&$(t).css("font-size",c.fontSize),n=l.html,n.length||(n="&nbsp;"),$(t).html(n),c.horizontal_offset&&$(t).css("margin-left",c.horizontal_offset+"px"),h.appendChild(t),b.appendChild(h),n=!1;b.disable=function(){for(var a=0;a<b.checkboxes.length;++a)b.checkboxes[a].enabled=!1};return b}})(com.imc.content.item);
(function(f){var m=com.imc.animation.Animation;f.AnimationDriver=function(){function e(){var h=window.performance.now();d+=h-b;for(var t=0,j=c.length;t<j;++t)c[t].setTime(d);b=h;if(d<n)window.requestAnimationFrame(e);else{a=!1;t=0;for(j=c.length;t<j;++t)c[t].setTime(c[t].endTime);l&&l()}}var c=[],a=!1,b=0,d=0,n=0,l=null;Object.defineProperty(this,"isRunning",{enumerable:!0,get:function(){return a}});this.addAnimation=function(a){c.push(a);n=Math.max(n,a.endTime)};this.start=function(n){l=n;a=!0;b=
window.performance.now();d=0;c.sort(function(a,b){return a.startTime-b.startTime});n=0;for(var t=c.length;n<t;++n)c[n].initialize(),0===c[n].startTime&&c[n].setTime(0);e()}};f.AnimationDriver.run=function(e,c){var a=new f.AnimationDriver;a.addAnimation(e);a.start(c)};f.AnimationDriver.fadeIn=function(e,c,a){var b=new f.AnimationDriver;c=new m(c,0,"quadin");c.animate(e,{opacity:[0,1],display:"block"});b.addAnimation(c);b.start(a)};f.AnimationDriver.fadeOut=function(e,c,a){var b=new f.AnimationDriver;
c=new m(c);c.animate(e,{opacity:0,display:"none"});b.addAnimation(c);b.start(a)};f.AnimationDriver.runCSSAnimation=function(e,c,a,b){function d(a){a.target===e&&(b(),a.stopPropagation(),a.target.removeEventListener(n,d))}if(Modernizr.cssanimations){var n={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",animation:"animationend"}[Modernizr.prefixed("animation")];b&&e.addEventListener(n,d);$(e).css({"animation-name":c,"animation-duration":a+"ms","animation-fill-mode":"both"})}}})(com.imc.animation);
(function(f){function m(c,a){function b(){$(d).removeClass("active");e=0}var d=document.createElement("div"),n=a||"vertical",e=0,h=0,t=0,j=document.createElement("div");$(j).addClass("handle");d.appendChild(j);$(d).addClass("imc-scrollindicator-"+a);$(d).css("z-index","1");c.appendChild(d);d.update=function(){if("horizontal"===n){$(d).css("left",c.scrollLeft+"px");$(d).css("bottom",-c.scrollTop+"px");h=c.scrollWidth-$(c).width();t=c.scrollLeft;if(0>=h)return;var a=$(d).width(),g=Math.max(a-h,20);
$(j).css("width",g+"px");a-=$(j).outerWidth(!0);g=t/h;$(j).css("left",Math.max(0,parseInt(a*g))+"px")}else{$(d).css("top",c.scrollTop+"px");$(d).css("right",-c.scrollLeft+"px");h=c.scrollHeight-$(c).height();t=c.scrollTop;if(0>=h)return;a=$(d).height();g=Math.max(a-h,20);$(j).css("height",g+"px");a-=$(j).outerHeight(!0);g=t/h;$(j).css("top",Math.max(0,parseInt(a*g))+"px")}$(d).addClass("active");e&&window.clearTimeout(e);e=window.setTimeout(b,1E3)};return d}var e=com.imc.controls.Control;f.Scrollable=
function(c,a){var b=c||"both";switch(b){case "horizontal":case "vertical":case "both":break;default:b="both"}var d=this,n=!1,l=null,h=null,t,j;a=a||{};e.call(d,a);$(d).addClass("imc-scrollable-"+b);if($_P.deviceFamily!==com.imc.core.DeviceFamily.DESKTOP){if("horizontal"===b||"both"===b)t=new m(this,"horizontal");if("vertical"===b||"both"===b)j=new m(this,"vertical")}$_P.deviceFamily!==com.imc.core.DeviceFamily.DESKTOP&&($(d).on("vmousedown",function(a){if(!n){n=!0;var b=a.pageX;a=a.pageY;try{l=[d.scrollLeft,
d.scrollTop],h=[b,a]}catch(c){}}}),$(d).on("vmousemove",function(a){if(n){a=[a.pageX,a.pageY];var g=[h[0]-a[0],h[1]-a[1]];a=[0,0];switch(b){case "horizontal":a[0]=l[0]+g[0];break;case "vertical":a[1]=l[1]+g[1];break;default:a[0]=l[0]+g[0],a[1]=l[1]+g[1]}g=a[1];d.scrollLeft=a[0];d.scrollTop=g;j&&j.update();t&&t.update()}}),$(d).on("vmouseup",function(){n=!1}))}})(com.imc.touch);
(function(f){var m=com.imc.controls.Control,e=com.imc.controls.ViewItem;f.View=function(c){function a(a,d){var g=j[d];if(g){var c=b.createItem(d);$(c).attr("style",$(g).attr("style"));if(g.transfer)try{g.transfer(c),c.transfer=g.transfer}catch(n){console.error(n.message)}$(g).replaceWith(c);g.selected&&(c.selected=!0,h=c);j[d]=c}}var b=this,d=!1,n=null,l=f.View.SelectionMode.SINGLE,h=null,t=[],j={};$(b).addClass("imc-view");if(!c.template)throw Error("Item template definition missing");$.get("resources/style/controls/"+
c.template+".ctl.html",null,function(a,g,c){Object.defineProperty(b,"template",{value:c.responseText});n&&$(b).trigger("imc:dataSourceChange");d=!0;h&&(a=h,h=null,b.select(a))});Object.defineProperty(b,"dataSource",{enumerable:!0,get:function(){return n},set:function(d){n&&$(n).off("imc:dataChange",a);h=null;t=[];j={};(n=d)?(b.template&&$(b).trigger("imc:dataSourceChange"),$(n).on("imc:dataChange",a)):b.innerHTML=""}});Object.defineProperty(b,"selectionMode",{enumerable:!0,get:function(){return l},
set:function(a){if(a!==l){switch(a){case f.View.SelectionMode.NONE:this.clearSelection();break;case f.View.SelectionMode.SINGLE:break;case f.View.SelectionMode.MULTIPLE:break;default:throw Error("Invalid selection mode: "+a);}l=a}}});b.clearSelection=function(){t.length&&(t=[],h=null,$(b).trigger("imc:selectionChange"))};b.select=function(a,b){if(d){if(a){if(!a.identifier&&(a=j[a],"undefined"===typeof a))return;switch(l){case f.View.SelectionMode.SINGLE:if(h!==a){if(!b){var g=$.Event("imc:selectionChange");
$(this).trigger(g,a.identifier);if(g.isDefaultPrevented())break}h&&(h.selected=!1);h=a;h.selected=!0;t=[a]}}}}else h=a};b.createItem=function(a){var d=e({view:b,dataSource:n,identifier:a});j[a]=d;if(n.childIdentifiers&&(a=n.childIdentifiers(a))&&a.length)$(d).addClass("aggregate"),Object.defineProperty(d,"aggregate",{value:!0});return d};b.scrollToCurrent=function(){h&&h.ensureVisible()};Object.defineProperty(b,"activeItem",{enumerable:!0,get:function(){return h?h.identifier:null},set:function(a){b.select(a,
!0)}});Object.defineProperty(b,"selectedItems",{enumerable:!0,get:function(){return t}});m.call(b,c);if(c.data)try{var x=c.data.split(".");c=window;for(var g=0;g<x.length;++g)c=c[x[g]];b.dataSource=c}catch(k){console.log(k.message)}};f.View.SelectionMode=Object.freeze({NONE:0,SINGLE:1,MULTIPLE:2})})(com.imc.controls);
(function(f){f.Requirement=function(f){var e=!1;Object.defineProperty(this,"type",{value:f.type});Object.defineProperty(this,"inverted",{value:f.inverted||!1});Object.defineProperty(this,"changeListener",{value:null,writable:!0});Object.defineProperty(this,"message",{value:f.message||""});Object.defineProperty(this,"satisfied",{get:function(){return e},set:function(c){c=!!c;c!==e&&(e=c,this.changeListener&&this.changeListener(e))}});this.isFailed=function(){return!1}}})(com.imc.core.navigation);
(function(f){f.Content=function(f,e,c){var a=document.createElement("div"),b=!1,d=!1;$(a).addClass("imc-content "+f);$(a).css({position:"absolute",top:"0px",left:"0px",overflow:"hidden"});if(!e)throw Error("Missing content definition");Object.defineProperty(a,"viewport",{value:null,writable:!0});Object.defineProperty(a,"isReady",{value:d});Object.defineProperty(a,"adapter",{value:$_P.adapter});$(a).on("imc:ready",function(){d=!0});$_P.isOldPlayer||Object.defineProperty(a,"scaleToWidth",{value:document.querySelectorAll(".content-width")||
[]});a.load=function(){function n(b){a.definition||(Object.defineProperty(a,"definition",{value:b}),Object.defineProperty(a,"type",{value:b.type}),b.style&&$(a).css(b.style),$_P.deviceFamily!==com.imc.core.DeviceFamily.DESKTOP&&$(a).addClass("touch-enabled"));c?c.call(a):$(a).trigger("imc:ready")}function l(){b=!1;window.setTimeout(a.load(),100)}d?$(a).trigger("imc:ready"):b||($.ajax({dataType:"json",cache:!1,url:e,data:null,success:n,error:l}),b=!0)};a.clear=function(){a.innerHTML="";b=d=!1};a.fitViewport=
function(b){$(a).css({width:b[0]+"px",height:b[1]+"px"});if(a.scaleToWidth)for(var d=0;d<a.scaleToWidth.length;++d)$(a.scaleToWidth[d]).css({left:"0px",width:b[0]+"px"})};a.present=a.cleanup=a.suspend=a.unsuspend=function(){};a.promptNavigation=function(){return!0};a.enableControls=function(b){!$_P.isOldPlayer&&a.viewport&&($.isArray(b)||(b=[b]),a.viewport.enableControls.apply(a,b))};a.disableControls=function(b){!$_P.isOldPlayer&&a.viewport&&($.isArray(b)||(b=[b]),a.viewport.disableControls.apply(a,
b))};a.addContentClass=function(b){a.viewport&&a.viewport.addContentClass(b)};a.removeContentClass=function(b){a.viewport&&a.viewport.removeContentClass(b)};a.executeAction=function(){return!1};return a}})(com.imc.content);
(function(f){f.Watchable=function(){var f={},e={};this.defineWatchableProperty=function(c,a,b){f[c]||(f[c]=[]);Object.defineProperty(this,c,{get:function(){return e[c]},set:function(a){if(a!==e[c]&&(e[c]=a,b&&b.call(this,a),f[c]))for(var n=0;n<f[c].length;++n)f[c][n](c,a)}});e[c]=a};this.addWatcher=function(c,a){f[c]&&f[c].push(a)};this.removeWatcher=function(c,a){if(f[c]){var b=f[c].indexOf(a);-1!==b&&f[c].splice(b,1)}}}})(com.imc.util);
(function(f){var m=com.imc.animation.Transform;f.KeyFrame=function(e,c,a){var b=this,d=$(e).outerWidth(),n=$(e).outerHeight(),l=null;e.currentState||(e.currentState={display:null,opacity:-1,clip:null,transform:null,"transform-origin":null});"undefined"===typeof a.opacity&&(a.opacity=1);"undefined"!==typeof e.baseOpacity&&(a.opacity*=e.baseOpacity);var h=$(e),f={},j=e.currentState;Object.defineProperty(b,"element",{value:e});Object.defineProperty(b,"time",{value:c});Object.defineProperty(b,"style",
{value:a});Object.defineProperty(b,"transform",{get:function(){l||(l=new m(b.style.transform));return l}});b.propagateStyle=function(a){for(var d in b.style)d in a.style||(a.style[d]=b.style[d])};b.interpolate=function(a,g){f.display=b.style.display;f.opacity=b.style.opacity;f.clip=b.style.clip;if(g){var c=(a-b.time)/(g.time-b.time);f.opacity+=(g.style.opacity-f.opacity)*c;f.clip=[f.clip[0]+(g.style.clip[0]-f.clip[0])*c,f.clip[1]+(g.style.clip[1]-f.clip[1])*c,f.clip[2]+(g.style.clip[2]-f.clip[2])*
c,f.clip[3]+(g.style.clip[3]-f.clip[3])*c];f.transform=m.interpolate(b.transform,g.transform,c).toString()}else f.transform=b.style.transform;f.clip="rect("+parseInt(f.clip[1]*n)+"px,"+parseInt((1-f.clip[2])*d)+"px,"+parseInt((1-f.clip[3])*n)+"px,"+parseInt(f.clip[0]*d)+"px)";for(var l in f)if(j[l]!==f[l]&&(h.css(l,f[l]),j[l]=f[l],"display"===l))if("none"===f[l]&&e.onhide)e.onhide(a);else if(e.onshow)e.onshow(a)}};f.KeyFrame.createDefault=function(e){return new f.KeyFrame(e,0,{display:"none",opacity:e.baseOpacity||
1,clip:[0,0,0,0],transform:"none","transform-origin":"center center"})}})(com.imc.animation);
(function(f){var m=com.imc.content.item.ChoiceItem;f.MultipleChoiceItem=function(e,c){var a=m(e,c);$(a).addClass("imc-multiplechoice");$(a).on("imc:checkboxTapped",function(a){a.target.checked=!a.target.checked;a.stopPropagation()});a.evaluate=function(){if(!a.checkboxes.length)return 1;for(var b=0,d=a.decodeSolution(),c=0;c<a.checkboxes.length;++c)a.checkboxes[c].checked?-1!==d.indexOf(a.checkboxes[c].id)&&++b:-1===d.indexOf(a.checkboxes[c].id)&&++b;return b/a.checkboxes.length};a.markSolution=function(){for(var b=
a.decodeSolution(),d=0;d<a.checkboxes.length;++d){var c=!1;a.checkboxes[d].checked?-1!==b.indexOf(a.checkboxes[d].id)&&(c=!0):-1===b.indexOf(a.checkboxes[d].id)&&(c=!0);$(a.checkboxes[d]).addClass(c?"correct":"incorrect")}};a.getUserResponse=function(){for(var b=[],d=0;d<a.checkboxes.length;++d)a.checkboxes[d].checked&&b.push(a.checkboxes[d].id);return b.length?b:null};a.setUserResponse=function(b){try{for(var d=a.querySelectorAll(".imc-choice-checkbox"),c=0;c<d.length;++c)-1!==b.indexOf(d[c].id)&&
(d[c].checked=!0)}catch(e){console.log(e.message)}};return a}})(com.imc.content.item);(function(f){var m=com.imc.content.item.Item;f.EventAudioItem=function(e,c){var a=document.createElement("div");m.call(a,e,c);a.onpresent=function(){$_P.audioPlayer.addEventAudio(a.id,e.src)};a.onshow=function(){$_P.audioPlayer.playEventAudio(a.id)};a.onhide=function(){$_P.audioPlayer.stopEventAudio(a.id)};return a}})(com.imc.content.item);
(function(f){var m=com.imc.content.item.Item;f.CreateJSItem=function(e,c){var a=document.createElement("canvas"),b={},d={},n=0,l=null,h=null,f=!1,j=!1;m.call(a,e,c);$(a).addClass("imc-createjs");a.width=e.canvasWidth;a.height=e.canvasHeight;a.link&&m.createLink(a);var x=new createjs.LoadQueue(!1);x.addEventListener("fileload",function(a){"image"==a.item.type?d[a.item.id]=a.result:alert(a.result)});x.addEventListener("complete",function(){g(b,d,createjs);h=new b[e.movieClip];l=new createjs.Stage(a);
l.tickOnUpdate=!1;l.addChild(h);l.update();f=!0});x.loadManifest(e.manifest);var g=new Function("lib","img","cjs",e.script);a.onshow=function(a){j=!0;n=a};a.onhide=function(){j=!1};a.ontimechange=function(a){j&&f&&(h.gotoAndStop((a-n)/createjs.Ticker.getFPS()),l.update())};return a}})(com.imc.content.item);
(function(f){var m=com.imc.content.item.ChoiceItem;f.SingleChoiceItem=function(e,c){var a=m(e,c),b=null;$(a).addClass("imc-singlechoice");$(a).on("imc:checkboxTapped",function(a){a.target!==b&&(b&&(b.checked=!1),b=a.target,b.checked=!0,a.stopPropagation())});a.evaluate=function(){var a=this.decodeSolution();return b&&b.id===a?1:0};a.markSolution=function(){var a=this.decodeSolution();b&&b.id===a?$(b).addClass("correct"):(b&&$(b).addClass("incorrect"),(a=document.getElementById(a))&&$(a).addClass("incorrect"))};
a.getUserResponse=function(){try{return b.id}catch(a){return null}};a.setUserResponse=function(a){if(a)try{var c=document.getElementById(a);c&&(c.checked=!0,b=c)}catch(e){}};return a}})(com.imc.content.item);
(function(f){function m(c,a,b,d,n){function e(a){try{k.setEntry(a.target.entryIndex)}catch(b){}h.closeOpen();x.blur();a.stopPropagation();a.preventDefault()}var h=c,f=!1,j=!0,x=a,g=-1;c=a.id;$(a).addClass("imc-listgapbox").attr("readonly","readonly").attr("id",c+"-input");var k=document.createElement("div");$(k).addClass("imc-list-container").attr("id",c);$(a).replaceWith(k);$(k).append(a);$(k).css({display:"inline-block",position:"relative"});Object.defineProperty(k,"enabled",{get:function(){return j},
set:function(a){j=a;(x.enabled=j)?$(x).removeClass("disabled"):$(x).addClass("disabled")}});Object.defineProperty(k,"isListBox",{value:!0});Object.defineProperty(k,"isOpen",{get:function(){return f}});Object.defineProperty(k,"entryIndex",{get:function(){return g}});var r=document.createElement("ul");$(r).addClass("imc-list-dropdown").css("width",$(a).css("width"));c=[];for(var w=0;w<b.length;++w)c.push([w,b[w]]);if(d){for(d=[];0<c.length;)w=Math.round(Math.random()*(c.length-1)),d.push(c[w]),c.splice(w,
1);c=d}for(w=0;w<c.length;++w)d=document.createElement("li"),d.entryIndex=c[w][0],d.appendChild(document.createTextNode(c[w][1])),r.appendChild(d),$(d).on("tap",e);n.appendChild(r);r.open=function(){var b=$(a).offset(),d=$(n).offset(),c=(b.left-d.left)/n.scale,b=(b.top-d.top)/n.scale+$(a).outerHeight();b+$(r).outerHeight()+10>$(n).height()&&(b=b-$(a).outerHeight()-$(r).outerHeight());$(this).css({left:c+"px",top:b+"px"}).addClass("open")};r.close=function(){$(this).removeClass("open")};k.open=function(){f||
(f=!0,$(k).addClass("open"),r.open())};k.close=function(){f&&(f=!1,$(k).removeClass("open"),r.close())};k.setEntry=function(a){g!==a&&(g=a,x.value=b[a])};k.setCorrect=function(a){$(x).addClass(a?"correct":"incorrect")};return k}var e=com.imc.content.item.InteractionItem;f.ListGapItem=function(c,a){var b=document.createElement("div"),d=[],n=null;e.call(b,c,a);$(b).addClass("imc-listgap").css("overflow","visible");b.innerHTML=c.html.replace(/<gap\s*=\s*(\d+)>/g,function(a,b){var d=parseInt(b);return"<input type='text' id='"+
c.gaps[d].id+"' style='width: "+c.gaps[d].width+"px'>"});for(var l={},h=0;h<c.gaps.length;++h)l[c.gaps[h].id]=c.gaps[h].answers;for(var f=b.querySelectorAll("input"),h=0;h<f.length;++h){var j=m(b,f[h],l[f[h].id],c.random_order||!1,a);d.push(j);d[f[h].id]=j}$(b).on("tap",function(a){var c=d[a.target.id];b.closeOpen();$(".imc-listgap").each(function(){this.closeOpen()});c&&c.enabled&&(n=c,c.open());c&&a.stopPropagation()});b.disable=function(){for(var a=0;a<d.length;++a)d[a].enabled=!1};b.showSolution=
function(){};b.getUserResponse=function(){for(var a={},b=0;b<d.length;++b)a[d[b].id]=d[b].entryIndex;return a};b.setUserResponse=function(a){for(var b=0;b<d.length;++b)try{void 0!==a[d[b].id]&&d[b].setEntry(a[d[b].id])}catch(c){console.warn(c.message)}};b.markSolution=function(){b.closeOpen();for(var a=b.decodeSolution(),c=0;c<d.length;++c)a[d[c].id]===d[c].entryIndex?d[c].setCorrect(!0):d[c].setCorrect(!1)};b.evaluate=function(){b.closeOpen();for(var a=b.decodeSolution(),c=0,n=0;n<d.length;++n)a[d[n].id]===
d[n].entryIndex&&++c;return c===d.length};b.closeOpen=function(){return n?(n.close(),n=null,!0):!1};return b}})(com.imc.content.item);
(function(f){function m(a,b){var c=document.createElement("div"),d=null;c.id=a.id;d=a.style||{};d.position="absolute";d.width=b.size[0]+"px";d.height=b.size[1]+"px";d["text-align"]="center";d.overflow="hidden";var e={x:parseInt(a.style.left||0),y:parseInt(a.style.top||0),width:b.size[0],height:b.size[1]};Object.defineProperty(c,"baseRect",{value:e});$(c).css(d);if(a.svg||a.text)e="",a.svg?e=a.svg:a.text&&(e=a.text.replace(/\n/g,"<br>")),d=document.createElement("div"),$(d).css({position:"relative",
top:"50%",transform:"translateY(-50%)"}),d.innerHTML=e,c.appendChild(d);return c}function e(a,b){var d=m.call(this,a,b);$(d).addClass("imc-droptarget");Object.defineProperty(d,"attachedSource",{value:null,writable:!0});d.intersect=function(a){var b=0,c=0,b=d.baseRect.x<=a.x?Math.max(d.baseRect.x+d.baseRect.width-a.x,0):Math.max(a.x+a.width-d.baseRect.x,0),c=d.baseRect.y<=a.y?Math.max(d.baseRect.y+d.baseRect.height-a.y,0):Math.max(a.y+a.height-d.baseRect.y,0);return b*c};return d}function c(d,c,e){function f(a,
b){if(!g.enabled)return!1;k=!0;var d=w.stage.scale;r=[a-B[0]*d,b-B[1]*d];$(g).css("z-index",1E3);return!0}function j(a,b){if(k){var d=w.stage.scale;B=[Math.round((a-r[0])/d),Math.round((b-r[1])/d)];$(g).css({transform:"translate("+B[0]+"px,"+B[1]+"px)"});return!0}return!1}function x(){if(!k)return!1;k=!1;for(var a={x:z[0]+B[0],y:z[1]+B[1],width:A[0],height:A[1]},b=null,d=0,c=0;c<w.targets.length;++c){var n=w.targets[c].intersect(a);n>d&&(d=n,b=w.targets[c])}b?g.setTarget(b):g.reset();return!0}var g=
m.call(this,d,c),k=!1,r=[0,0],w=e,z=[g.baseRect.x,g.baseRect.y],B=[0,0],A=c.size,v=$(g).css("z-index");c=d.inner_rect||[0,0,A[0],A[1]];var p=null;$(g).addClass("imc-dragsource");Object.defineProperty(g,"enabled",{value:!0,writable:!0});Object.defineProperty(g,"isAttached",{get:function(){return!!p}});Object.defineProperty(g,"target",{get:function(){return p}});Object.defineProperty(g,"position",{get:function(){return z},set:function(a){g.baseRect.x=a[0];g.baseRect.y=a[1];z=a;$(g).css({left:z[0]+"px",
top:z[1]+"px"})}});d.image&&(e=document.createElement("img"),e.onload=function(){$(this).css({left:"50%",top:"50%",transform:"translate(-50%, -50%)"});$(this).removeAttr("width");$(this).removeAttr("height")},e.src=d.image,g.appendChild(e),$(e).css({"max-width":c[2]+"px","max-height":c[3]+"px",position:"absolute","z-index":1}));$_P.isOldPreview?(g.addEventListener("mousedown",function(a){f(a.clientX,a.clientY)&&(this.setCapture(),a.preventDefault(),a.stopPropagation())}),g.addEventListener("mousemove",
function(a){j(a.clientX,a.clientY)&&a.stopPropagation()}),g.addEventListener("mouseup",function(a){x()&&(this.releaseCapture(),a.preventDefault(),a.stopPropagation())})):($(g).on("vmousedown",function(a){HTMLElement.prototype.setCapture&&g.setCapture();f(a.clientX,a.clientY);a.preventDefault()}),$(g).on("vmousemove",function(a){j(a.clientX,a.clientY)}),$(g).on("vmouseup",function(){HTMLElement.prototype.releaseCapture&&document.releaseCapture();x()}));g.setTarget=function(d,c){var n=[d.baseRect.x-
g.baseRect.x,d.baseRect.y-g.baseRect.y],k="translate("+n[0]+"px,"+n[1]+"px)";if(c)$(g).css("transform",k);else{var e=new a(200);e.animate(g,{transform:k});b.run(e)}B=n;d!==p&&(d.attachedSource&&(p?(n=p,p=p.attachedSource=null,d.attachedSource.setTarget(n)):d.attachedSource.reset()),p&&(p.attachedSource=null),d.attachedSource=g,p=d,$(g).css("z-index",$(p).css("z-index")))};g.reset=function(){var d=new a(200);d.animate(g,{transform:"none"});b.run(d);B=[0,0];p&&(p=p.attachedSource=null);$(g).css("z-index",
v)};return g}var a=com.imc.animation.Animation,b=com.imc.animation.AnimationDriver,d=com.imc.content.item.InteractionItem;f.DragAndDropItem=function(a,b){var h=document.createElement("div"),f={},j={};d.call(h,a,b);$(h).addClass("imc-dragdrop").css({position:"static",overflow:"visible"});Object.defineProperty(h,"stage",{value:b});Object.defineProperty(h,"targets",{value:[]});Object.defineProperty(h,"sources",{value:[]});var m={size:a.itemsize||[50,50],fontsize:a.fontsize||16};try{for(var g=0;g<a.targets.length;++g){var k=
new e(a.targets[g],m,h);h.targets.push(k);j[k.id]=k;h.appendChild(k)}for(g=0;g<a.sources.length;++g){var r=new c(a.sources[g],m,h);h.sources.push(r);f[r.id]=r;h.appendChild(r)}if(a.random_order){m=[];for(g=0;g<h.sources.length;++g)m.push(h.sources[g].position);for(g=0;g<h.sources.length;++g){var w=Math.round(Math.random()*(m.length-1)),z=m[w];m.splice(w,1);h.sources[g].position=z}}}catch(B){console.error(B.message)}h.onpresent=function(){if(-1<navigator.userAgent.toLowerCase().indexOf("android"))if(0===
$("#imc-fixup-layering-android").length){var a=document.createElement("div");a.id="imc-fixup-layering-android";$(a).css({position:"absolute",right:"0px",top:"0px",width:"1px",height:"1px",animation:"fade-in 5s"});document.getElementsByTagName("body")[0].appendChild(a)}else{var a=$("#imc-fixup-layering-android")[0],b=a.cloneNode(!0);a.parentNode.replaceChild(b,a)}for(a=0;a<h.sources.length;++a)if(h.sources[a].onpresent)h.sources[a].onpresent();for(a=0;a<h.targets.length;++a)if(h.targets[a].onpresent)h.targets[a].onpresent()};
h.disable=function(){for(var a=0;a<h.sources.length;++a)h.sources[a].enabled=!1};h.markSolution=function(){for(var a=h.decodeSolution(),b=0;b<h.targets.length;++b){var d=h.targets[b],c=!1,g=a[d.id]||[];if(d.attachedSource)-1!==g.indexOf(d.attachedSource.id)&&(c=!0);else{for(var k=!1,n=0;n<g.length;++n)if(r=f[g[n]],!r.isAttached){k=!0;break}!k&&1<g.length&&(c=!0)}d.attachedSource&&$(d).addClass(c?"correct":"incorrect")}};h.getUserResponse=function(){for(var a={},b=!1,d=0;d<h.targets.length;++d){var c=
h.targets[d];c.attachedSource&&(a[c.id]=c.attachedSource.id,b=!0)}return b?a:null};h.setUserResponse=function(a){try{for(var b in a){var d=a[b];f[d]&&f[d].setTarget(j[b],!0)}}catch(c){console.error(c.message)}};h.possiblePoints=function(){for(var a=h.decodeSolution(),b=[],d=[],c=0;c<h.targets.length;++c){var g=h.targets[c],k=a[g.id]||[];if(0<k.length){b.push(g);for(g=0;g<k.length;++g){var n=f[k[g]];-1==d.indexOf(n)&&d.push(n)}}}return 0==b.length?(console.log("DragAndDropItem: no possible points detected!"),
0):Math.min(b.length,d.length)};h.evaluate=function(){var a=h.decodeSolution();console.log("solution "+JSON.stringify(a));for(var b,d=0,c=0;c<h.targets.length;++c){b=h.targets[c];var g=a[b.id]||[];if(b.attachedSource)if(-1!==g.indexOf(b.attachedSource.id))++d;else return 0}a=h.possiblePoints();return!a?(console.log("No Possible answers in Drag And Drop question"),!1):d/a};return h}})(com.imc.content.item);
(function(f){var m,e=com.imc.content.item.Item;m=1;f.VideoItem=function(c,a,b){function d(a,b){h.muted=b}function n(){!r||!x?h.pause():!g&&j==m?(h.play(),l.hidePoster()):(h.play(),h.pause())}var l=document.createElement("div"),h=document.createElement("video"),f=c.src,j=c.playbackMode||0,x=!1,g=!1,k=!1,r=!1,w=0,z=null,B=null,A="scale(",A=c.horizontalMirror?A+-1:A+1,A=A+",",A=c.verticalMirror?A+-1:A+1,A=A+")";$(window).on("imc:mutedChanged",d);$_P.deviceFamily!==com.imc.core.DeviceFamily.DESKTOP&&
(j=0);$(l).append(h);z=f.substr(f.lastIndexOf(".")+1);z=h.canPlayType("video/"+z);if("probably"!==z&&"maybe"!==z)return null;$(l).on("tap",function(){0==j&&$(l).trigger("imc:navigationRequest","videoscreen:"+f)});c.poster&&(B=document.createElement("div"),$(l).append(B),$(B).css({position:"absolute",top:"0px","background-image":"url('"+c.poster+"')","background-size":"contain","background-repeat":"no-repeat","background-position":"center","z-index":"1",width:c.style.width+"px",height:c.style.height+
"px","-webkit-transform":A,"-ms-transform":A,transform:A}));0==j&&(z=document.createElement("div"),$(z).addClass("imc-video-playbutton"),$(l).append(z));l.baseTime=c.base_time;h.volume=void 0===c.volume?1:c.volume;h.autobuffer=!0;h.preload="metadata";h.width=c.style.width;h.height=c.style.height;$(h).css({"-webkit-transform":A,"-ms-transform":A,transform:A});e.call(l,c,a);if(c.triggers)for(a=0;a<c.triggers.length;++a)l.installTrigger(c.triggers[a],l);h.muted=$_P.audioPlayer.muted;l.onshow=function(){try{k=
x=!0,n()}catch(a){}};l.onhide=function(){try{x=!1,h.pause()}catch(a){}};l.onpresent=function(){r=!0;n()};l.purge=function(){$(window).off("imc:mutedChanged",d);$(l).off();l.parentElement&&l.parentElement.removeChild(l);h.src&&(h.pause(),h.src=void 0)};l.onpausechange=function(a){try{g=a,!g&&x&&j==m?(h.play(),l.hidePoster()):h.pause()}catch(b){}};l.ontimechange=function(a){try{if(w=a,g&&j==m||k){k=!1;var b=(a-l.baseTime)/1E3;b<h.duration&&0.5<Math.abs(h.currentTime-b)&&(h.currentTime=b)}}catch(d){}};
h.addEventListener("loadedmetadata",function(){h.currentTime=(w-l.baseTime)/1E3},!1);l.hidePoster=function(){B&&j==m&&$(B).css({display:"none"})};!b||0==j?h.src=c.src:b.loadFile({id:l.id,src:c.src,type:"video",tag:h},!1);return l}})(com.imc.content.item);
(function(f){var m=com.imc.content.item.Item;f.ImageItem=function(e,c,a){var b=document.createElement("div"),d=null;m.call(b,e,c);b.link&&m.createLink(b);if(e.triggers)for(c=0;c<e.triggers.length;++c)b.installTrigger(e.triggers[c],b);b.setImage=function(a){d=a;$(b).append(d);a="scale(";a=e.horizontalMirror?a+-1:a+1;a+=",";a=e.verticalMirror?a+-1:a+1;a+=")";$(d).css({position:"absolute",top:"0",left:"0",width:e.style.width,height:e.style.height,"-webkit-transform":a,"-ms-transform":a,transform:a})};
a?a.loadFile({id:b.id,src:e.src},!1):(a=document.createElement("img"),a.src=e.src,b.setImage(a));return b}})(com.imc.content.item);
(function(f){function m(c){$(c).addClass("imc-textgapbox");$(c).attr("autocapitalize","off").attr("autocomplete",!1).attr("autocorrect","off");$(c).on("tap",function(a){a.stopPropagation()});return c}var e=com.imc.content.item.InteractionItem;f.TextGapItem=function(c,a){var b=document.createElement("div"),d=[],n=c.case_sensitive||!1;e.call(b,c,a);$(b).addClass("imc-textgap");var l=c.html.replace(/<gap\s*=\s*(\d+)>/g,function(a,b){return"<input type='text' id='"+c.gaps[b].id+"' style='width: "+c.gaps[b].width+
"px'>"});b.innerHTML=l;for(var l=b.querySelectorAll("input[type='text']"),h=0;h<l.length;++h)d.push(m(l[h]));b.getUserResponse=function(){for(var a={},b=!1,c=0;c<d.length;++c)d[c].value.length&&(a[d[c].id]=d[c].value,b=!0);return b?a:null};b.setUserResponse=function(a){for(var b in a){var d=document.getElementById(b);d&&(d.value=a[b])}};b.markSolution=function(){try{for(var a=b.decodeSolution(),c,e,g,k=0;k<d.length;++k){var h=!1;c=d[k].value;n||(c=c.toLowerCase());e=a[d[k].id];for(var l=0;l<e.length;++l)if(g=
n?e[l]:e[l].toLowerCase(),g===c){h=!0;break}$(d[k]).addClass(h?"correct":"incorrect")}}catch(f){console.error(f.message)}};b.showSolution=function(){for(var a=b.decodeSolution(),c,e=0;e<d.length;++e)c=a[d[e].id],c.length&&(d[e].value=c[0])};b.disable=function(){for(var a=0;a<d.length;++a)d[a].setAttribute("disabled","true")};b.evaluate=function(){try{for(var a=b.decodeSolution(),c=0,e,g,k,h=0;h<d.length;++h){e=d[h].value;n||(e=e.toLowerCase());g=a[d[h].id];for(var l=0;l<g.length;++l)if(k=n?g[l]:g[l].toLowerCase(),
k===e){++c;break}}return c===d.length}catch(f){return console.error(f.message),!1}};return b}})(com.imc.content.item);
(function(f){function m(a,b,d,e,l){var h=document.createElement("div");h.id=d;var f=null,j=-1,m=[];$(h).addClass("imc-gridchoice-entry");for(var g=0;g<a;++g){var k=document.createElement("div");$(k).addClass("imc-gridchoice-checkbox-area");var r=c(d+"-"+g);r.index=g;m.push(r);k.appendChild(r);h.appendChild(k);g<a-1&&$(k).css("width",b+"px")}$(h).on("imc:checkboxTapped",function(a){var b=a.target;b!=f&&(f&&(f.checked=!1),f=b,f.checked=!0,j=f.index,a.stopPropagation())});a=document.createElement("div");
$(a).addClass("imc-gridchoice-text-area");b=document.createElement("div");$(b).addClass("imc-choice-text");l.fontSize&&$(b).css("font-size",l.fontSize);e.length||(e="&nbsp;");$(b).html(e);l.vertical_offset&&$(b).css("margin-bottom",l.vertical_offset+"px");l.horizontal_offset&&$(b).css("margin-left",l.horizontal_offset+"px");a.appendChild(b);h.appendChild(a);Object.defineProperty(h,"currentIndex",{get:function(){return j},set:function(a){if(a!==j){f&&(f.checked=!1);try{f=m[a],f.checked=!0,j=a}catch(b){f=
null,j=-1}}}});h.markSolution=function(a){if(h.currentIndex===a)$(m[h.currentIndex]).addClass("correct");else try{$(m[a]).addClass("incorrect"),$(m[h.currentIndex]).addClass("incorrect")}catch(b){}};h.disable=function(){for(var a=0;a<m.length;++a)m[a].enabled=!1};return h}var e=com.imc.content.item.InteractionItem,c=com.imc.content.item.CheckBox;f.GridChoiceItem=function(a,b){var d=document.createElement("div"),c=[];e.call(d,a,b);$(d).addClass("imc-gridchoice");for(var l=[],h=0;h<a.items.length;++h)l.push(a.items[h]);
for(var f=!0;0<l.length;){if(a.random_order){var j=Math.round(Math.random()*(l.length-1)),h=l[j];l.splice(j,1)}else h=l.shift();h=m(a.grid_size,a.grid_cell_width,h.id,h.html,a,f);c.push(h);d.appendChild(h);f=!1}d.disable=function(){for(var a=0;a<c.length;++a)c[a].disable()};d.markSolution=function(){for(var a=d.decodeSolution(),b=0;b<c.length;++b)try{c[b].markSolution(a[c[b].id])}catch(k){}};d.getUserResponse=function(){for(var a={},b=!1,d=0;d<c.length;++d){var e=c[d].currentIndex;0<=e&&(a[c[d].id]=
e,b=!0)}return b?a:null};d.setUserResponse=function(a){for(var b=0;b<c.length;++b)try{c[b].currentIndex=a[c[b].id]}catch(d){c[b].currentIndex=-1}};d.evaluate=function(){for(var a=d.decodeSolution(),b=0,e=0;e<c.length;++e)try{a[c[e].id]===c[e].currentIndex&&++b}catch(h){}return b/c.length};return d}})(com.imc.content.item);
(function(f){var m=com.imc.content.item.Item;f.ShapeItem=function(e,c){var a=document.createElement("div");m.call(a,e,c);a.innerHTML=e.svg;if(a.link){var b=a.querySelector("g");m.createLink(a)}if(e.triggers)for(var b=a.querySelector("g"),d=0;d<e.triggers.length;++d)a.installTrigger(e.triggers[d],b);return a}})(com.imc.content.item);
(function(f){var m=com.imc.content.item.Item;f.TextItem=function(e,c){var a=document.createElement("div");m.call(a,e,c);$(a).addClass("imc-text");a.innerHTML=e.svg?e.svg:e.html;/MSIE\s/.test(navigator.userAgent)&&10>parseFloat(navigator.appVersion.split("MSIE")[1])&&e.backgroundPng&&$(a).css("background-image",e.backgroundPng);a.link&&m.createLink(a);if(e.triggers)for(var b=0;b<e.triggers.length;++b)a.installTrigger(e.triggers[b],a);a.onshow=function(){};return a}})(com.imc.content.item);
(function(f){var m=com.imc.controls.View,e=com.imc.touch.Scrollable;f.ListView=function(c){var a=document.createElement("ul");m.call(a,c);e.call(a,"vertical",c);$(a).addClass("imc-listview");$(a).on("imc:dataSourceChange",function(){a.innerHTML="";for(var b=null,d=0,c=a.dataSource.length;d<c;++d){var e=document.createElement("li"),b=a.createItem(a.dataSource.identifierForRowIndex(d));$(e).addClass("imc-listview-element");e.appendChild(b);a.appendChild(e)}});return a}})(com.imc.controls);
(function(f){var m=com.imc.controls.Control;f.SpriteAnimation=function(e){function c(){try{var a=b.getContext("2d");a.clearRect(0,0,b.width,b.height);a.drawImage(k,2*x*l,0,2*l,2*h,0,0,b.width,b.height)}catch(d){}}function a(){if(g){var b=window.performance.now();b-j-10>1E3/n&&(j=b,x+=1,x>=k.width/(2*l)&&(x=0),c());window.requestAnimationFrame(a)}}var b=document.createElement("canvas"),d=e.src||"",n=e.framerate||30,l=e.width||100,h=e.height||100,f=e.running||!1,j=window.performance.now(),x=0,g=!1,
k=document.createElement("img");k.src=d;$(b).append(k);d=window.devicePixelRatio||1;$(b).addClass("imc-sprite-animation");b.width=l*d;b.height=h*d;$(b).css({width:l+"px",height:h+"px"});m.call(b,e);b.start=function(){x=0;j=window.performance.now();g=!0;c();a()};b.stop=function(){g=!1};f&&b.start();return b}})(com.imc.controls);
(function(f){var m=com.imc.controls.Control;f.BreadCrumb=function(e){function c(){try{if($_P.navigator.currentContent)if($_P.isOldPlayer)a.innerHTML=$_P.navigator.currentContent.title;else{for(var d=b.childNodes.length-1;0<=d;--d)b.removeChild(b.childNodes[d]);var d=[],c=$_P.navigator.currentContent;for(d.push(c.title);c.parent;)c=c.parent,d.push(c.title);for(var e=null;0<d.length;)c=d.pop(),e=document.createElement("span"),e.innerHTML=c,$(e).addClass("imc-breadcrumb-entry"),b.appendChild(e)}}catch(h){console.error(h.message)}}
var a=null,b=document.createElement("div");$_P.isOldPlayer?(e=document.createElement("span"),$(e).addClass("imc-breadcrumb-root"),e.innerHTML=document.title,b.appendChild(e),e=document.createElement("span"),$(e).addClass("imc-breadcrumb-separator"),b.appendChild(e),a=document.createElement("span"),$(a).addClass("imc-breadcrumb-entry"),b.appendChild(a)):m.call(b,e);$(b).addClass("imc-breadcrumb");$($_P).on("imc:currentContentChange",c);c();return b}})(com.imc.controls);
(function(f){var m=com.imc.controls.Control,e=com.imc.touch.Scrollable;f.ScrollArea=function(c){var a=document.createElement("div");m.call(a,c);e.call(a,c?c.direction:"both");$(a).addClass("imc-scrollarea");return a}})(com.imc.controls);
(function(f){var m=com.imc.controls.Control;f.CurrentObjectLabel=function(e){var c=document.createElement("div");m.call(c,e);$(c).addClass("imc-currentobject");$($_P).on("imc:currentContentChange",function(){try{$_P.navigator.currentContent&&(c.innerHTML=$_P.navigator.currentContent.title)}catch(a){console.error(a.message)}});return c}})(com.imc.controls);
(function(f){var m=com.imc.controls.View,e=com.imc.touch.Scrollable;f.TileView=function(c){var a=document.createElement("div");$(a).on("imc:dataSourceChange",function(){for(var b=null,c=0,e=a.dataSource.length;c<e;++c){var l=document.createElement("div");$(l).addClass("imc-tileview-element");b=a.createItem(a.dataSource.identifierForRowIndex(c));l.appendChild(b);a.appendChild(l)}});m.call(a,c);e.call(a,"vertical",c);$(a).addClass("imc-tileview");return a}})(com.imc.controls);
(function(f){var m=com.imc.controls.Control;f.ProgressLabel=function(e){function c(){a.innerHTML=$_P.stringTable.getString(d,parseInt(100*b))}var a=document.createElement("span"),b=e.value||0,d=e.langstring||"progress-label";$(a).addClass("imc-progress-label");Object.defineProperty(a,"value",{get:function(){return b},set:function(a){0>a||1<a||(b=a,c())}});m.call(a,e);c();return a}})(com.imc.controls);
(function(f){var m=com.imc.controls.Control;f.Toggle=function(e){function c(b,c){a.on=!!c}var a=document.createElement("div"),b=!0,d=!1,n=null,l=null;m.call(a,e);$(a).addClass("imc-toggle");Object.defineProperty(a,"enabled",{enumerable:!0,get:function(){return b},set:function(c){var d=!0===c;d!==c&&(b=d,$(a).toggleClass("disabled"))}});Object.defineProperty(a,"on",{get:function(){return d},set:function(b){b!==!!d&&(d=b,n&&l&&((n[l]=d)?$(a).addClass("on"):$(a).removeClass("on")))}});for(var h=["icon-on",
"icon-off"],f,j=0;j<h.length;++j)$_P.isOldPlayer?e[h[j]]&&(f=document.createElement("img"),f.src=e[h[j]],f.className=h[j],a.appendChild(f)):(f=document.createElement("div"),f.className=h[j],a.appendChild(f));a.bind=function(b,d){a.unbind();b&&(b.addWatcher&&d)&&(n=b,l=d,n.addWatcher(d,c),a.on=!!b[d])};a.unbind=function(){if(n&&l)try{n.removeWatcher(l,c)}catch(a){}};$(a).on("tap",function(c){b&&(a.on=!a.on);c.stopPropagation();c.preventDefault()});if(e.bind){h=e.bind.split(".");e=window;for(j=0;j<
h.length-1;++j)e=e[h[j]];j=h[h.length-1];e.addWatcher?a.bind(e,j):console.warn("Property "+j+" is not watchable.")}return a}})(com.imc.controls);
(function(f){var m=com.imc.controls.Control;f.Progress=function(e){function c(){var b=a.getContext("2d");b.clearRect(0,0,a.width,a.height);b.strokeStyle=d;b.lineWidth=n;h&&(b.fillStyle=h);var c=[a.width/2,a.height/2],g=a.width/2-b.lineWidth;0!==a.width%2&&(c=[c[0]+0.5,c[1]+0.5]);b.beginPath();b.arc(c[0],c[1],g,0,2*Math.PI);0<n&&b.stroke();h&&b.fill();b.fillStyle=l;b.beginPath();b.arc(c[0],c[1],g,-Math.PI/2,2*Math.PI*f-Math.PI/2);b.lineTo(c[0],c[1]);b.fill()}var a=document.createElement("canvas");
e||(e={});var b=window.devicePixelRatio||1,d=e.strokecolor||"black",n=1,l=e.fillcolor||"black",h=e.basecolor||null;"undefined"!==typeof e.strokewidth&&(n=e.strokewidth);$(a).addClass("imc-progress");var f=0;Object.defineProperty(a,"value",{enumerable:!0,get:function(){return f},set:function(a){1E-4<Math.abs(f-a)&&(f=Math.max(0,Math.min(1,a)),c())}});m.call(a,e);e.value&&(a.value=parseFloat(e.value));e=e.size||32;a.width=e*b;a.height=e*b;$(a).css({width:e+"px",height:e+"px"});n*=b;window.setTimeout(c,
0);return a}})(com.imc.controls);(function(f){var m=com.imc.controls.Control;f.Panel=function(e){var c=document.createElement("div");m.call(c,e);$(c).on("tap",function(a){a.stopPropagation()});return c}})(com.imc.controls);
(function(f){var m=com.imc.controls.View,e=com.imc.touch.Scrollable;f.TreeView=function(c){function a(c,e,l){for(var h=0;h<e.length;++h){var f=document.createElement("li"),j=b.createItem(e[h]);j.level_=l;j.transfer=function(a){a.level_=this.level_;$(a).addClass("imc-treelevel-"+(this.level_+1))};$(f).addClass("imc-treeview-element");$(j).addClass("imc-treelevel-"+(l+1));f.appendChild(j);c.appendChild(f);if((j=b.dataSource.childIdentifiers(e[h]))&&j.length){var m=document.createElement("ul");f.appendChild(m);
a(m,j,l+1)}}}var b=document.createElement("ul");$(b).on("imc:dataSourceChange",function(){var c=b.dataSource.childIdentifiers(b.dataSource.rootIdentifier);a(b,c,0)});m.call(b,c);e.call(b,"vertical",c);$(b).addClass("imc-treeview");$(b).on("imc:aggregateTapped",function(a){try{$(a.target.parentElement).toggleClass("collapsed")}catch(b){console.error(b.message)}a.stopPropagation()});return b}})(com.imc.controls);
(function(f){var m=com.imc.controls.Control;f.Tab=function(e){function c(a,b){if($_P.isOldPlayer){var c=document.createElement("img");c.src=a;$(c).addClass(b);return c}c=document.createElement("div");$(c).addClass(b);return c}var a=document.createElement("li"),b=!1;if($_P.isOldPlayer){var d=e["icon-on"]||null,n=e["icon-off"]||null;d&&a.appendChild(c(d,"icon-on"));n&&a.appendChild(c(n,"icon-off"))}else a.appendChild(c(null,"icon-on")),a.appendChild(c(null,"icon-off"));if(!e.value)throw Error("Tab value must be present!");
Object.defineProperty(a,"tabName",{value:e.value});Object.defineProperty(a,"selected",{get:function(){return b},set:function(c){b=c;$(a).toggleClass("selected")}});m.call(a,e);$(a).addClass("imc-tabbar-tab");return a}})(com.imc.controls);
(function(f){var m=com.imc.controls.Control;f.Button=function(e){var c=document.createElement("div"),a=!0,b=e.role||null;$(c).addClass("imc-button");Object.defineProperty(c,"enabled",{enumerable:!0,get:function(){return a},set:function(b){b=!0===b;b!==a&&(a=b,$(c).toggleClass("disabled"),$(c).removeClass("pressed"))}});Object.defineProperty(c,"disabled",{enumerable:!0,get:function(){return!a}});m.call(c,e);var d;$_P.isOldPlayer?e.icon&&(d=document.createElement("img"),d.src=e.icon,d.className="icon",
c.appendChild(d)):(d=document.createElement("div"),d.className="icon",c.appendChild(d));e.label&&(c.innerHTML=e.label);$(c).on("tap",function(d){d.stopPropagation();d.preventDefault();if(a&&b)switch(d=b.split("."),d.shift()){case "navigation":$(c).trigger("imc:navigationRequest",d);break;case "action":$(c).trigger("imc:action",d)}});return c}})(com.imc.controls);
(function(f){var m=com.imc.controls.Control;f.TabBar=function(e){var c=document.createElement("ul"),a=e.target||c,b=null;m.call(c,e);var d=e.index||0;$(c).addClass("imc-tabbar");$(c).on("tap",function(c){var d=$(c.target).closest(".imc-tabbar-tab")[0];d.tabName?($(a).removeClass(b.tabName),b.selected=!1,b=d,$(a).addClass(b.tabName),b.selected=!0):console.warn("Tapped element has no '.imc-tabbar-tab' parent");c.stopPropagation()});window.setTimeout(function(){try{b=c.querySelectorAll(".imc-tabbar-tab")[d],
$(a).addClass(b.tabName),b.selected=!0}catch(e){console.error(e.message)}},0);return c}})(com.imc.controls);
(function(f){var m=com.imc.controls.Control;f.TimeSlider=function(e){function c(b){l!==b&&(l=b,a())}function a(){var a=l/h;$(k).css("width",parseInt($(d).width()*a)+"px")}function b(a){n&&f&&(a=Math.min(Math.max(0,a-j),x)/x,n.currentTime=n.duration*a)}var d=document.createElement("div"),n=null,l=0,h=0,f=!1,j=0,x=0,g=!0;m.call(d,e);$(d).addClass("imc-timeslider");e=document.createElement("div");$(e).addClass("imc-timeslider-panel");d.appendChild(e);var k=document.createElement("div");$(k).addClass("imc-timeslider-bar");
e.appendChild(k);e=document.createElement("div");$(e).addClass("imc-timeslider-handle");k.appendChild(e);$(window).resize(a);Object.defineProperty(d,"timeline",{get:function(){return n},set:function(b){n&&(n.timeChangeListener=null,$(k).css("width","0px"));if(n=b)h=n.duration,l=n.currentTime,n.timeChangeListener=c,a()}});Object.defineProperty(d,"visible",{get:function(){return g},set:function(a){g!==a&&(g=a,$(d).css("display",g?"block":"none"))}});$(d).on("vmousedown",function(a){HTMLElement.prototype.setCapture&&
!$_P.isOldPreview&&d.setCapture();var c=a.pageX;n&&(f=n.seeking=!0,j=$(d).offset().left,x=$(d).width(),b(c));a.preventDefault()});$(d).on("vmousemove",function(a){b(a.pageX)});$(d).on("vmouseup",function(){HTMLElement.prototype.releaseCapture&&!$_P.isOldPreview&&document.releaseCapture();f&&n&&(f=!1,n.seeking=!1)});return d}})(com.imc.controls);
(function(f){f.Error=function(m,e){this.prototype=Error(f.Error.resolveMessage(m));Object.defineProperty(this,"errorCode",{value:m});Object.defineProperty(this,"diagnostic",{value:e||""});this.message=f.Error.resolveMessage(m)};f.Error.Code=Object.freeze({NO_ERROR:0,GENERAL_EXCEPTION:101,GENERAL_INIT_FAILURE:102,ALREADY_INIT:103,CONTENT_INSTANCE_TERM:104,GENERAL_TERM_FAILURE:111,TERM_BEFORE_INIT:112,TERM_AFTER_TERM:113,RETRIEVE_BEFORE_INIT:122,RETRIEVE_AFTER_TERM:123,STORE_BEFORE_INIT:132,STORE_AFTER_TERM:133,
COMMIT_BEFORE_INIT:142,COMMIT_AFTER_TERM:143,GENERAL_ARGUMENT_ERROR:201,GENERAL_GET_FAILURE:301,GENERAL_SET_FAILURE:351,GENERAL_COMMIT_FAILURE:391,UNDEFINED_ELEMENT:401,UNIMPLEMENTED_ELEMENT:402,UNINITIALIZED_ELEMENT_VALUE:403,ELEMENT_IS_READONLY:404,ELEMENT_IS_WRITEONLY:405,ELEMENT_TYPE_MISMATCH:406,ELEMENT_VALUE_OUT_OF_RANGE:407,DEPENDENCY_NOT_ESTABLISHED:408});f.Error.Message=Object.freeze({"0":"",101:"General Exception",102:"General Initialization Failure",103:"Already Initialized",111:"General Termination Failure",
112:"Termination Before Initialization",113:"Termination After Termination",122:"Retrieve Data Before Initialization",123:"Retrieve Data After Termination",132:"Store Data Before Initialization",133:"Store Data After Termination",142:"Commit Before Initialization",143:"Commit After Termination",201:"General Argument Error",301:"General Get Failure",351:"General Set Failure",391:"General Commit Failure",401:"Undefined Data Model Element",402:"Unimplemented Data Model Element",403:"Data Model Value Not Initialized",
404:"Data Model Element Is Readonly",405:"Data Model Element Is Writeonly",406:"Data Model Element Type Mismatch",407:"Data Model Element Value Out Of Range",408:"Data Model Dependency Not Established"});f.Error.resolveMessage=function(m){return f.Error.Message[m.toString()]||""}})(com.imc.scorm.scorm2004);
(function(f){var m=com.imc.core.navigation.Requirement;f.ObjectStatusRequirement=function(e,c){function a(a){n[a.id]=a.status;b()}function b(){var a,b=0,c=0,e=0,f;for(f in n)++e,a=n[f],"completed"===a?(++b,++c):("failed"===a||"incomplete"===a)&&++c;d.satisfied=b/e>=l&&c/e>=h}var d=this,n={},l=e.completed_threshold||0,h=e.attempted_threshold||0;m.call(d,e);for(var f=null,j=0;j<e.items.length;++j)f=c.getEntry(e.items[j]),f.optional?console.warn("Optional item in requirement - ignoring "+f.id):(n[f.id]=
f.status,f&&f.addChangeListener(a));b()}})(com.imc.core.navigation);(function(f){var m=com.imc.core.navigation.Requirement;f.GlobalSuccessRequirement=function(e){function c(b,c){a.satisfied="passed"===c}var a=this;m.call(this,e);$_P.addWatcher("success",c);c("success",$_P.success)}})(com.imc.core.navigation);
(function(f){var m=com.imc.core.navigation.Requirement;f.ExamSuccessRequirement=function(e,c){function a(){b()}function b(){var a=!1;try{for(var a=!0,b=0;b<f.length;++b){if(!f[b].environment.timestamp)return;f[b].environment.cmi.success_status!==n&&(a=!1)}d.satisfied=a}catch(c){console.error(c.message)}}var d=this,n=e.success_status||"passed",f=[];m.call(d,e);var h=null;if(e.items)for(var t=0;t<e.items.length;++t)if(h=c.getEntry(e.items[t]))h.optional?console.warn("Optional item in requirement - ignoring "+
h.id):"exam"!==h.type?console.warn("Non-exam item in exam requirement"):(f.push(h),h&&h.addChangeListener(a));this.isFailed=function(){console.log("Evaluating isFailed ...");for(var a=d.satisfied,b=0;b<f.length;++b)if(!f[b].environment.timestamp)return!1;return!a};b()}})(com.imc.core.navigation);
(function(f){var m=com.imc.core.navigation.Requirement;f.GlobalProgressRequirement=function(e){function c(c,e){var h=!1;switch(b){case "geq":h=e>=d;break;case "gt":h=e>d;break;case "leq":h=e<=d;break;case "lt":h=e<d}a.satisfied=h}var a=this,b=e.operation||"geq",d=e.progress_measure_threshold||1;m.call(this,e);$_P.addWatcher("progress",c);c("progress",$_P.progress)}})(com.imc.core.navigation);
(function(f){var m=com.imc.core.navigation.Requirement;f.ExamScoreRequirement=function(e,c){function a(){b()}function b(){var a=!1;try{for(var b=0,c=[],e=0;e<t.length;++e){if(!t[e].environment.timestamp)return;var j=t[e].environment.cmi,b=b+(j.score.scaled||0);c.push(j.score.scaled||0)}if(n){var m=b/t.length;switch(h){case "geq":a=m>=f;break;case "leq":a=m<=f}}else{a=!0;for(e=0;e<c.length;++e)switch(h){case "geq":c[e]<f&&(a=!1);break;case "leq":m>f&&(a=!1)}}d.satisfied=a}catch(A){console.error(A.message)}}
var d=this,n=e.use_average||!1,f=e.score_threshold||0,h=e.operation||"geq",t=[];m.call(d,e);for(var j=null,x=0;x<e.items.length;++x)if(j=c.getEntry(e.items[x]))j.optional?console.warn("Optional item in requirement - ignoring "+j.id):"exam"!==j.type?console.warn("Non-exam item in exam requirement"):(t.push(j),j&&j.addChangeListener(a));this.isFailed=function(){for(var a=d.satisfied,b=0;b<t.length;++b)if(!t[b].environment.timestamp)return!1;return!a};b()}})(com.imc.core.navigation);
(function(f){var m=com.imc.content.Content;f.ScalableContent=function(e,c,a){var b=1,d=m.call(this,e,c,function(){this.baseSize||(Object.defineProperty(this,"baseSize",{value:[$(this).width(),$(this).height()]}),$(this).css("transform-origin","top left"));a.call(this)});Object.defineProperty(d,"scale",{get:function(){return b}});d.fitViewport=function(a){var c=d.baseSize;if($_P.options.contentScalingEnabled){var e=a[0]/c[0];c[1]*e>a[1]&&(e=a[1]/c[1]);$(d).css("transform","scale("+e+")");b=e;c=[c[0]*
e,c[1]*e];a=[parseInt((a[0]-c[0])/2),parseInt((a[1]-c[1])/2)];$(d).css({left:"0px",top:"0px"});a[0]>a[1]?$(d).css("left",a[0]+"px"):$(d).css("top",a[1]+"px");if(d.scaleToWidth)for(e=0;e<d.scaleToWidth.length;++e)$(d.scaleToWidth[e]).css({left:a[0]+"px",width:Math.round(c[0])+"px"})}else e=parseInt((a[0]-c[0])/2)+"px",a=parseInt((a[1]-c[1])/2)+"px",$(d).css({left:e,top:a})};return d}})(com.imc.content);
(function(f){function m(a){function d(a){for(var b=null,c=0,d=h.length;c<d&&!(h[c].time>a);++c)e=c,b=h[c];return b}var e=0,f=!1,h=[];Object.defineProperty(this,"paused",{get:function(){return f},set:function(c){f=c;if(a.onpausechange)a.onpausechange(f)}});this.addKeyFrame=function(a){h.push(a)};this.prepare=function(){h.sort(function(a,b){return a.time-b.time});for(var a=[],b=0,c=h.length-1;b<c;++b)h[b].propagateStyle(h[b+1]),h[b].time!==h[b+1].time&&a.push(h[b]);a.push(h[h.length-1]);h=a};var m=
c.createDefault(a);this.addKeyFrame(m);this.updateTime=function(c){var f=h[e],g=null;if(f.time>c)f=d(c),g=e<h.length-1?h[e+1]:null;else if((g=e<h.length-1?h[e+1]:null)&&g.time<c)f=d(c),g=e<h.length-1?h[e+1]:null;f.interpolate(c,g);if(a.ontimechange)a.ontimechange(c)}}function e(a,c){var e=0,f=0,h=-1,m=c.content||null,j=[],x=[];this.prepare=function(){a.sort(function(a,b){return a[0]-b[0]});for(var c=0;c<a.length;++c)switch(a[c][1]){case "text":var d=a[c][0],e=a[c][2].replace(/\n/g,"<br>");j.push([d,
e]);break;case "pause":x.push(a[c][0])}if(!j.length||0<j[0][0])j=[[0,""]].concat(j);j.push([Number.MAX_VALUE,""])};this.updateTime=function(a){if(m.viewport){e=f;f=a;for(var b=-1,r=0;r<j.length;++r)if(j[r][0]>=f){b=r-1;break}0<=b&&b!==h&&(h=b,$(m).trigger("imc:subtitle",j[b][1]));if(m.viewport.subtitlesEnabled&&!(e>=f||150<f-e))for(r=0;r<x.length;++r)x[r]>e&&x[r]<=a&&(c.paused=!0)}}}var c=com.imc.animation.KeyFrame,a=com.imc.util.Watchable;f.Timeline=function(b,c){function n(){var a=parseInt(j.currentTime);
B.push([a,a]);++A}function f(){if(!j.paused&&!j.seeking&&!j.stopped_){var a=window.performance.now(),b=j.currentTime,c=b,b=b+(a-r);r=a;b=Math.min(b,j.duration);b=$_P.audioPlayer.synchronizeTime(b,j.currentTime);B[A][1]=parseInt(b);j.currentTime=b;for(a=0;a<z.length;++a)z[a]>c&&z[a]<=b&&(j.paused=!0);b>=j.duration?j.paused=!0:w=window.requestAnimationFrame(f)}}function h(a){for(var b=0,c=g.length;b<c;++b)g[b].paused=a}function t(a,b){console.log("TIMELINE "+b);j.paused=b}var j=this,x=!1,g={},k=-1,
r=0,w=0,z=[],B=[],A=-1;parseInt(1E8*Math.random());a.call(j);Object.defineProperty(j,"content",{value:b});Object.defineProperty(j,"duration",{value:c});Object.defineProperty(j,"currentTime",{get:function(){return k},set:function(a){if(k!==a){k=a;a=0;for(var b=g.length;a<b;++a)g[a].updateTime(k);j.timeChangeListener&&j.timeChangeListener(k)}}});Object.defineProperty(j,"timeChangeListener",{value:null,writable:!0});j.defineWatchableProperty("paused",!0,function(a){if(!a){if(j.currentTime===j.duration){if($_P.navigator.canNavigateForward){$(window).trigger("imc:navigationRequest",
"forward");return}this.currentTime=0}n();r=window.performance.now();f()}$_P.audioPlayer.paused=a;h(a)});Object.defineProperty(j,"seeking",{get:function(){return x},set:function(a){a!==x&&(x=a,x||(r=window.performance.now(),n(),f(),$_P.audioPlayer.currentTime=j.currentTime),$_P.audioPlayer.paused=a||j.paused,h(a||j.paused))}});Object.defineProperty(j,"atEnd",{get:function(){return j.currentTime===j.duration}});j.addKeyFrame=function(a){if(!g[a.element.id]){var b=a.element;g[b.id]=new m(b)}g[a.element.id].addKeyFrame(a)};
j.prepare=function(){var a=[],b;for(b in g)g[b].prepare(),a.push(g[b]);g=a;z.sort();j.currentTime=0};j.addPauseMarkers=function(a){for(var b=0;b<a.length;++b){var c=a[b];0===c&&(c=1);z.push(c)}};j.addSubtitles=function(a){g.subtitles=new e(a,j)};j.getTimeRanges=function(){return B};$(b).on("imc:pause",t);j.stop=function(){$(b).off("imc:pause",t);j.stopped_=!0;window.cancelAnimationFrame(w)}}})(com.imc.animation);
(function(f){f.ItemFactory={registered:{text:com.imc.content.item.TextItem,image:com.imc.content.item.ImageItem,shape:com.imc.content.item.ShapeItem,video:com.imc.content.item.VideoItem,multiplechoice:com.imc.content.item.MultipleChoiceItem,singlechoice:com.imc.content.item.SingleChoiceItem,gridchoice:com.imc.content.item.GridChoiceItem,textgap:com.imc.content.item.TextGapItem,listgap:com.imc.content.item.ListGapItem,dragdrop:com.imc.content.item.DragAndDropItem,eventaudio:com.imc.content.item.EventAudioItem,
createjs:com.imc.content.item.CreateJSItem},create:function(m,e,c){return!m.type?null:f.ItemFactory.registered[m.type]?f.ItemFactory.registered[m.type](m,e,c):null}}})(com.imc.content.item);
(function(f){function m(c,a){return $_P.stringTable.getString(a)}var e={controls:{progress:com.imc.controls.Progress,progresslabel:com.imc.controls.ProgressLabel,button:com.imc.controls.Button,listview:com.imc.controls.ListView,tileview:com.imc.controls.TileView,treeview:com.imc.controls.TreeView,breadcrumb:com.imc.controls.BreadCrumb,scrollarea:com.imc.controls.ScrollArea,timeslider:com.imc.controls.TimeSlider,panel:com.imc.controls.Panel,toggle:com.imc.controls.Toggle,tabbar:com.imc.controls.TabBar,
tab:com.imc.controls.Tab,spriteanimation:com.imc.controls.SpriteAnimation,currentobjectlabel:com.imc.controls.CurrentObjectLabel},create:function(c,a){return this.controls[c]?this.controls[c](a):null}};f.ControlLoader=function(c){var a=c||{},b=document.createElement("div"),d=this;this.load=function(c,e){var h=c;a.deviceFamilySpecific&&(c+="-"+$_P.deviceFamilyName);$.get("resources/style/controls/"+c+".ctl.html",null,function(a,c,d){a=d.responseText.replace(/\$\{([a-z0-9\-]+)\}/ig,m);$(b).html(a);
f.ControlLoader.createControls(b.firstChild);a=b.removeChild(b.firstChild);e(a)}).fail(function(){a.deviceFamilySpecific&&(a.deviceFamilySpecific=!1,d.load(h,e))})}};f.ControlLoader.createControls=function(c){var a=c.nodeName.toLowerCase();if((a=/imc:(.*)/.exec(a))&&2==a.length){for(var a=a[1],b={},d=c.attributes,n=0,l=d.length;n<l;++n){var h=d[n].value.replace(/\$\{([a-z0-9\-]+)\}/ig,m);b[d[n].name.toLowerCase()]=h}if(a=e.create(a,b)){b=c.parentNode;try{b.replaceChild(a,c),a.insertAdjacentHTML("beforeend",
c.innerHTML),c=a}catch(t){console.error(t.message)}}}if(c.hasChildNodes()){n=0;for(l=c.childNodes.length;n<l;++n)f.ControlLoader.createControls(c.childNodes.item(n))}}})(com.imc.util);
(function(f){f.GlossaryEntry=function(f){var e=document.createElement("div");$(e).addClass("imc-glossary-entry");e.load=function(){$(e).load(f,null,function(){try{for(var c=e.getElementsByTagName("a"),a=0,b=c.length;a<b;++a)$(c[a]).on("tap",function(a){/^#urn:imc:.*/.test(this.hash)?$(e).trigger("imc:navigationRequest",this.hash.substr(1)):$(e).trigger("imc:navigationRequest",this.href);a.preventDefault();a.stopPropagation()})}catch(d){console.error(d.message)}$(e).trigger("imc:ready")})};return e}})(com.imc.content);
(function(f){var m=com.imc.scorm.scorm2004.Error,e=m.Code;f.Formatters={formatDuration:function(c){var a="PT",b=c/36E5;1<=b&&(b=parseInt(b),c-=36E5*b,a+=b+"H");b=c/6E4;1<=b&&(b=parseInt(b),c-=6E4*b,a+=b+"M");return a+=(c/1E3).toFixed(2)+"S"},formatTimestamp:function(c){function a(a){return 10>a?"0"+a.toString():a.toString()}try{var b=c.getFullYear().toString(),d=a(c.getMonth()+1),f=a(c.getDate()),l=a(c.getHours()),h=a(c.getMinutes()),t=a(c.getSeconds());return b+"-"+d+"-"+f+"T"+l+":"+h+":"+t}catch(j){throw new m(e.GENERAL_EXCEPTION,
j.message);}},formatFloat:function(c){c=c.toFixed(7);return c=c.replace(/\.?0+$/,"")}}})(com.imc.scorm.scorm2004);
(function(f){f.Parsers={};var m=f.Parsers,e=function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'},c={parse:function(a,c){function f(a){v<D||(v>D&&(D=v,I=[]),I.push(a))}function l(){var c,d,e,h,l,r,j;r=l=v;84===a.charCodeAt(v)?(c="T",v++):(c=null,0===p&&f('"T"'));null!==c?(j=v,d=x(),d=null!==d?d:"",null!==d?(e=g(),e=null!==
e?e:"",null!==e?(h=k(),h=null!==h?h:"",null!==h?d=[d,e,h]:(d=null,v=j)):(d=null,v=j)):(d=null,v=j),null!==d?(e=d[0]||d[1]||d[2]?"":null,null!==e?c=[c,d,e]:(c=null,v=r)):(c=null,v=r)):(c=null,v=r);null!==c&&(c=!0);null===c&&(v=l);return c}function h(){var c,d,e,g;g=e=v;c=w();null!==c?(89===a.charCodeAt(v)?(d="Y",v++):(d=null,0===p&&f('"Y"')),null!==d?c=[c,d]:(c=null,v=g)):(c=null,v=g);null!==c&&(C+=31556952E3*c[0],c=!0);null===c&&(v=e);return c}function m(){var c,d,e,g;g=e=v;c=w();null!==c?(77===a.charCodeAt(v)?
(d="M",v++):(d=null,0===p&&f('"M"')),null!==d?c=[c,d]:(c=null,v=g)):(c=null,v=g);null!==c&&(C+=2629743830*c[0],c=!0);null===c&&(v=e);return c}function j(){var c,d,e,g;g=e=v;c=w();null!==c?(68===a.charCodeAt(v)?(d="D",v++):(d=null,0===p&&f('"D"')),null!==d?c=[c,d]:(c=null,v=g)):(c=null,v=g);null!==c&&(C+=864E5*c[0],c=!0);null===c&&(v=e);return c}function x(){var c,d,e,g;g=e=v;c=w();null!==c?(72===a.charCodeAt(v)?(d="H",v++):(d=null,0===p&&f('"H"')),null!==d?c=[c,d]:(c=null,v=g)):(c=null,v=g);null!==
c&&(C+=36E5*c[0],c=!0);null===c&&(v=e);return c}function g(){var c,d,e,g;g=e=v;c=w();null!==c?(77===a.charCodeAt(v)?(d="M",v++):(d=null,0===p&&f('"M"')),null!==d?c=[c,d]:(c=null,v=g)):(c=null,v=g);null!==c&&(C+=6E4*c[0],c=!0);null===c&&(v=e);return c}function k(){var c,d,e,g;g=e=v;c=z();null!==c?(83===a.charCodeAt(v)?(d="S",v++):(d=null,0===p&&f('"S"')),null!==d?c=[c,d]:(c=null,v=g)):(c=null,v=g);null!==c&&(C+=c[0],c=!0);null===c&&(v=e);return c}function r(){var c;/^[0-9]/.test(a.charAt(v))?(c=a.charAt(v),
v++):(c=null,0===p&&f("[0-9]"));return c}function w(){var a,b,c;c=v;b=r();if(null!==b)for(a=[];null!==b;)a.push(b),b=r();else a=null;null!==a&&(a=parseInt(a.join("")));null===a&&(v=c);return a}function z(){var c,d,e,g,k,h,l;h=k=v;c=w();null!==c?(l=v,46===a.charCodeAt(v)?(d=".",v++):(d=null,0===p&&f('"."')),null!==d?(e=r(),null!==e?(g=r(),g=null!==g?g:"",null!==g?d=[d,e,g]:(d=null,v=l)):(d=null,v=l)):(d=null,v=l),d=null!==d?d:"",null!==d?c=[c,d]:(c=null,v=h)):(c=null,v=h);null!==c&&(d=c[1],c=1E3*c[0],
d&&(c+=parseInt(1E3*d.join(""))));null===c&&(v=k);return c}function B(a){a.sort();for(var b=null,c=[],d=0;d<a.length;d++)a[d]!==b&&(c.push(a[d]),b=a[d]);return c}var A={timestamp:function(){var c,d,e,g,k,r,A,w;A=r=v;80===a.charCodeAt(v)?(c="P",v++):(c=null,0===p&&f('"P"'));null!==c?(w=v,d=h(),d=null!==d?d:"",null!==d?(e=m(),e=null!==e?e:"",null!==e?(g=j(),g=null!==g?g:"",null!==g?(k=l(),k=null!==k?k:"",null!==k?d=[d,e,g,k]:(d=null,v=w)):(d=null,v=w)):(d=null,v=w)):(d=null,v=w),null!==d?(e=d[0]||d[1]||
d[2]||d[3]?"":null,null!==e?c=[c,d,e]:(c=null,v=A)):(c=null,v=A)):(c=null,v=A);null!==c&&(c=C);null===c&&(v=r);return c},time_comp:l,years:h,months:m,days:j,hours:x,minutes:g,seconds:k,digit:r,integer:w,fixed:z};if(void 0!==c){if(void 0===A[c])throw Error("Invalid rule name: "+e(c)+".");}else c="timestamp";var v=0,p=0,D=0,I=[],C=0,C=A[c]();if(null===C||v!==a.length){for(var A=Math.max(v,D),L=A<a.length?a.charAt(A):null,J=1,F=1,H=!1,y=0;y<Math.max(v,D);y++){var u=a.charAt(y);"\n"===u?(H||J++,F=1,H=
!1):"\r"===u||"\u2028"===u||"\u2029"===u?(J++,F=1,H=!0):(F++,H=!1)}throw new this.SyntaxError(B(I),L,A,J,F);}return C},toSource:function(){return this._source},SyntaxError:function(a,c,f,l,h){this.name="SyntaxError";this.expected=a;this.found=c;switch(a.length){case 0:a="end of input";break;case 1:a=a[0];break;default:a=a.slice(0,a.length-1).join(", ")+" or "+a[a.length-1]}c=c?e(c):"end of input";this.message="Expected "+a+" but "+c+" found.";this.offset=f;this.line=l;this.column=h}};c.SyntaxError.prototype=
Error.prototype;m.timeinterval=c;f=f.Parsers;var a=function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'},m={parse:function(b,c){function e(a){p<I||(p>I&&(I=p,C=[]),C.push(a))}function f(){var a,b,c,d;d=c=p;a=r();null!==a?(b=1970<=a&&2038>=a?"":null,null!==b?a=[a,b]:(a=null,p=d)):(a=null,p=d);null!==a&&(a=a[0],0==a%4&&(L=
!0),F.setFullYear(a),a=void 0);null===a&&(p=c);return a}function h(){var a,b,c,d;d=c=p;a=w();null!==a?(b=1<=a&&12>=a?"":null,null!==b?a=[a,b]:(a=null,p=d)):(a=null,p=d);null!==a&&(J=a[0]-1,F.setMonth(J),a=void 0);null===a&&(p=c);return a}function m(){var a,b,c,d;d=c=p;a=w();null!==a?(b=[31,L?29:28,31,30,31,30,31,31,30,31,30,31],b=!(1>a||a>b[J])?"":null,null!==b?a=[a,b]:(a=null,p=d)):(a=null,p=d);null!==a&&(F.setDate(a[0]),a=void 0);null===a&&(p=c);return a}function j(){var a,b,c,d;d=c=p;a=w();null!==
a?(b=0<=a&&23>=a?"":null,null!==b?a=[a,b]:(a=null,p=d)):(a=null,p=d);null!==a&&(F.setHours(a[0]),a=void 0);null===a&&(p=c);return a}function x(){var a,b,c,d;d=c=p;a=w();null!==a?(b=0<=a&&59>=a?"":null,null!==b?a=[a,b]:(a=null,p=d)):(a=null,p=d);null!==a&&(F.setMinutes(a[0]),a=void 0);null===a&&(p=c);return a}function g(){var a,b,c,d;d=c=p;a=w();null!==a?(b=0<=a&&59>=a?"":null,null!==b?a=[a,b]:(a=null,p=d)):(a=null,p=d);null!==a&&(F.setSeconds(a[0]),a=void 0);null===a&&(p=c);return a}function k(){var a,
b,c,d;d=c=p;a=B();null!==a?(b=B(),b=null!==b?b:"",null!==b?a=[a,b]:(a=null,p=d)):(a=null,p=d);null!==a&&(""===a[1]&&(a[1]=0),F.setMilliseconds(10*parseInt(a.join(""),10)),a=void 0);null===a&&(p=c);return a}function r(){var a,b,c,d,e,g;g=e=p;a=B();null!==a?(b=B(),null!==b?(c=B(),null!==c?(d=B(),null!==d?a=[a,b,c,d]:(a=null,p=g)):(a=null,p=g)):(a=null,p=g)):(a=null,p=g);null!==a&&(a=parseInt(a.join(""),10));null===a&&(p=e);return a}function w(){var a,b,c,d;d=c=p;a=B();null!==a?(b=B(),null!==b?a=[a,
b]:(a=null,p=d)):(a=null,p=d);null!==a&&(a=parseInt(a.join(""),10));null===a&&(p=c);return a}function z(){var a,c,d,g,k,f;k=p;90===b.charCodeAt(p)?(a="Z",p++):(a=null,0===D&&e('"Z"'));null===a&&(f=p,/^[+\-]/.test(b.charAt(p))?(a=b.charAt(p),p++):(a=null,0===D&&e("[+\\-]")),null!==a?(c=w(),null!==c?(58===b.charCodeAt(p)?(d=":",p++):(d=null,0===D&&e('":"')),null!==d?(g=w(),null!==g?a=[a,c,d,g]:(a=null,p=f)):(a=null,p=f)):(a=null,p=f)):(a=null,p=f));null!==a&&(c=F.getTime(),"Z"===a?c+=6E4*F.getTimezoneOffset():
(d=36E5*a[1]+6E4*a[3],c="-"===a[0]?c-d:c+d),F=new Date(c),a=void 0);null===a&&(p=k);return a}function B(){var a;/^[0-9]/.test(b.charAt(p))?(a=b.charAt(p),p++):(a=null,0===D&&e("[0-9]"));return a}function A(a){a.sort();for(var b=null,c=[],d=0;d<a.length;d++)a[d]!==b&&(c.push(a[d]),b=a[d]);return c}var v={date:function(){var a,c,d,q,r,A,w,v,B,s,u,C,I,y,L,H,J,G,O,S,T,Z;H=L=p;a=f();null!==a?(J=p,45===b.charCodeAt(p)?(c="-",p++):(c=null,0===D&&e('"-"')),null!==c?(d=h(),null!==d?(G=p,45===b.charCodeAt(p)?
(q="-",p++):(q=null,0===D&&e('"-"')),null!==q?(r=m(),null!==r?(O=p,84===b.charCodeAt(p)?(A="T",p++):(A=null,0===D&&e('"T"')),null!==A?(w=j(),null!==w?(S=p,58===b.charCodeAt(p)?(v=":",p++):(v=null,0===D&&e('":"')),null!==v?(B=x(),null!==B?(T=p,58===b.charCodeAt(p)?(s=":",p++):(s=null,0===D&&e('":"')),null!==s?(u=g(),null!==u?(Z=p,46===b.charCodeAt(p)?(C=".",p++):(C=null,0===D&&e('"."')),null!==C?(I=k(),null!==I?(y=z(),y=null!==y?y:"",null!==y?C=[C,I,y]:(C=null,p=Z)):(C=null,p=Z)):(C=null,p=Z),C=null!==
C?C:"",null!==C?s=[s,u,C]:(s=null,p=T)):(s=null,p=T)):(s=null,p=T),s=null!==s?s:"",null!==s?v=[v,B,s]:(v=null,p=S)):(v=null,p=S)):(v=null,p=S),v=null!==v?v:"",null!==v?A=[A,w,v]:(A=null,p=O)):(A=null,p=O)):(A=null,p=O),A=null!==A?A:"",null!==A?q=[q,r,A]:(q=null,p=G)):(q=null,p=G)):(q=null,p=G),q=null!==q?q:"",null!==q?c=[c,d,q]:(c=null,p=J)):(c=null,p=J)):(c=null,p=J),c=null!==c?c:"",null!==c?a=[a,c]:(a=null,p=H)):(a=null,p=H);null!==a&&(a=F);null===a&&(p=L);return a},year:f,month:h,day:m,hour:j,
minute:x,second:g,frac:k,fourdigitvalue:r,twodigitvalue:w,tzd:z,digit:B};if(void 0!==c){if(void 0===v[c])throw Error("Invalid rule name: "+a(c)+".");}else c="date";var p=0,D=0,I=0,C=[],L=!1,J=0,F=new Date(0),v=v[c]();if(null===v||p!==b.length){for(var v=Math.max(p,I),H=v<b.length?b.charAt(v):null,y=1,u=1,G=!1,s=0;s<Math.max(p,I);s++){var q=b.charAt(s);"\n"===q?(G||y++,u=1,G=!1):"\r"===q||"\u2028"===q||"\u2029"===q?(y++,u=1,G=!0):(u++,G=!1)}throw new this.SyntaxError(A(C),H,v,y,u);}return v},toSource:function(){return this._source},
SyntaxError:function(b,c,e,f,h){this.name="SyntaxError";this.expected=b;this.found=c;switch(b.length){case 0:b="end of input";break;case 1:b=b[0];break;default:b=b.slice(0,b.length-1).join(", ")+" or "+b[b.length-1]}c=c?a(c):"end of input";this.message="Expected "+b+" but "+c+" found.";this.offset=e;this.line=f;this.column=h}};m.SyntaxError.prototype=Error.prototype;f.timestamp=m})(com.imc.scorm.scorm2004);
(function(f){f.RequirementFactory={mapping:{objectstatus:com.imc.core.navigation.ObjectStatusRequirement,globalprogress:com.imc.core.navigation.GlobalProgressRequirement,globalsuccess:com.imc.core.navigation.GlobalSuccessRequirement,examscore:com.imc.core.navigation.ExamScoreRequirement,examsuccess:com.imc.core.navigation.ExamSuccessRequirement},create:function(f,e){return this.mapping[f.type]?new this.mapping[f.type](f,e):null}}})(com.imc.core.navigation);
(function(f){var m=com.imc.content.ScalableContent,e=com.imc.content.item.ItemFactory,c=com.imc.animation.Timeline,a=com.imc.animation.KeyFrame;f.AnimationContent=function(b){function d(){var a=l.getTimeRanges();try{var c=w.adapter.GetValue("cmi.suspend_data");if(""!==c)for(var c=JSON.parse(c),b=0;b<c.length;++b)a.push(c[b])}catch(d){}if(a.length){a.sort(function(a,c){return a[0]-c[0]});for(var b=[],c=a[0],e,g,k=0;k<a.length;++k)e=a[k][0],g=a[k][1],e>=c[0]&&e<=c[1]&&g>c[1]?c[1]=g:e>c[1]&&(c[1]>c[0]&&
b.push(c),c=a[k]);b.push(c);a=b}else a=[];for(b=c=0;b<a.length;++b)c+=a[b][1]-a[b][0];b=c/l.duration;c=l.currentTime;c>l.duration-1E3&&(c=0);c=Math.max(0,c-200);w.adapter.SetValue("cmi.location",c.toFixed(0));w.adapter.SetValue("cmi.suspend_data",JSON.stringify(a));w.adapter.SetValue("cmi.progress_measure",b.toFixed(3));w.adapter.Commit("")}function f(a,c){!l.atEnd&&!t&&(c?$(window).trigger("imc:contentPaused"):$(window).trigger("imc:contentResumed"));w.viewport&&!t&&(l.atEnd?(d(),h.autonavigate?
$(w).trigger("imc:navigationRequest","forward"):w.viewport.contentState="finished"):w.viewport.contentState=c?"paused":"default")}var l=null,h={},t=!1,j=!1,x="default",g={},k="imc-control-progress",r="imc-control-pause";$_P.isOldPlayer&&(k="imc-animation-progress",r="imc-animation-pause");var w=m.call(this,"imc-animation",b,function(){l=new c(this,this.definition.duration);for(var b=this.definition,d=null,d=null,k=new createjs.LoadQueue(!1),h=0,r=b.library.length;h<r;++h)switch(d=b.library[h],d.type){default:if(d=
e.create(d,this,k))$(d).css("display","none"),this.appendChild(d),g[d.id]=d}for(var j=d=null,h=0,r=b.keyFrames.length;h<r;++h)j=b.keyFrames[h],(d=g[j.id])&&l.addKeyFrame(new a(d,j.time,j.style));b.pauseMarkers&&l.addPauseMarkers(b.pauseMarkers);b.subtitles&&l.addSubtitles(b.subtitles);l.prepare();l.addWatcher("paused",f);k.on("complete",function(){for(var a in g){var c=k.getResult(a);c&&g[a].setImage&&g[a].setImage(c)}$(this).trigger("imc:ready")},this,!0);k.on("error",function(a){console.log("ERROR IN LOADING ANIMATION "+
a+" "+a.item+" "+a.item.id)},this,!0);k.load()});w.present=function(){try{w.enableControls(["pause","audio","subtitles"]);w.adapter.Initialize("");var a=w.adapter.GetValue("cmi.launch_data");if(""!==a)try{h=JSON.parse(a)}catch(c){}else h={};var b=0;try{if($_P.navigator.navigateFromHidden){var d=w.adapter.GetValue("cmi.location");""!==d&&(b=new Number(d))}}catch(e){}var f=document.getElementById(k);!1===h.progressbar?f.visible=!1:(f.visible=!0,w.enableControls("progress"));f.timeline=l;document.getElementById(r).bind(l,
"paused");w.focus();w.adapter.SetValue("cmi.exit","suspend")}catch(n){console.warn("Failed to aquire animation control"),console.error(n.message)}this.definition.audiotrack?($_P.audioPlayer.setTrack(this.definition.audiotrack),$_P.audioPlayer.onready=function(){(l.paused=t)&&(j=!1);l.currentTime=b}):(l.currentTime=b,l.paused=!1);for(var m in g)try{if(g[m].onpresent)g[m].onpresent()}catch(x){}};w.cleanup=function(){try{$_P.audioPlayer.clear();l.stop();l.removeWatcher("paused",f);l.paused=!0;d();w.adapter.Terminate("");
document.getElementById(k).timeline=null;document.getElementById(r).unbind();$(w).off();for(var a in g){try{g[a].purge()}catch(c){}delete g[a]}g=null}catch(b){console.error(b.message)}};w.suspend=function(){t=!0;j=l.paused;w.viewport&&(x=w.viewport.contentState,w.viewport.contentState="suspended");j||(l.paused=!0)};w.unsuspend=function(){t&&(w.viewport&&(w.viewport.contentState=x),t=!1,j||(l.paused=!1))};w.promptNavigation=function(){d();return!0};return w}})(com.imc.content);
(function(f){var m=com.imc.content.Content;f.ExternalContent=function(e){var c=m.call(this,"imc-external",e,function(){if(this.definition.embed){var a=document.createElement("div");$(a).addClass("imc-external-content");$(c).append(a);Object.defineProperty(this,"contentFrame",{value:document.createElement("iframe")});$(a).append(this.contentFrame);this.contentFrame.src=this.definition.src;this.contentFrame.width="100%";this.contentFrame.height="100%"}else a=document.createElement("div"),$(a).append($_P.stringTable.getString("click-to-open")),
$(a).addClass("imc-external-open"),$(c).append(a);$(this).on("tap",function(a){window.open(this.definition.src);a.stopPropagation()});$(this).trigger("imc:ready")});c.present=function(){c.definition.use_scorm||(c.adapter.Initialize(""),c.adapter.SetValue("cmi.completion_status","completed"),c.adapter.Terminate(""))};return c}})(com.imc.content);
(function(f){function m(a,c){for(var b=0;b<a.length;++b)if(c>=a[b].threshold)return a[b];return a[a.length-1]}function e(a,c){function b(){var a=window.performance.now();n+=a-l;l=a;a=parseInt(n/1E3);a>p&&(p=a,d.timeChangeListener&&d.timeChangeListener(p));f<=n&&e.handIn({suppressMessage:!0})}var d=this,e=a,f=6E4*c,h=0,n=0,l=0,p=0;d.start=function(){n=0;l=window.performance.now();h=window.setInterval(b,50)};d.stop=function(){window.clearInterval(h)};d.suspend=function(){window.clearInterval(h)};d.resume=
function(){l=window.performance.now();h=window.setInterval(b,50)};Object.defineProperty(this,"currentTime",{get:function(){return parseInt(n/1E3)}});Object.defineProperty(d,"timeChangeListener",{value:null,writable:!0});d.discard=function(){d.timeChangeListener=null;window.clearInterval(b)}}function c(a){var c=null;this.load=function(b){(new h).load("exam-start",function(d){c=d;var e=$_P.library.getEntry(a.id);if(e){var f=d.querySelector(".title");f&&(f.innerHTML=e.title);if(f=d.querySelector(".status"))f.innerHTML=
e.statusText;var h=d.querySelector(".attempts"),f=e.environment,n=1;if(h){var l=e.attempt_limit||0,f=e.environment;0<l?(e=0,f.trackedAttempts&&(e=f.trackedAttempts.length||0),n=l-e,h.innerHTML=n+"/"+l):h.innerHTML=$_P.stringTable.getString("no-attempt-limit")}if((e=c.querySelector(".result"))&&(0>=f.cmi.interactions._count||!a.definition.show_result_view))e.enabled=!1;if((e=c.querySelector(".start"))&&0>=n)e.enabled=!1}if(e=d.querySelector(".question-count"))e.innerHTML=a.definition.question_count||
0;if(d=d.querySelector(".time-limit"))d.innerHTML=a.definition.time_limit?$_P.stringTable.getString("time-minutes",a.definition.time_limit):$_P.stringTable.getString("no-time-limit");$(a).append(c);$_P.isOldPlayer||$(a).trigger("imc:ready");b&&b()})};this.hide=function(a){if(Modernizr.cssanimations){var b={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",animation:"animationend"}[Modernizr.prefixed("animation")];b?(c.addEventListener(b,function(){$(this).css("display","none");a()}),
$(c).css({"animation-name":"exam-start-hide","animation-play-state":"running","animation-duration":".5s"})):($(c).css("display","none"),a())}else{b=new j(500,0,"quadout");b.animate(c,{opacity:0});var d=new t;d.addAnimation(b);d.start(function(){$(c).css("display","none");a()})}};this.show=function(){}}function a(a){var c={},b=[];a=a.adapter.environment.cmi;for(var d=a.interactions._count,e=0;e<d;++e)try{var f=a.interactions.get(e),h=f.id,n={result:f.result,index:e+1},l=$_P.library.getEntry(h);n.title=
l.title;c[h]=n;b.push(h)}catch(p){console.error(p.message)}Object.defineProperty(this,"length",{value:b.length});this.identifierForRowIndex=function(a){return 0<=a&&a<b.length?b[a]:null};this.data=function(a,b){var d=c[a];if(d)switch(b){case "displaytext":return d.title;case "poolindex":return d.index;case "result":return d.result;case "resulttext":return $_P.stringTable.getString("result-"+d.result);default:console.error("Exam: unrecognized role "+b)}return""}}function b(c){var b=this,d=null;(new h).load("exam-resultview",
function(a){$(c).append(a);d=a;$(d).css("visibility","hidden");b.hide()});b.show=function(){if(d){var b=c.adapter.environment.cmi,e=b.success_status;"none"===c.evaluationMode&&(e="neutral");$(d).addClass(e);$(d).css("visibility","visible");var g=d.querySelector(".view-list");g&&(g.dataSource=new a(c));g=0;try{g=b.score.scaled}catch(f){console.error(f.message)}var h=d.querySelector(".message");h&&(h.innerHTML=$_P.stringTable.getString("message-"+e));switch(c.evaluationMode){case "threshold":e=c.definition.result_presentation_mode;
if(h=d.querySelector(".grading"))h.innerHTML=$_P.stringTable.getString("label-score");if(h=d.querySelector(".value"))switch(e){case "percent":try{h.innerHTML=parseInt(100*g)+"%"}catch(n){e="hidden"}break;case "points":try{h.innerHTML=$_P.stringTable.getString("result-points",b.store.score.raw,b.store.score.max)}catch(l){e="hidden"}}if("hidden"===e&&(b=d.querySelector(".result")))$(b).css("display","none"),$(d).addClass("hide-result");break;case "grades":if(h=d.querySelector(".grading"))h.innerHTML=
$_P.stringTable.getString("label-grade");b=m(c.definition.grades,g);if(h=d.querySelector(".value"))h.innerHTML=b.grade;break;case "none":if(b=d.querySelector(".result"))$(b).css("display","none"),$(d).addClass("hide-result");break;default:console.error("Exam: unrecognized evaluation mode "+c.evaluationMode)}$(d).removeClass("hidden")}};b.hide=function(){d&&$(d).addClass("hidden");var a=c.adapter.environment.cmi;$(d).removeClass(a.success_status)};$(c).append(b);Object.defineProperty(b,"isVisible",
{get:function(){return d&&!$(d).hasClass("hidden")}})}function d(a){function b(a,d){var e=$_P.library.getEntry(c.id),g=$_P.library.getEntry(a),e=e.environment.cmi,f=!1;try{for(var h=e.interactions._count,n=0;n<h;++n)if(e.interactions.get(n).id===a){console.log(a);""!==e.interactions.get(n).learner_response&&(f=!0);break}}catch(l){console.log(l.message)}return{id:g.id,index:d,displaytext:g.title,state:f?"answered":"unanswered"}}var c=a,d=[],e={};a=c.examPool;for(var f=0;f<a.length;++f){var h=b(a[f],
f+1);d.push(h);e[h.id]=f}Object.defineProperty(this,"length",{value:d.length});this.identifierForRowIndex=function(a){return 0<=a&&a<d.length?d[a].id:null};this.data=function(a,b){var c=e[a];return"undefined"===typeof c?null:d[c][b]};this.discard=function(){c=null};this.update=function(a){var c=e[a],f=b(a,c+1);d[c]=f;$(this).trigger("imc:dataChange",a)}}function n(a){function c(a,b){var d=j.activeItem;j.activeItem=b;d&&m.update(d)}function b(a,c){var d=n.examPool.indexOf(c);-1!==d&&n.showInteraction(d,
"fadeover");a.stopPropagation()}function e(a){f.hide();a.stopPropagation()}var f=this,n=a,l=null,j=null,m=null;f.show=function(){l&&$(l).removeClass("hidden")};f.hide=function(){l&&$(l).addClass("hidden")};f.load=function(a){(new h).load("exam-overview",function(h){l=h;if(j=l.querySelector(".item-view"))m=new d(n),j.dataSource=m,$(n).on("imc:interactionChange",c),$(l).on("imc:selectionChange",b).on("imc:viewItemTapped",e);f.hide();$(n).append(l);a&&a()})};f.discard=function(){$(n).off("imc:interactionChange",
c);n=null;$(l).off("imc:selectionChange",b).off("imc:viewItemTapped",e);l=null;j&&(j.dataSource=null);m&&(m.discard(),m=null)};Object.defineProperty(this,"isVisible",{get:function(){return l&&!$(l).hasClass("hidden")}})}var l=com.imc.content.Content,h=com.imc.util.ControlLoader,t=com.imc.animation.AnimationDriver,j=com.imc.animation.Animation;f.ExamContent=function(a){function d(a){for(var c=a.querySelectorAll(".title"),b=0;b<c.length;++b)c[b].innerHTML=A;if(0<s.timeLimit)for(var c=a.querySelectorAll(".total-time"),
e=s.timeLimit+":00",b=0;b<c.length;++b)c[b].innerHTML=e;for(var g in G)if($_P.isOldPlayer)G[g]=a.querySelectorAll("."+g);else{(b=document.getElementById("imc-control-exam-"+g))&&G[g].push(b);c=a.querySelectorAll("."+g);console.log(g+":"+c.length);for(b=0;b<c.length;++b)G[g].push(c[b])}}function f(a){try{for(var b=G["current-time"],c=parseInt(a/60).toString(),d=parseInt(a%60).toString(),e=c+":"+(1===d.length?"0"+d:d),g=0;g<b.length;++g)b[g].innerHTML=e;a=60*s.definition.time_limit-a;b=G["remaining-time"];
c=parseInt(a/60).toString();d=parseInt(a%60).toString();e=c+":"+(1===d.length?"0"+d:d);for(g=0;g<b.length;++g)b[g].innerHTML=e}catch(k){console.error(k)}}function r(){var a;if(p){var b=C.indexOf(p.id)+1+"/"+C.length;a=G["current-interaction"];for(var c=0;c<a.length;++c)a[c].innerHTML=b}if("linear"===s.navigationMode&&"nofeedback"!==s.feedbackMode){a=G["num-correct"];for(c=0;c<a.length;++c)a[c].innerHTML=J.numCorrect;a=G["num-incorrect"];for(c=0;c<a.length;++c)a[c].innerHTML=J.numIncorrect}}function w(){$_P.isOldPlayer&&
(new h({deviceFamilySpecific:!0})).load("exam",function(a){$(s).append(a);$(s).trigger("imc:ready")})}function z(a){var c=v[a];$(c).on("imc:ready",function(b){var d=[$(s).width(),$(s).height()];t.fadeIn(c,300);$(p).css("opacity",0);s.appendChild(p);p.fitViewport(d);p.present();s.timeTracker&&s.timeTracker.resume();d=C.indexOf(a);$_P.isOldPlayer&&$(s).removeClass("evaluated").removeClass("retry");d+1===C.length&&$(s).addClass("lastinteraction");0===d&&$(s).addClass("firstinteraction");b.stopPropagation();
"linear"===s.navigationMode&&s.enableControls("evaluate");$(c).off("imc:ready")});c.load();p=c;r()}var B=com.imc.content.ContentFactory,A="",v={},p=null,D=!1,I=!1,C=null,L=null,J={numCorrect:0,numIncorrect:0},F=0,H=0,y=0,u=0,G={"remaining-time":[],"total-time":[],"current-time":[],"time-limit":[],"current-interaction":[],"num-correct":[],"num-incorrect":[]},s=l.call(this,"imc-exam",a,function(){A=$_P.library.getEntry(this.id).title;Object.defineProperty(this,"timeLimit",{value:this.definition.time_limit});
this.timeLimit||$(this).addClass("time-unlimited");var a=this.definition.navigation_mode;"nonlinear_overview"===a&&(a="nonlinear",L=!0);Object.defineProperty(this,"navigationMode",{value:a});$(this).addClass(this.navigationMode);a=this.definition.feedback_mode||"feedbackandcorrection";"linear"!==this.navigationMode&&(a="nofeedback");Object.defineProperty(this,"feedbackMode",{value:a});$(this).addClass(this.feedbackMode);Object.defineProperty(this,"weightingMode",{value:this.definition.weighting_mode||
"individual"});Object.defineProperty(this,"evaluationMode",{value:this.definition.evaluation_mode||"threshold"});Object.defineProperty(this,"startPage",{value:new c(this)});this.startPage.load($_P.isOldPlayer?w:null)});$(s).addClass("firstinteraction").addClass("lastinteraction");Object.defineProperties(s,{isRunning:{get:function(){return D}}});s.present=function(){s.startPage.show();Object.defineProperty(s,"resultView",{value:new b(s)})};s.cleanup=function(){try{D&&s.handIn({suppressMessage:!0,suppressResult:!0}),
v=null,s.timeTracker&&(s.timeTracker.discard(),delete s.timeTracker),s.overview&&(s.overview.discard(),delete s.overview)}catch(a){console.error(a)}};s.createExamPool=function(){try{for(var a=s.definition.questionpools.pools,c=s.definition.question_count,b=s.definition.questionpools.assemblypolicy,d=[],e=0;e<a.length;++e){var g={question_count:0,taken:0,items:[]};g.question_count=a[e].question_count||a[e].items.length;for(var f=0;f<a[e].items.length;++f)g.items.push(a[e].items[f]);d.push(g)}for(var a=
[],k={};a.length<c&&d.length;)for(e=0;e<d.length;++e){var g=d[e],h=Math.round(Math.random()*(g.items.length-1)),n=g.items[h];g.items.splice(h,1);if(!k[n]){var l=$_P.library.getEntry(n);if(l){var p={id:n,sortIndex:0},r=l.excludedinteractions;if(r&&r.length)for(f=0;f<r.length;++f)k[r[f]]=!0;switch(b){case "fixed":p.sortIndex=l.index;break;case "random":p.sortIndex=Math.round(Math.random()*c);break;case "random_folder":p.sortIndex=e;break;default:console.error("Exam: unrecognized sort mode "+b)}a.push(p);
g.taken++}}(0===g.items.length||g.taken===g.question_count)&&d.splice(e,1)}a.sort(function(a,c){return a.sortIndex-c.sortIndex});b=[];for(e=0;e<c;++e)b.push(a[e].id);return b}catch(j){return console.error(j.message),[]}};s.executeAction=function(a,c){if($_P.isOldPlayer)return!1;if("interaction"===a){if("evaluate"===c)return s.evaluateCurrent(),!0;if("retry"===c)return s.retryCurrent(),!0}else if("exam"===a){switch(c){case "start":s.startExam();break;case "handin":s.handIn();break;case "nextinteraction":s.navigateForward();
break;case "previnteraction":s.navigateBack();break;case "showresult":s.resultView&&s.resultView.show();break;case "overview":D&&s.overview&&(s.overview.isVisible?s.overview.hide():s.overview.show());break;default:console.error("Exam: unrecognized action "+c)}return!0}return!1};$(s).on("imc:action",function(a,c,b){if($_P.isOldPlayer&&"exam"===c){console.log("exam actions "+b);switch(b){case "start":s.startExam();break;case "evaluateinteraction":s.evaluateCurrent();break;case "retryinteraction":s.retryCurrent();
break;case "nextinteraction":s.navigateForward();break;case "previnteraction":s.navigateBack();break;case "handin":s.handIn();break;case "showresult":s.resultView&&s.resultView.show();break;case "toggleoverview":D&&s.overview&&(s.overview.isVisible?s.overview.hide():s.overview.show());break;default:console.error("Exam: unrecognized action "+b)}a.stopPropagation()}});s.evaluateCurrent=function(a){a||(a={});if(!p)return!1;var c={};a.silent&&(c.silent=!0);var b=p.evaluate(c);"nofeedback"!==this.feedbackMode&&
!a.silent&&(b?J.numCorrect++:p.definition.attempt_limit===p.currentAttempt&&J.numIncorrect++,r());c=C.indexOf(p.id)===C.length-1;if("linear"===s.navigationMode&&"nofeedback"===s.feedbackMode&&!a.suppressNavigation&&!c)s.navigateForward();else if("linear"===s.navigationMode){s.disableControls("evaluate");var c=C.indexOf(p.id)===C.length-1,d=p,b=!b&&"nofeedback"!==s.feedbackMode&&d.definition.attempt_limit>d.currentAttempt;$_P.isOldPlayer?b?$(s).addClass("retry"):$(s).addClass("evaluated"):b?s.enableControls("retry"):
c?s.enableControls("exam-handin"):s.enableControls("exam-forward");!b&&(c&&(a.suppressResult||!s.definition.show_result_view))&&s.handIn({autoHandIn:!0});return b}return!1};s.retryCurrent=function(){if(!("nofeedback"===s.feedbackmode&&"linear"!==s.navigationMode)&&p){p.currentAttempt++;var a=C.indexOf(p.id);s.showInteraction(a,"fadeover",!0);s.disableControls("retry")}};s.startExam=function(){if(D)console.warn("Exam is already running");else{if(!$_P.isOldPlayer){var a=[];a.push("exam-current-interaction");
s.timeLimit&&a.push("exam-remaining-time");"nofeedback"!==s.feedbackMode&&(a.push("exam-num-correct"),a.push("exam-num-incorrect"));"nonlinear"===s.navigationMode&&a.push("exam-handin");L&&a.push("exam-overview")}s.adapter.Initialize("");s.adapter.SetValue("cmi.success_status","unknown");s.adapter.SetValue("cmi.exit","normal");D=!0;$(s).addClass(s.definition.navigation_mode);s.definition.time_limit&&(Object.defineProperty(s,"timeTracker",{value:new e(s,s.definition.time_limit),configurable:!0}),s.timeTracker.timeChangeListener=
f,s.timeTracker.start());s.viewport&&(s.viewport.contentState="running");C=s.createExamPool();Object.defineProperty(s,"examPool",{value:C});L?(Object.defineProperty(this,"overview",{value:new n(s),configurable:!0}),this.overview.load(function(){d(s)})):d(s);for(var c=0;c<C.length;++c){var b=$_P.library.getEntry(C[c]),h=B.create(b);h.exam=s;v[C[c]]=h;h.currentAttempt=1;b=b.score_mapping||{correct:1,incorrect:0};"individual"===s.weightingMode?(H+=b.correct,F+=b.incorrect):H++}s.startPage.hide(function(){s.showInteraction(0)});
r();s.enableControls(a);$_P.isOldPlayer||(s.addContentClass("exam-"+s.navigationMode),s.addContentClass("exam-running"))}};s.handIn=function(a){a||(a={});if("linear"===this.navigationMode||a.suppressMessage||confirm($_P.stringTable.getString("handin-message"))){if(!a.autoHandIn){var c=s.evaluateCurrent({suppressNavigation:!0,silent:!0});if(!a.suppressMessage&&"nofeedback"!==s.feedbackMode&&c)return}s.timeTracker&&s.timeTracker.stop();s.overview&&s.overview.isVisible&&s.overview.hide();for(var c={},
b=0;b<C.length;++b)c[C[b]]={tracked:!1,correct:!1};for(var d=s.adapter.GetValue("cmi.interactions._count"),b=0;b<d;++b){var e=s.adapter.GetValue("cmi.interactions."+b+".id"),g="correct"===s.adapter.GetValue("cmi.interactions."+b+".result");c[e].correct=g;c[e].tracked=!0}for(e in c){g=c[e].correct;switch(s.weightingMode){case "individual":b=$_P.library.getEntry(e).score_mapping||{correct:1,incorrect:0};y+=g?b.correct||1:b.incorrect||0;break;case "onepointeach":y+=g?1:0}c[e].tracked||(g=s.adapter.GetValue("cmi.interactions._count"),
s.adapter.SetValue("cmi.interactions."+g+".id",e),s.adapter.SetValue("cmi.interactions."+g+".result","incorrect"))}s.adapter.PersistData();u=(y-F)/(H-F);s.adapter.SetValue("cmi.score.min",F.toFixed(0));s.adapter.SetValue("cmi.score.max",H.toFixed(0));s.adapter.SetValue("cmi.score.raw",y.toFixed(0));s.adapter.SetValue("cmi.score.scaled",u.toFixed(7));e="failed";switch(s.evaluationMode){case "threshold":if(u>=(s.definition.threshold||0))e="passed";break;case "grades":e=m(s.definition.grades,u).passed?
"passed":"failed";break;case "none":e="passed";break;default:console.error("Exam: unrecognized evaluation mode "+s.evaluationMode)}s.adapter.SetValue("cmi.success_status",e);s.viewport&&(s.viewport.contentState="finished");D=!1;I=!0;!a.suppressResult&&s.definition.show_result_view&&s.resultView.show();$_P.isOldPlayer||(s.removeContentClass("exam-"+s.navigationMode),s.removeContentClass("exam-running"));s.disableControls("exam-handin exam-back exam-forward exam-overview evaluate retry".split(" "));
s.adapter.Terminate("")}};s.navigateForward=function(){var a=0;p&&(a=C.indexOf(p.id)+1);a>=C.length||s.showInteraction(a,"slideleft")};s.navigateBack=function(){var a=-1;p&&(a=C.indexOf(p.id)-1);0>a||s.showInteraction(a,"slideright")};s.showInteraction=function(a,c,b){$_P.audioPlayer.clear();if(!(0>a||a>=C.length)){var d=C[a];if(!p||p.id!==d||b){$_P.isOldPlayer?$(s).removeClass("firstinteraction").removeClass("lastinteraction"):"linear"===s.navigationMode?s.disableControls("exam-forward"):(0===a?
s.disableControls("exam-back"):s.enableControls("exam-back"),a===C.length-1?s.disableControls("exam-forward"):s.enableControls("exam-forward"));try{if(s.timeTracker&&s.timeTracker.suspend(),p){p.cleanup();var e=new j(400,0,"quadin");switch(c){case "slideleft":e.animate(p,{left:"-"+window.innerWidth+"px"});break;case "slideright":e.animate(p,{left:window.innerWidth+"px"});break;case "fadeover":e.animate(p,{opacity:0});break;default:console.error("Exam: unrecognized transition "+c)}var g=new t;g.addAnimation(e);
g.start(function(){$(p).remove();p.clear();z(d)})}else z(d)}catch(f){console.error(f)}$(s).trigger("imc:interactionChange",d)}}};s.fitViewport=function(a){$(s).css({width:a[0]+"px",height:a[1]+"px"});p&&p.fitViewport(a)};s.promptNavigation=function(){return D?confirm($_P.stringTable.getString("exam-navigate-message")):!0};$(s).on("tap",function(a){s.resultView.isVisible&&!I&&s.resultView.hide();s.overview&&s.overview.isVisible&&s.overview.hide();a.stopPropagation()});Object.defineProperty(s,"swipeDisabled",
{get:function(){return D}});return s}})(com.imc.content);
(function(f){var m=com.imc.content.ScalableContent,e=com.imc.content.item.ItemFactory,c=com.imc.animation.AnimationDriver,a=com.imc.animation.Animation;f.InteractionContent=function(b){function d(a){for(var c=parseInt(g.adapter.GetValue("cmi.interactions._count")),b=0;b<c;++b){var d=g.adapter.GetValue("cmi.interactions."+b+".id");if(a==d)return b}return c}function f(a,c,b){g.adapter.SetValue("cmi.interactions."+a+"."+c,b)}var l=[],h,t=!1,j=!1,x={},g=m.call(this,"imc-interaction",b,function(){h=this.definition.threshold||
0.999;for(var a=null,c=null,b=0,d=this.definition.library.length;b<d;++b)if(a=this.definition.library[b],c=e.create(a,this)){if(a.groups){for(var g=0;g<a.groups.length;++g)$(c).addClass(a.groups[g]);$(c).css("display","none")}else $(c).addClass("default");$(c).addClass("interaction-item");c.isInteractive&&l.push(c);1==c.displaymode&&$(c).css("display","none");this.appendChild(c);x[c.id]=c}$(this).trigger("imc:ready")});Object.defineProperty(g,"exam",{value:null,writable:!0});Object.defineProperty(g,
"ANIMATION_DURATION",{enumerable:!1,value:300});g.getUserResponse=function(){for(var a={},c=!1,b=0;b<l.length;++b){var d=l[b].getUserResponse();d&&(a[l[b].id]=d,c=!0)}return c?a:null};g.showFeedback=function(b){b=g.getElementsByClassName("feedback-"+b);for(var d=new c,e=new a(this.ANIMATION_DURATION),f=0,h=b.length;f<h;++f)1!=b[f].displaymode&&e.animate(b[f],{opacity:[0,b[f].baseOpacity],display:"block"});d.addAnimation(e);d.start()};g.playInteractionAudio=function(a){var c=g.definition.eventaudios||
{};$_P.audioPlayer.paused||($_P.audioPlayer.paused=!0);c[a]&&($_P.audioPlayer.onready=function(){$_P.audioPlayer.paused=!1},$_P.audioPlayer.setTrack(c[a]))};g.evaluate=function(a){"input"===document.activeElement.nodeName.toLowerCase()&&document.activeElement.blur();a||(a={});var c=!1,b=l;$_P.audioPlayer.clear();g.disableControls("evaluate");for(var e=0,j=0,m=b.length;j<m;++j)e+=b[j].evaluate(),b[j].disable();j=g.getUserResponse()||"";e/=b.length;e>=h&&(c=!0);if(g.exam){if(b=d(g.id),f(b,"result",
c?"correct":"incorrect"),f(b,"learner_response",JSON.stringify(j)),"nofeedback"!==g.exam.feedbackMode&&(v=g.definition.attempt_limit||2,v=g.currentAttempt>=v,c?e=b="correct":v?e=b="incorrect":(b="retry",e="tryagain"),g.showFeedback(b),a.silent||g.playInteractionAudio(e)),"feedbackandcorrection"===g.exam.feedbackMode&&(c||v))for(j=0;j<l.length;++j)l[j].markSolution()}else{g.adapter.SetValue("cmi.success_status",c?"passed":"failed");var v=g.definition.attempt_limit||2,v=g.currentAttempt>=v;c?e=b="correct":
v?e=b="incorrect":(b="retry",e="tryagain",g.enableControls("retry"));g.showFeedback(b);a.silent||g.playInteractionAudio(e);if(c||v){for(j=0;j<l.length;++j)l[j].markSolution();!$_P.isOldPlayer&&g.viewport&&(g.viewport.contentState="finished")}$_P.isOldPlayer&&g.viewport&&(g.viewport.contentState=b);g.adapter.Terminate("")}return c};g.persist=function(){t=!0;g.evaluate()};g.present=function(){try{g.enableControls(["audio","evaluate"]);g.exam&&$_P.audioPlayer.clear();g.playInteractionAudio("assignment");
if(g.exam){var a=d(g.id);f(a,"id",g.id);f(a,"type","other");if(!t)return;try{for(var c=JSON.parse(g.adapter.GetValue("cmi.interactions."+a+".learner_response")),b,e=0;e<l.length;++e)b=l[e].id,c[b]&&l[e].setUserResponse(c[b])}catch(h){}}else g.adapter.Initialize(""),g.adapter.SetValue("cmi.exit","suspend");for(e in x)try{if(x[e].onpresent)x[e].onpresent()}catch(j){}}catch(m){}};g.cleanup=function(){g.exam?"linear"!==g.exam.navigationMode&&g.persist():g.adapter.Terminate("");l=[];try{$(g).off();for(var a in x){try{x[a].purge()}catch(c){}delete x[a]}x=
{}}catch(b){}};g.suspend=function(){$_P.audioPlayer.paused||(j=!0,$_P.audioPlayer.paused=!0)};g.unsuspend=function(){j&&($_P.audioPlayer.paused=!1)};g.executeAction=function(a,c){if("interaction"!==a)return!1;if("evaluate"===c)return g.evaluate(),!0;"retry"===c&&$_P.reloadCurrentContent();return!1};return g}})(com.imc.content);
(function(f){var m=com.imc.content.Content,e=com.imc.util.Watchable,c=com.imc.util.ControlLoader;f.VideoContent=function(a){function b(){for(var a=p.video.played,c=[],b=0;b<a.length;++b)c.push([a.start(b),a.end(b)]);try{var d=p.adapter.GetValue("cmi.suspend_data");if(""!==d){d=JSON.parse(d);for(b=0;b<d.length;++b)c.push(d[b])}}catch(e){}if(c.length){c.sort(function(a,c){return a[0]-c[0]});for(var b=[],a=c[0],g,f=0;f<c.length;++f)d=c[f][0],g=c[f][1],d>=a[0]&&d<=a[1]&&g>a[1]?a[1]=g:d>a[1]&&(a[1]>a[0]&&
b.push(a),a=c[f]);b.push(a);c=b}else c=[];for(b=a=0;b<c.length;++b)a+=c[b][1]-c[b][0];b=a/p.duration;a=p.currentTime;console.log("Video play time "+a+" "+p.currentTime+b.toFixed(3));p.adapter.SetValue("cmi.location",a.toFixed(0));p.adapter.SetValue("cmi.suspend_data",JSON.stringify(c));p.adapter.SetValue("cmi.progress_measure",b.toFixed(3));p.adapter.Commit("")}function d(){p.atEnd&&($_P.isOldPlayer||(state="finished"),b(),w.autonavigate&&$(p).trigger("imc:navigationRequest","forward"))}var f=!1,
l=!1,h=!1,t=!1,j="default",x=null,g=null,k=null,r=!1,w={},z=new c,B="imc-control-progress",A="imc-control-pause",v="imc-control-audio";$_P.isOldPlayer&&(B="imc-video-progress",A="imc-video-pause",v="toggle-video-muted");var p=m.call(this,"imc-video",a,function(){e.call(this);Object.defineProperty(this,"video",{value:document.createElement("video")});Object.defineProperty(p,"content",{value:p});Object.defineProperty(p,"duration",{get:function(){return p.video.duration}});Object.defineProperty(p,"currentTime",
{get:function(){return p.video.currentTime||0},set:function(a){p.video.currentTime=a}});Object.defineProperty(p,"timeChangeListener",{value:null,writable:!0});p.defineWatchableProperty("paused",!0,function(a){g&&(a?$(g).css("display","block"):$(g).css("display","none"));k&&$(k).css("display","none");a?p.video.pause():p.video.play()});p.defineWatchableProperty("muted",!1,function(a){p.video.muted=a});Object.defineProperty(p,"seeking",{get:function(){return f},set:function(a){a!==f&&(f=a,!0===a?(l=
p.paused,p.video.pause()):l||p.video.play())}});Object.defineProperty(p,"atEnd",{get:function(){return 1>100*(p.duration-p.currentTime)?!0:!1}});$(p).append(p.video);p.addWatcher("paused",d);p.video.addEventListener("ended",function(){p.atEnd&&(state="finished",b(),w.autonavigate&&$(p).trigger("imc:navigationRequest","forward"))});p.video.addEventListener("play",function(){p.paused=!1},!1);p.video.addEventListener("playing",function(){p.paused=!1},!1);p.video.addEventListener("pause",function(){p.paused=
!0},!1);p.video.addEventListener("timeupdate",function(){p.timeChangeListener&&p.timeChangeListener(p.video.currentTime)},!1);p.video.addEventListener("canplay",function(){p.fitViewport([$(p).width(),$(p).height()]);!f&&(p.paused&&r&&$_P.deviceFamily!==com.imc.core.DeviceFamily.TABLET)&&(p.paused=!1)},!1);p.video.addEventListener("waiting",function(){},!1);p.video.addEventListener("loadedmetadata",function(){try{p.fitViewport([$(p).width(),$(p).height()]),r&&(document.getElementById(B).timeline=p)}catch(a){console.log(a.message)}},
!1);p.video.src=p.definition.src;p.definition.poster&&(p.video.poster=p.definition.poster,k=document.createElement("div"),$(p).append(k),$(k).css({position:"absolute",top:"0px","background-image":"url('"+p.definition.poster+"')","background-size":"contain","background-repeat":"no-repeat","background-position":"center"}));$(p).trigger("imc:ready")});z.load("video-buffering-sprite",function(a){x=a;$(p).append(x)});$_P.deviceFamily!==com.imc.core.DeviceFamily.DESKTOP&&(g=document.createElement("div"),
$(p).append(g),$(g).addClass("imc-video-playbutton"),$(g).on("tap",function(a){p.paused=!1;a.stopPropagation()}));p.present=function(){try{p.enableControls(["audio","pause"]);p.adapter.Initialize("");var a=p.adapter.GetValue("cmi.launch_data");if(""!==a)try{w=JSON.parse(a)}catch(c){}else w={};var b=document.getElementById(B);b.timeline=p;!1===w.progressbar?b.visible=!1:(b.visible=!0,p.enableControls("progress"));r=!0;document.getElementById(A).bind(p,"paused");document.getElementById(v).bind(p,"muted");
p.focus();p.adapter.SetValue("cmi.exit","suspend");!f&&$_P.deviceFamily!==com.imc.core.DeviceFamily.TABLET&&(p.paused=!1)}catch(d){console.log(d.message)}};p.fitViewport=function(a){$(p).css({width:a[0]+"px",height:a[1]+"px"});$_P.options.contentScalingEnabled?($(p.video).css({width:a[0]+"px",height:a[1]+"px"}),k&&$(k).css({width:a[0]+"px",height:a[1]+"px"})):($(p.video).css({width:"",height:""}),k&&$(k).css({width:"",height:""}));$(p.video).css({"max-width":a[0]+"px","max-height":a[1]+"px"});k&&
$(k).css({"max-width":a[0]+"px","max-height":a[1]+"px"})};p.cleanup=function(){p.removeWatcher("paused",d);b();p.adapter.Terminate("");document.getElementById(B).timeline=null;document.getElementById(A).unbind();document.getElementById(v).unbind();$(p).off();p.video.src=void 0};p.suspend=function(){h=!0;t=p.paused;p.viewport&&(j=p.viewport.contentState,p.viewport.contentState="suspended");t||(p.paused=!0)};p.unsuspend=function(){h&&(p.viewport&&(p.viewport.contentState=j),h=!1,t||(p.paused=!1))};
return p}})(com.imc.content);
(function(f){function m(a){var c={};a.sort(function(a,b){return a.title.toLowerCase().localeCompare(b.title.toLowerCase())});for(var b=0;b<a.length;++b)c[a[b].id]=a[b];Object.defineProperty(this,"length",{enumerable:!0,get:function(){return a.length}});this.identifierForRowIndex=function(b){try{return a[b].id}catch(c){return null}};this.data=function(a,b){b||(b="displaytext");try{var d=c[a];switch(b){case "identifier":return d.id;case "displaytext":return d.title;case "contenturl":return d.src}return null}catch(e){return null}}}var e=
com.imc.content.Content,c=com.imc.content.GlossaryEntry,a=com.imc.util.ControlLoader,b=com.imc.animation.AnimationDriver,d=com.imc.animation.Animation;f.GlossaryContent=function(f){var l=null,h=null,t=null,j=null,x=null,g=!1,k=e.call(this,"imc-glossary",f,function(){h=new m(k.definition.entries);var e=this;(new a({deviceFamilySpecific:!0})).load("glossary",function(a){e.appendChild(a);t=e.querySelector(".imc-glossary-entrylist");t.dataSource=h;j=e.querySelector(".imc-glossary-entryarea");a=document.createElement("div");
j.appendChild(a);x=a;$(k).on("imc:selectionChange",function(a,e){var g=h.data(e,"contenturl"),f=new b,n=new d(0,0,"quadout");n.animate(x,{opacity:0});f.addAnimation(n);f.start(function(){j.removeChild(x);j.scrollTop=0;var a=new c(g);$(a).css("opacity",0);$(a).on("imc:ready",function(){j.appendChild(a);x=a;var c=new d(0,0,"quadin");c.animate(a,{opacity:1});b.run(c)});a.load()});l=e;$(k).removeClass("entrylist")});$(e).trigger("imc:ready")})});$(k).on("imc:navigationRequest",function(a,b){if(/^urn:imc:.*/.test(b)){var c=
b.split(":");c.slice(0,3).join(":")===k.id&&(t.select("urn:imc:"+c[3]),a.stopPropagation())}});k.present=function(){g="false"===k.adapter.Initialize("");g||(k.adapter.SetValue("cmi.completion_status","completed"),k.adapter.Commit(""));var a=h.identifierForRowIndex(0),b=g?"":k.adapter.GetValue("cmi.location");if(""!==b)try{a="urn:imc:"+b.split(":")[3]}catch(c){console.error(c.message)}t.select(a)};k.cleanup=function(){if(!g){var a=k.id+":"+l.substr(8);k.adapter.SetValue("cmi.location",a);k.adapter.SetValue("cmi.exit",
"suspend");k.adapter.Terminate("")}};$(k).on("tap",function(){$(k).hasClass("entrylist")&&$(k).removeClass("entrylist")});$(k).on("imc:action",function(a,b,c){"glossary"===b&&("toggleentrylist"===c&&$(k).toggleClass("entrylist"),a.stopPropagation())});return k}})(com.imc.content);
(function(f){function m(a,b){return $_P.stringTable.getString(b)}var e=com.imc.content.Content,c=com.imc.util.ControlLoader;f.CertificateContent=function(a){var b=210/297,d=[],f={},l={},h=null,t=null,j=e.call(this,"imc-certificate",a,function(){var a=this;(new c).load("certificate",function(b){a.appendChild(b);b=a.querySelector(".imc-certificate-form");if(!b)throw Error("Missing required component imc-certificate-form");h=b;for(var c=b.getElementsByTagName("input"),e=a.definition.fields,l=0;l<c.length;++l){var j=
c[l].className;-1!==e.indexOf(j)?(d.push(c[l]),f[j]=c[l],$(c[l]).on("tap",function(a){a.stopPropagation()})):(c[l].disabled=!0,(j=b.querySelector("."+j+"field"))&&$(j).css("display","none"))}console.log("size "+e.length);0==e.length&&$(h).css("display","none");var A=b.querySelector(".ok");A&&(A.enabled=!1);b.addEventListener("input",function(){for(var a=!0,b=0;b<d.length;++b)if(""===d[b].value&&"title"!==d[b].className){a=!1;break}A&&(A.enabled=a)});if(b=b.querySelector(".skip"))b.enabled=$_P.navigator.canSkipForward;
$.get(a.definition.template,function(b,c,d){b=d.responseText.replace(/\$\{([a-z0-9\-]+)\}/ig,m);$(x).html(b);"exam"===a.definition.grading_mode?(b=$_P.library.getEntry(a.definition.exam))?$.getJSON(b.src,function(b){t=b;$(a).trigger("imc:ready")}):$(a).trigger("imc:ready"):$(a).trigger("imc:ready")})})}),x=document.createElement("div");$(x).addClass("imc-certificate-page");j.appendChild(x);j.fillCertificate=function(a){$(h).css("display","none");var b="certificate-text-pre",c="certificate-text-post";
"neutral"===j.definition.grading_mode&&(b+="-neutral",c+="-neutral");if(t)switch(t.evaluation_mode){case "threshold":switch(t.result_presentation_mode){case "percent":var d=0;try{var e=$_P.library.getEntry(j.definition.exam),f=e.environment.cmi,d=f.score.scaled;a["result-value"]=parseInt(100*d)+"%";a["result-type"]=$_P.stringTable.getString("label-score")}catch(n){}break;case "points":d="";try{e=$_P.library.getEntry(j.definition.exam),f=e.environment.cmi,d=parseInt(f.score.raw)+"/"+parseInt(f.score.max),
a["result-value"]=d,a["result-type"]=$_P.stringTable.getString("label-score")}catch(m){}}break;case "grades":try{e=$_P.library.getEntry(j.definition.exam);f=e.environment.cmi;d=f.score.scaled;for(e=0;e<t.grades.length;++e)if(d>=t.grades[e].threshold){a["result-value"]=t.grades[e].grade;break}a["result-type"]=$_P.stringTable.getString("label-grade")}catch(p){}break;case "neutral":b+="-neutral",c+="-neutral"}d=[];f=0;d[f]="";for(var D=j.definition.caption,I=0,e=0;e<D.length;++e){var C=D.charAt(e);d[f]+=
C;I++;if("\n"===C||37==I)I=0,f++,d[f]=""}$.extend(a,{caption:j.definition.title,subject:d[0]||"",subject1:d[1]||"",subject2:d[2]||"",subject3:d[3]||"",date:(new Date).toLocaleDateString(),prefix:$_P.stringTable.getString(b),postfix:$_P.stringTable.getString(c)});$.extend(a,l);for(var L in a)if(e=x.querySelector("."+L)){b=a[L];if(c=e.getAttribute("imc:transform"))switch(c){case "uppercase":b=b.toUpperCase();break;case "lowercase":b=b.toLowerCase()}(c=e.getAttribute("imc:format"))&&(b=c.replace(/\$value\$/i,
b));e.appendChild(document.createTextNode(b))}L=x.querySelectorAll(".compound")||[];for(e=0;e<L.length;++e)if(b=L[e].getAttribute("imc:values")){d=[];b=b.split(",");for(c=0;c<b.length;++c)b[c].trim(),(f=a[b[c]]||"")&&d.push(f);b=L[e].getAttribute("imc:separator")||" ";b=d.join(b);L[e].appendChild(document.createTextNode(b))}$("#imc-print-support").html($(x).html());j.enableControls("print");j.viewport&&(j.viewport.contentState="printable");j.adapter.SetValue("cmi.completion_status","completed");j.adapter.Commit("")};
j.present=function(){j.adapter.Initialize("");j.adapter.SetValue("cmi.exit","suspend");j.enableControls("print");var a=null,b=j.adapter.GetValue("cmi.suspend_data");if(""!==b)try{a=JSON.parse(b)}catch(c){}if(a)j.fillCertificate(a);else if($_P.args["user-data"]){for(var a=atob($_P.args["user-data"]).split("&"),b={},e=0,h=0;h<a.length;++h){var m=a[h].split("="),A=decodeURIComponent(m[1]);if(f[m[0]]){var v=f[m[0]];v.value=A;v.disabled=!0;b[m[0]]=A;++e}else l[m[0]]=A}e==d.length&&j.fillCertificate(b)}else if(0==
j.definition.fields.length){b={};for(h=0;h<d.length;++h)b[d[h].className]=d[h].value;j.fillCertificate(b)}};j.cleanup=function(){j.adapter.Terminate("")};j.fitViewport=function(a){$(j).css({width:a[0]+"px",height:a[1]+"px"});var c=a[1]-40,d=parseInt(c*b);d>a[0]-40&&(d=a[0]-40,c=d/b);$(x).css({position:"absolute",left:parseInt((a[0]-d)/2)+"px",top:parseInt((a[1]-c)/2)+"px",width:d+"px",height:c+"px"})};$(j).on("imc:action",function(a,b,c){if("certificate"===b)switch(c){case "create":a={};for(b=0;b<
d.length;++b)a[d[b].className]=d[b].value;var e=[$(j).width(),$(j).height()];j.fitViewport([0,0]);j.fillCertificate(a);j.adapter.SetValue("cmi.suspend_data",JSON.stringify(a));"input"===document.activeElement.nodeName.toLowerCase()&&document.activeElement.blur();window.setTimeout(function(){j.fitViewport(e)},100)}});return j}})(com.imc.content);
(function(f){var m=com.imc.scorm.scorm2004.Formatters;f.StorageBackend=function(e){var c=this,a=null;Object.defineProperty(c,"suspendData",{value:e});c.read=function(){};c.write=function(){return!0};c.flush=function(){return!0};c.startSession=function(){return!0};c.endSession=function(){return!0};c.lastError=function(){return""};c.laseErrorString=function(){return""};c.initialize=function(){c.compressionEnabled&&(c.suspendData.compressionEnabled=!0);c.startSession();a=(new Date).getTime();var b=c.read("cmi.suspend_data");
b&&""!==b&&c.suspendData.restore(b)};c.commit=function(){$_P.updateSuccess();var a;a=c.write("cmi.suspend_data",c.suspendData.serialize())&&!0;a=c.write("cmi.progress_measure",$_P.progress.toFixed(3))&&a;a=c.write("cmi.score.min","0")&&a;a=c.write("cmi.score.max","100")&&a;a=c.write("cmi.score.raw",(100*$_P.progress).toFixed(0))&&a;a=c.write("cmi.success_status",$_P.success)&&a;var d="incomplete";if("passed"===$_P.success||"failed"===$_P.success)d="completed";a=c.write("cmi.completion_status",d)&&
a;a=c.write("cmi.learner_preference.audio_level",$_P.audioPlayer.muted?0:1)&&a;a=c.write("cmi.learner_preference.audio_captioning",$_P.viewport.subtitlesEnabled?"1":"-1")&&a;a=c.flush()&&a;a||($_P.errorScreen.retry=c.commit,$_P.errorScreen.header=$_P.stringTable.getString("error-scorm-header"),$_P.errorScreen.message=$_P.stringTable.getString("error-scorm-message"),$_P.errorScreen.code=c.lastError(),$_P.errorScreen.description=c.laseErrorString(),$_P.showErrorScreen());return a};c.terminate=function(){$_P.updateSuccess();
var b;b=c.write("cmi.suspend_data",c.suspendData.serialize())&&!0;b=c.write("cmi.progress_measure",$_P.progress.toFixed(3))&&b;b=c.write("cmi.score.min","0")&&b;b=c.write("cmi.score.max","100")&&b;b=c.write("cmi.score.raw",(100*$_P.progress).toFixed(0))&&b;b=c.write("cmi.success_status",$_P.success)&&b;var d="incomplete";if("passed"===$_P.success||"failed"===$_P.success)d="completed";b=c.write("cmi.completion_status",d)&&b;b=c.write("cmi.learner_preference.audio_level",$_P.audioPlayer.muted?0:1)&&
b;b=c.write("cmi.learner_preference.audio_captioning",$_P.viewport.subtitlesEnabled?"1":"-1")&&b;d=(new Date).getTime()-a;b=c.write("cmi.session_time",m.formatDuration(d))&&b;b=c.endSession()&&b;b||($_P.errorScreen.retry=c.terminate,$_P.errorScreen.header=$_P.stringTable.getString("error-scorm-header"),$_P.errorScreen.message=$_P.stringTable.getString("error-scorm-message"),$_P.errorScreen.code=c.lastError(),$_P.errorScreen.description=c.laseErrorString(),$_P.showErrorScreen());return b}}})(com.imc.storage);
(function(f){function m(a){return/^(\-|\+)?\d+(\.\d{1,7})?$/.test(a)}function e(a,b){if("undefined"===typeof a[b])throw new k(z.UNINITIALIZED_ELEMENT_VALUE);return a[b]}function c(a,b){if("undefined"===typeof a[b])throw new k(z.DEPENDENCY_NOT_ESTABLISHED);}function a(){throw new k(z.ELEMENT_IS_READONLY);}function b(){throw new k(z.ELEMENT_IS_WRITEONLY);}function d(c){var d=this,e=c.base,g=c.property,h=!!c.writable,n=!!c.readable,l=c.itemType,j=e[g]||[],m=c.precondition||null;if(!e||!g||!l)throw Error("Missing required descriptor properties");
Object.defineProperty(this,"isPackedArray",{value:!0,enumerable:!1});Object.defineProperty(this,"_count",{get:function(){return j.length},set:a,enumerable:!0});Object.defineProperty(this,"_children",{get:function(){return l.children},set:a,enumerable:!0});d.get=function(a){n||b();if(0<=a&&a<j.length)return new l(j[a],d);throw new k(z.GENERAL_GET_FAILURE);};d.set=function(b){h||a();if(0<=b&&b<j.length)return new l(j[b],d);if(b===j.length)return m&&m(),j.push({}),f.Environment.revertActions.push(function(){j.pop()}),
1===j.length&&(e[g]=j,f.Environment.revertActions.push(function(){delete e[g]})),new l(j[b],d);throw new k(z.GENERAL_SET_FAILURE);};d.isUnique=function(a,b,c){for(var d=0;d<j.length;++d)if(j[d][b]===c&&j[d]!==a)return!1;return!0}}function n(a){Object.defineProperty(this,"comment",{get:function(){return e(a,"comment")},set:function(b){a.comment=b},enumerable:!0});Object.defineProperty(this,"location",{get:function(){return e(a,"location")},set:function(b){a.location=b},enumerable:!0});Object.defineProperty(this,
"timestamp",{get:function(){e(a,"timestamp")},set:function(b){try{r.timestamp.parse(b),a.timestamp=b}catch(c){throw new k(z.ELEMENT_TYPE_MISMATCH);}},enumerable:!0})}function l(b){var c=b.score||{};Object.defineProperty(this,"_children",{get:function(){return"min,max,raw,scaled"},set:a,enumerable:!0});Object.defineProperty(this,"min",{get:function(){return w.formatFloat(e(c,"min"))},set:function(a){if(!m(a))throw new k(z.ELEMENT_TYPE_MISMATCH);c.min=parseFloat(a);b.score=c},enumerable:!0});Object.defineProperty(this,
"max",{get:function(){return w.formatFloat(e(c,"max"))},set:function(a){if(!m(a))throw new k(z.ELEMENT_TYPE_MISMATCH);c.max=parseFloat(a);b.score=c},enumerable:!0});Object.defineProperty(this,"raw",{get:function(){return e(c,"raw").toFixed(7)},set:function(a){if(!m(a))throw new k(z.ELEMENT_TYPE_MISMATCH);c.raw=parseFloat(a);b.score=c},enumerable:!0});Object.defineProperty(this,"scaled",{get:function(){return w.formatFloat(e(c,"scaled"))},set:function(a){if(!m(a))throw new k(z.ELEMENT_TYPE_MISMATCH);
a=parseFloat(a);if(-1>a||1<a)throw new k(z.ELEMENT_VALUE_OUT_OF_RANGE);c.scaled=a;b.score=c},enumerable:!0})}function h(a,b){Object.defineProperty(this,"id",{get:function(){return e(a,"id")},set:function(c){if("undefined"!==typeof a.id&&c!==a.id)throw new k(z.GENERAL_SET_FAILURE,"Redefinition of objective id is not permitted");if(!b.isUnique(a,"id",c))throw new k(z.GENERAL_SET_FAILURE,"Objective id must be unique");a.id=c},enumerable:!0});Object.defineProperty(this,"score",{value:new l(a),enumerable:!0});
Object.defineProperty(this,"success_status",{get:function(){return!a.success_status?"unknown":a.success_status},set:function(b){c(a,"id");B.check("success_status",b);a.success_status=b},enumerable:!0});Object.defineProperty(this,"completion_status",{get:function(){return!a.completion_status?"unknown":a.completion_status},set:function(b){c(a,"id");B.check("completion_status",b);a.completion_status=b},enumerable:!0});Object.defineProperty(this,"progress_measure",{get:function(){return w.formatFloat(e(a,
"progress_measure"))},set:function(b){c(a,"id");if(!m(b))throw new k(z.ELEMENT_TYPE_MISMATCH);b=parseFloat(b);if(0>b||1<b)throw new k(z.ELEMENT_VALUE_OUT_OF_RANGE);a.progress_measure=b},enumerable:!0});Object.defineProperty(this,"description",{get:function(){return e(a,"description")},set:function(b){c(a,"id");a.description=b},enumerable:!0})}function t(a,b){Object.defineProperty(this,"id",{get:function(){return e(a,"id")},set:function(c){if(!b.isUnique(a,"id",c))throw new k(z.GENERAL_SET_FAILURE,
"Objective id must be unique");a.id=c},enumerable:!0})}function j(a){Object.defineProperty(this,"pattern",{get:function(){return e(a,"pattern")},set:function(b){a.pattern=b},enumerable:!0})}function x(a){Object.defineProperty(this,"id",{get:function(){return e(a,"id")},set:function(b){a.id=b},enumerable:!0});Object.defineProperty(this,"type",{get:function(){return e(a,"type")},set:function(b){c(a,"id");B.check("type",b);a.type=b},enumerable:!0});Object.defineProperty(this,"objectives",{value:new d({base:a,
property:"objectives",readable:!0,writable:!0,itemType:t,precondition:function(){c(a,"id")}}),enumerable:!0});Object.defineProperty(this,"timestamp",{get:function(){return e(a,"timestamp")},set:function(b){c(a,"id");try{r.timestamp.parse(b),a.timestamp=b}catch(d){throw k(z.ELEMENT_TYPE_MISMATCH,d.message);}},enumerable:!0});Object.defineProperty(this,"correct_responses",{value:new d({base:a,property:"correct_responses",readable:!0,writable:!0,itemType:j,precondition:function(){c(a,"id");c(a,"type")}}),
enumerable:!0});Object.defineProperty(this,"weighting",{get:function(){return w.formatFloat(e(a,"weighting"))},set:function(b){if(!m(b))throw new k(z.ELEMENT_TYPE_MISMATCH);c(a,"id");a.weighting=parseFloat(b)},enumerable:!0});Object.defineProperty(this,"learner_response",{get:function(){return e(a,"learner_response")},set:function(b){c(a,"id");c(a,"type");a.learner_response=b},enumerable:!0});Object.defineProperty(this,"result",{get:function(){return e(a,"result")},set:function(b){m(b)||B.check("result",
b);c(a,"id");a.result=b},enumerable:!0});Object.defineProperty(this,"latency",{get:function(){return w.formatInterval(e(a,"latency"))},set:function(b){try{var d=r.timeinterval.parse(b);c(a,"id");a.latency=d}catch(e){throw k(z.ELEMENT_TYPE_MISMATCH,e.message);}},enumerable:!0});Object.defineProperty(this,"description",{get:function(){return e(a,"description")},set:function(b){c(a,"id");a.description=b},enumerable:!0})}function g(c,g){var f=this,j={};g&&(j=JSON.parse(JSON.stringify(g)));Object.defineProperty(f,
"dirty",{value:!1,writable:!0,enumerable:!1});Object.defineProperty(f,"store",{get:function(){return j},enumerable:!1});var t=c||{};Object.defineProperty(f,"_version",{get:function(){return"1.0"},set:a,enumerable:!0});Object.defineProperty(f,"comments_from_learner",{value:new d({base:j,property:"comments_from_learner",readable:!0,writable:!0,itemType:n}),enumerable:!0});Object.defineProperty(f,"comments_from_lms",{value:new d({base:j,property:"comments_from_lms",readable:!0,writable:!1,itemType:n}),
enumerable:!0});Object.defineProperty(f,"completion_status",{get:function(){if(t.completion_threshold){var a=parseFloat(t.completion_threshold);if(j.progress_measure)return parseFloat(j.progress_measure)>=a?"completed":"incomplete"}else if(j.completion_status)return j.completion_status;return"unknown"},set:function(a){B.check("completion_status",a);"undefined"===typeof t.completion_threshold&&(j.completion_status=a)},enumerable:!0});Object.defineProperty(f,"completion_threshold",{get:function(){if(t.completion_threshold)return w.formatFloat(t.completion_threshold);
throw new k(z.UNINITIALIZED_ELEMENT_VALUE);},set:a,enumerable:!0});Object.defineProperty(f,"credit",{get:function(){return"normal"!==f.mode?"no-credit":"credit"},set:a,enumerable:!0});Object.defineProperty(f,"exit",{get:b,set:function(a){B.check("exit",a);j.exit=a},enumerable:!0});Object.defineProperty(f,"interactions",{value:new d({base:j,property:"interactions",readable:!0,writable:!0,itemType:x}),enumerable:!0});Object.defineProperty(f,"launch_data",{get:function(){if(t.launch_data)return JSON.stringify(t.launch_data);
throw new k(z.UNINITIALIZED_ELEMENT_VALUE);},set:a,enumerable:!0});Object.defineProperty(f,"location",{get:function(){return e(j,"location")},set:function(a){j.location=a},enumerable:!0});Object.defineProperty(f,"max_time_allowed",{get:function(){return e(t,"max_time_allowed")},set:a,enumerable:!0});Object.defineProperty(f,"objectives",{value:new d({base:j,property:"objectives",readable:!0,writable:!0,itemType:h}),enumerable:!0});Object.defineProperty(f,"progress_measure",{get:function(){return e(j,
"progress_measure")},set:function(a){if(!m(a))throw new k(z.ELEMENT_TYPE_MISMATCH);a=parseFloat(a);if(0>a||1<a)throw new k(z.ELEMENT_VALUE_OUT_OF_RANGE);j.progress_measure=a},enumerable:!0});Object.defineProperty(f,"scaled_passing_score",{get:function(){if(t.scaled_passing_score)return w.formatFloat(t.scaled_passing_score);throw new k(z.UNINITIALIZED_ELEMENT_VALUE);},set:a,enumerable:!0});Object.defineProperty(f,"score",{value:new l(j),enumerable:!0});Object.defineProperty(f,"session_time",{get:b,
set:function(a){try{r.timeinterval.parse(a),"undefined"===typeof j.total_time&&(j.total_time=0),j.total_time+=a}catch(b){throw new k(z.ELEMENT_TYPE_MISMATCH);}j.total_time+=_intervalToMSecs(a)},enumerable:!0});Object.defineProperty(this,"success_status",{get:function(){return j.success_status?j.success_status:"unknown"},set:function(a){B.check("success_status",a);"no-credit"!==f.credit&&(j.success_status=a,f.dirty=!0)},enumerable:!0});Object.defineProperty(f,"suspend_data",{get:function(){return e(j,
"suspend_data")},set:function(a){j.suspend_data=a},enumerable:!0});Object.defineProperty(f,"time_limit_action",{get:function(){return"continue,no message"},set:a,enumerable:!0});Object.defineProperty(f,"total_time",{get:function(){return j.total_time?w.formatDuration(j.total_time):w.formatDuration(0)},set:a,enumerable:!0})}var k=com.imc.scorm.scorm2004.Error,r=com.imc.scorm.scorm2004.Parsers,w=com.imc.scorm.scorm2004.Formatters,z=k.Code,B={completion_status:["completed","incomplete","not attempted",
"unknown"],exit:["time-out","suspend","normal","log-out",""],success_status:["passed","failed","unknown"],type:"true-false choice fill-in long-fill-in matching performance sequencing likert numeric other".split(" "),result:["correct","incorrect","unanticipated","neutral"],check:function(a,b){if(!this[a]||-1===this[a].indexOf(b))throw new k(z.ELEMENT_TYPE_MISMATCH);}};Object.defineProperty(n,"children",{value:"comment,location,timestamp",enumerable:!1});Object.defineProperty(h,"children",{value:"id,score,success_status,completion_status,progress_measure,description",
enumerable:!1});Object.defineProperty(x,"children",{value:"id,type,objectives,timestamp,correct_responses,weighting,learner_response,result,latency,description",enumerable:!1});f.Environment=function(a){Object.defineProperty(this,"preset",{value:a});Object.defineProperty(this,"resultPolicy",{value:"prefernew",writable:!0,enumerable:!1});Object.defineProperty(this,"existing",{value:null,writable:!0,enumerable:!1});Object.defineProperty(this,"cmi",{value:new g(a),writable:!0,enumerable:!0});Object.defineProperty(this,
"timestamp",{value:null,writable:!0,enumerable:!1});Object.defineProperty(this,"attemptLimit",{value:0,writable:!0,enumerable:!1});Object.defineProperty(this,"trackedAttempts",{value:[],writable:!0,enumerable:!1});Object.defineProperty(this,"changeListener",{value:null,writable:!0})};f.Environment.prototype.initialize=function(){try{this.cmi.dirty=!1;"preferbest"===this.resultPolicy&&(this.existing=new g(this.preset,this.cmi.store));var b=this.timestamp?"":"ab-initio";switch(this.cmi.store.exit){case "suspend":b=
"resume";break;case "log-out":b="ab-initio";break;default:b=""}Object.defineProperty(this.cmi,"entry",{get:function(){return b},set:a,configurable:!0,enumerable:!0});delete this.cmi.store.exit;"resume"!==b&&(this.cmi=new g(this.preset));var c="normal",d=this.trackedAttempts.length;0<this.attemptLimit&&d>=this.attemptLimit&&(c="review");Object.defineProperty(this.cmi,"mode",{get:function(){return c},set:a,enumerable:!0,configurable:!0});this.timestamp=new Date}catch(e){console.error(e.message)}};f.Environment.prototype.commit=
function(){this.changeListener&&this.changeListener()};f.Environment.prototype.terminate=function(){var a=this.trackedAttempts.length;0<this.attemptLimit&&a<this.attemptLimit&&this.cmi.dirty&&this.trackedAttempts.push(w.formatTimestamp(this.timestamp));if("preferbest"===this.resultPolicy&&this.existing)try{var b=this.existing.store.score.scaled;try{var c=this.cmi.store.score.scaled;console.log("Old score: "+b+" / New score: "+c);b>c&&(console.log("Resetting to old result"),this.cmi=this.existing)}catch(d){}}catch(e){}this.existing=
null;this.commit()};f.Environment.prototype.getStatus=function(){if(Object.keys(this.cmi.store).length){var a={};a.cmi=this.cmi.store;a.timestamp=w.formatTimestamp(this.timestamp);0<this.attemptLimit&&(a.tracked_attempts=this.trackedAttempts);return a}return null};f.Environment.prototype.setStatus=function(a){try{this.cmi=new g(this.preset,a.cmi),0<this.attemptLimit&&(this.trackedAttempts=a.tracked_attempts||[]),this.timestamp=r.timestamp.parse(a.timestamp)}catch(b){console.error(b.message)}};f.Environment.revertActions=
[]})(com.imc.scorm.scorm2004);
(function(f){var m=com.imc.core.navigation.RequirementFactory;f.NavigationPath=function(e,c){for(var a=[],b=0;b<e.requirements.length;++b)(requirement=m.create(e.requirements[b],c))&&a.push(requirement);Object.defineProperty(this,"target",{value:e.target});Object.defineProperty(this,"message",{value:e.message||null});Object.defineProperty(this,"isClear",{get:function(){for(var b=[],e=0;e<a.length;++e)if(a[e].inverted)b.push(a[e]);else if(!a[e].satisfied)return!1;if(0<b.length){for(var f=!0,e=0;e<
b.length;++e)b[e].satisfied||(f=!1);return!f}return(b=c.getEntry(this.target))&&!b.locked?!0:!1}})}})(com.imc.core.navigation);
(function(f){f.Transition=function(f,e,c){var a=null,b={duration:300,ease:"linear"};if(c)try{for(var d in c)b[d]=c[d]}catch(n){}Object.defineProperty(this,"sourceState",{enumerable:!0,writable:!1,value:f});Object.defineProperty(this,"targetState",{enumerable:!0,writable:!1,value:e});this.setStateMachine=function(b){a=b};this.trigger=function(){a&&(null!==f&&a.currentState!==f||a.setCurrentState(e,b))}}})(com.imc.core.statemachine);
(function(f){f.ContentFactory={mapping:{animation:com.imc.content.AnimationContent,interaction:com.imc.content.InteractionContent,glossary:com.imc.content.GlossaryContent,certificate:com.imc.content.CertificateContent,external:com.imc.content.ExternalContent,exam:com.imc.content.ExamContent,video:com.imc.content.VideoContent},create:function(f){if(this.mapping[f.type]){var e=this.mapping[f.type](f.src);if(e)return e.id=f.id,e}return null}}})(com.imc.content);
(function(f){f.Screen=function(f,e){function c(){if(!document.activeElement||!(document.activeElement.tagName&&"input"===document.activeElement.tagName.toLowerCase())){var c=$_P.deviceOrientation;"both"!==b.orientation&&c!==b.orientation||(c=[window.innerWidth,window.innerHeight],c[0]===a[0]&&c[1]===a[1]?c=!1:(a=c,$(b).css({width:a[0]+"px",height:a[1]+"px"}),b.setAttribute("data-screen-height",a[1]),c=!0),c&&$(b).trigger("imc:screenSizeChange"))}}var a=[0,0],b=document.createElement("div");b.id=f;
$(b).addClass("imc-screen");$("body").append(b);Object.defineProperty(b,"isVisible",{get:function(){return $_P.currentScreen===b}});Object.defineProperty(b,"size",{get:function(){return a}});Object.defineProperty(b,"orientation",{value:e||"both"});$(window).resize(function(){window.setTimeout(c,0)});if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)$(window).on("orientationchange",function(){$("body").css("height","100px");c()});$(b).on("imc:screenAboutToShow",c);$(b).on("imc:screenShown",
function(){b.focus()});c();return b}})(com.imc.core.screens);(function(f){f.CSSClassState=function(f,e){this.apply=function(c){$(f).addClass(e);c&&window.setTimeout(c,300)};this.unapply=function(){$(f).removeClass(e)};this.toString=function(){return"[CSSClassState: "+f.id+","+e+"]"}}})(com.imc.core.statemachine);
(function(f){f.StateMachine=function(){var f=null,e=null,c=[],a=[],b=[],d=[];Object.defineProperty(this,"initialState",{enumerable:!0,get:function(){return f}});Object.defineProperty(this,"currentState",{enumerable:!0,get:function(){return e}});this.addState=function(a){c.push(a)};this.setInitialState=function(a){if(f)throw Error("Initial state is already defined");f=a;this.addState(a)};this.setCurrentState=function(a,f){if(-1!==c.indexOf(a)){for(var h=0;h<b.length;++h)b[h]();(h=e)&&h.unapply();window.setTimeout(function(){e=
a},0);a.apply(function(){for(var a=0;a<d.length;++a)d[a]()},f)}};this.addTransition=function(b){a.push(b);b.setStateMachine(this)};this.start=function(){if(!f)throw Error("No initial state defined");e=f;e.apply()};this.beforeTransition=function(a){b.push(a)};this.afterTransition=function(a){d.push(a)}}})(com.imc.core.statemachine);
(function(f){var m=com.imc.animation.AnimationDriver,e=com.imc.animation.Animation;f.State=function(){var c=[];this.assign=function(a,b){c.push([a,b])};this.apply=function(a,b){var d=new m,f=new e;try{for(var l in b)f[l]=b[l]}catch(h){}for(l=0;l<c.length;++l)f.animate(c[l][0],c[l][1]);d.addAnimation(f);d.start(a)};this.unapply=function(){}}})(com.imc.core.statemachine);
(function(f){var m=com.imc.storage.StorageBackend;"#nativeclient"===window.location.hash&&(window.IMCNativeClient={suspendData:{},getSuspendData:function(){return JSON.stringify(this.suspendData)},run:function(e){try{this.suspendData=JSON.parse(e)}catch(c){console.log(c)}$_P.run()},shutdown:function(){$_P.shutdown()}});f.IOSNativeClientStorageBackend=function(e){m.call(this,e);this.read=function(c){try{return window.IMCNativeClient.suspendData[c]}catch(a){return""}};this.write=function(c,a){try{return window.IMCNativeClient.suspendData[c]=
a,!0}catch(b){return console.error(b.message),!1}};this.flush=function(){window.location="nativeclient://commit";return!0};this.endSession=function(){return this.flush()}};Object.defineProperty(f.IOSNativeClientStorageBackend.prototype,"name",{value:"iosnativeclient"});f.IOSNativeClientStorageBackend.isAvailable=function(){return"undefined"!==typeof window.IMCNativeClient}})(com.imc.storage);
(function(f){var m=com.imc.storage.StorageBackend;f.HTML5WebStorageBackend=function(e){m.call(this,e);this.startSession=function(){return!0};this.read=function(c){try{return window.localStorage.getItem(c)}catch(a){return console.error(a.message),""}};this.write=function(c,a){try{return window.localStorage.setItem(c,a),!0}catch(b){return console.error(b.message),!1}}};Object.defineProperty(f.HTML5WebStorageBackend.prototype,"name",{value:"html5webstorage"});f.HTML5WebStorageBackend.isAvailable=function(){return"undefined"!==
typeof window.localStorage}})(com.imc.storage);
(function(f){var m=com.imc.storage.StorageBackend;f.CookieStorageBackend=function(e){var c={};m.call(this,e);Object.defineProperty(this,"compressionEnabled",{value:!0});this.write=function(a,b){c[a]=b;return!0};this.read=function(a){return c[a]?c[a]:""};this.flush=function(){var a=JSON.stringify(c),b=new Date;b.setFullYear(b.getFullYear()+5);document.cookie="data="+a+"; expires="+b.toGMTString()+"; path=/";return!0};this.startSession=function(){var a=document.cookie,b=a.indexOf("data="),d=-1;if(-1!==
b){for(var b=b+5,e=0,f=b;f<a.length;++f)if("{"===a[f])++e;else if("}"===a[f]&&(--e,0===e)){d=f+1;break}d>b&&(a=a.substring(b,d),c=JSON.parse(a))}return!0};this.endSession=function(){return this.flush()}};Object.defineProperty(f.CookieStorageBackend.prototype,"name",{value:"cookie"});f.CookieStorageBackend.isAvailable=function(){return"undefined"!==typeof document.cookie}})(com.imc.storage);
(function(f){function m(c){for(;null==c.API_1484_11&&null!=c.parent&&c.parent!=c;){a++;if(a>b)return null;c=c.parent}return c.API_1484_11}var e=com.imc.storage.StorageBackend,c=null,a=0,b=500;try{var d=window;null!=d.parent&&d.parent!=d&&(c=m(d.parent));null==c&&null!=d.opener&&(c=m(d.opener));null!=c&&!c.Initialize&&(console.log("no initialize available in scorm 2004 api"),c=null)}catch(n){}f.SCORM2004StorageBackend=function(a){e.call(this,a);this.startSession=function(){c.Initialize("");return"false"===
c.SetValue("cmi.exit","suspend")?!1:!0};this.endSession=function(){return"false"===c.Terminate("")?!1:!0};this.read=function(a){return c.GetValue(a)};this.write=function(a,b){return"false"===c.SetValue(a,b.toString())?!1:!0};this.flush=function(){return"false"===c.Commit("")?!1:!0};this.lastError=function(){return c.GetLastError()};this.lastErrorString=function(){return c.GetErrorString(c.GetLastError())}};Object.defineProperty(f.SCORM2004StorageBackend.prototype,"name",{value:"scorm2004"});f.SCORM2004StorageBackend.isAvailable=
function(){return!!c}})(com.imc.storage);
(function(f){function m(a){for(;null==a.API&&null!=a.parent&&a.parent!=a;){b++;if(7<b)return null;a=a.parent}return a.API}function e(){console.error(d.LMSGetLastError()+": "+d.LMSGetErrorString())}var c=com.imc.storage.StorageBackend,a=com.imc.scorm.scorm2004.Parsers,b=0;try{var d;var n=m(window);null==n&&(null!=window.opener&&"undefined"!==typeof window.opener)&&(n=m(window.opener));n.LMSInitialize?d=n:(console.log("no initialize available in scorm 12 api"),d=null)}catch(l){}f.SCORM12StorageBackend=
function(b){console.log("Storage backend SCORM 1.2 created");Object.defineProperty(this,"compressionEnabled",{value:!0});var f={passed:"passed",failed:"failed",unknown:"incomplete"},n={passed:"passed",failed:"failed",incomplete:"unkown"},l={"cmi.location":{key:"cmi.core.lesson_location"},"cmi.success_status":{key:"cmi.core.lesson_status",mapTo12:function(a){return f[a]||"incomplete"}},"cmi.session_time":{key:"cmi.core.session_time",writeonly:!0,mapTo12:function(b){var c=0;try{c=a.timeinterval.parse(b);
b=c%1E3/10;var c=c/1E3,d=c%60,c=c/60,e=c%60,c=c/60;if(0!==b){for(b=b.toFixed(0);2>b.length;)b="0"+b;b="."+b}else b="";c=[c,e,d];for(d=0;d<c.length;++d){for(var g=c[d].toFixed(0);2>g.length;)g="0"+g;c[d]=g}var f=c.join(":");0<b.length&&(f+=b);return f}catch(h){return"00:00"}}},"cmi.suspend_data":{key:"cmi.suspend_data"},"cmi.score.min":{key:"cmi.core.score.min"},"cmi.score.max":{key:"cmi.core.score.max"},"cmi.score.raw":{key:"cmi.core.score.raw"},"cmi.learner_preference.audio_level":{key:"cmi.student_preference.audio",
mapTo12:function(a){return"0"===a?"-1":"0"}},"cmi.learner_preference.audio_captioning":{key:"cmi.student_preference.text"}},g={"cmi.core.lesson_status":{key:"cmi.success_status",mapTo2004:function(a){return n[a]||"unkown"}},"cmi.core.lesson_location":{key:"cmi.core.location"},"cmi.suspend_data":{key:"cmi.suspend_data"},"cmi.core.score.min":{key:"cmi.score.min"},"cmi.core.score.max":{key:"cmi.score.max"},"cmi.core.score.raw":{key:"cmi.score.raw"},"cmi.student_preference.audio":{key:"cmi.learner_preference.audio_level",
mapTo2004:function(a){return"-1"===a?"0":"1"}},"cmi.student_preference.text":{key:"cmi.learner_preference.audio_captioning"}};c.call(this,b);this.startSession=function(){console.log("LMSInitialize: "+d.LMSInitialize(""));return"false"===d.LMSSetValue("cmi.core.exit","suspend")?(e(),!1):!0};this.endSession=function(){return"false"===d.LMSFinish("")?(e(),!1):!0};this.read=function(a){if(g[a]){a=l[a];var b=d.LMSGetValue(a.key);return a.mapTo2004?a.mapTo2004(b):b}return null};this.write=function(a,b){if(l[a]){var c=
l[a];c.mapTo12&&(b=c.mapTo12(b));if("false"===d.LMSSetValue(c.key,b.toString()))return e(),!1}return!0};this.flush=function(){return"false"===d.LMSCommit("")?(e(),!1):!0};this.lastError=function(){return d.LMSGetLastError()};this.lastErrorString=function(){return d.LMSGetErrorString(d.LMSGetLastError())}};Object.defineProperty(f.SCORM12StorageBackend.prototype,"name",{value:"scorm12"});f.SCORM12StorageBackend.isAvailable=function(){return!!d}})(com.imc.storage);
(function(f){var m=com.imc.storage.StorageBackend;f.NullStorageBackend=function(e){m.call(this,e)};Object.defineProperty(f.NullStorageBackend.prototype,"name",{value:"null"});f.NullStorageBackend.isAvailable=function(){return!0}})(com.imc.storage);
(function(f){var m=com.imc.storage.StorageBackend;f.NativeClientStorageBackend=function(e){m.call(this,e);this.read=function(c){try{return NativeClient.getValue(c)}catch(a){return console.error(a.message),""}};this.write=function(c,a){try{return NativeClient.setValue(c,a),!0}catch(b){return console.error(b.message),!1}};this.flush=function(){NativeClient.commit();return!0};this.endSession=function(){return this.flush()}};Object.defineProperty(f.NativeClientStorageBackend.prototype,"name",{value:"nativeclientstorage"});
f.NativeClientStorageBackend.isAvailable=function(){return"undefined"!==typeof window.NativeClient}})(com.imc.storage);
(function(f){function m(a,b){var c=[],e=[];Object.defineProperty(this,"gesture",{value:a});Object.defineProperty(this,"target",{value:b});this.notifyChangeHandlers=function(a){for(var b=0;b<c.length;++b)c[b](a)};this.notifyEndHandlers=function(a){for(var b=0;b<e.length;++b)e[b](a)};this.change=function(a){c.push(a)};this.end=function(a){e.push(a)}}function e(a,b,c){var e=this,f=!1,h=[0,0];m.call(e,a,b,c);try{e.target.addEventListener("gesturestart",function(a){f||(h=[a.pageX,a.pageY])}),e.target.addEventListener("gesturechange",
function(a){f=!0;"swipe"===e.gesture&&e.notifyChangeHandlers([a.pageX-h[0],a.pageY-h[1]]);a.stopPropagation()}),e.target.addEventListener("gestureend",function(a){f&&(f=!1,"swipe"===e.gesture&&e.notifyEndHandlers([a.pageX-h[0],a.pageY-h[1]]),a.stopPropagation())})}catch(t){console.log(t.message)}}function c(a,b,c){function e(a){try{for(var b=[a[0].pageX,a[0].pageY],c=1;c<a.length;++c)b[0]-=(b[0]-a[c].pageX)/2,b[1]-=(b[1]-a[c].pageY)/2;return b}catch(d){return[0,0]}}var f=this,h=!1,t=0,j=[0,0];m.call(f,
a,b,c);try{f.target.addEventListener("touchstart",function(a){h||(t=a.touches.length,2<=t&&(j=e(a.touches)))}),f.target.addEventListener("touchend",function(a){if(h&&2>t){if("swipe"===f.gesture){var b=e(a.touches);f.notifyEndHandlers([b[0]-j[0],b[1]-j[1]])}h=!1}t=a.touches.length}),f.target.addEventListener("touchcancel",function(a){t=a.touches.length;h=!1}),f.target.addEventListener("touchmove",function(a){!h&&2<=t&&(h=!0);h&&"swipe"===f.gesture&&(a=e(a.changedTouches),f.notifyChangeHandlers([a[0]-
j[0],a[1]-j[1]]))})}catch(x){console.error(x.message)}}f.GestureRecognizer="ongesturestart"in window?e:c})(com.imc.touch);(function(f){f.Logger=Object.create(null,{logEnabled:{value:!0,writable:!0},log:{value:function(m){f.Logger.logEnabled&&console.log(m)}}})})(com.imc.util);
(function(f){function m(){for(var a=0;a<this.changeListeners.length;++a)try{this.changeListeners[a](this)}catch(b){console.error(b.message)}}var e=com.imc.scorm.scorm2004.Environment,c=com.imc.core.navigation.RequirementFactory,a=com.imc.core.navigation.NavigationPath,b={glossary:"resources/style/images/thumb-glossary.png",certificate:"resources/style/images/thumb-certificate.png",exam:"resources/style/images/thumb-exam.png"};f.LibraryEntry=function(a,c,f){function h(){m.call(t);t.library.notifyChangeListeners([t])}
var t=this,j=[],x=[];Object.defineProperty(this,"index",{value:f});Object.defineProperty(this,"changeListeners",{value:[]});Object.defineProperty(this,"library",{value:c});Object.defineProperty(this,"locked",{get:function(){if($_P.options.previewMode)return!1;for(var a=[],b=0;b<j.length;++b)if(j[b].inverted)a.push(j[b]);else if(!j[b].satisfied)return!0;if(0<a.length){for(var c=!0,b=0;b<a.length;++b)a[b].satisfied||(c=!1);return c}return!1}});Object.defineProperty(this,"optional",{value:"optional"===
a.relevancy});Object.defineProperty(this,"lockMessage",{get:function(){for(var a,b=0;b<j.length;++b)if(a=j[b],!a.satisfied&&a.message&&a.message.length)return a.message;return null}});Object.defineProperty(this,"jumpMessage",{get:function(){for(var a=0;a<x.length;++a)if(x[a].isClear)return x[a].message;return null}});c={};for(var g in a)c[g]={value:a[g],enumerable:!0};Object.defineProperties(this,c);this.thumbnail||Object.defineProperty(this,"thumbnail",{value:b[this.type]});t.addRequirement=function(a){j.push(a);
a.changeListener=h};t.addNavigationPath=function(a){x.push(a)};t.getNext=function(){for(var a=0;a<x.length;++a)if(x[a].isClear)return x[a].target;return null};try{this.src&&(Object.defineProperty(this,"environment",{value:new e(this.cmi),enumerable:!0}),this.environment.resultPolicy=this.resultpolicy||"prefernew",this.environment.changeListener=function(){for(var a=[],b=t;b;)a.push(b),b=b.parent;t.library.notifyChangeListeners(a);m.call(t)},this.attempt_limit&&0<parseInt(this.attempt_limit)&&(this.environment.attemptLimit=
this.attempt_limit))}catch(k){console.error(k.message)}};Object.defineProperties(f.LibraryEntry.prototype,{progress:{get:function(){if(!this.optional&&this.environment)return"completed"===this.environment.cmi.completion_status||"passed"===this.environment.cmi.success_status?1:0;for(var a=[],b=[this],c=null;0<b.length;)if(c=b.pop(),!c.optional&&c.environment)a.push(c);else if(c.children)for(var e=0;e<c.children.length;++e)b.push(c.children[e]);for(e=b=0;e<a.length;++e)b+=a[e].progress;return!a.length?
1:b/a.length}},status:{get:function(){try{var a="",b="";if(this.environment)try{a=this.environment.cmi.completion_status,b=this.environment.cmi.success_status}catch(c){}return this.locked?"locked":"completed"===a||"passed"===b?"completed":"failed"===b?"failed":this.optional?"optional":this.environment&&this.environment.timestamp?"incomplete":this.environment?"not-attempted":"unknown"}catch(e){return console.error(e.message),"unknown"}}},statusText:{get:function(){return this.environment?$_P.stringTable.getString("status-"+
this.status):$_P.stringTable.getString("progress-label",parseInt(100*this.progress))}}});f.LibraryEntry.prototype.addChangeListener=function(a){this.changeListeners.push(a)};f.LibraryEntry.prototype.removeChangeListener=function(a){a=this.changeListeners.indexOf(a);-1!==a&&this.changeListeners.splice(a,1)};f.LibraryEntry.prototype.resolveRequirements=function(){if(this.accessrequirements&&this.accessrequirements.length)for(var a=0;a<this.accessrequirements.length;++a){var b=c.create(this.accessrequirements[a],
this.library);b&&this.addRequirement(b)}};f.LibraryEntry.prototype.resolveNavigationPaths=function(){if(this.alternatenavigationpaths&&this.alternatenavigationpaths.length)for(var b=0;b<this.alternatenavigationpaths.length;++b)this.addNavigationPath(new a(this.alternatenavigationpaths[b],this.library))}})(com.imc.core);
(function(f){var m=com.imc.util.ControlLoader,e=com.imc.animation.AnimationDriver;f.SubtitleBox=function(c){var a=this,b=null,d=!0,f=null,l=!1;a.load=function(d){(new m).load("subtitlebox",function(e){b=e;$(b).css("visibility","hidden");$(c).append(b);f=b.querySelector(".text");a.hide();d&&d()})};a.display=function(a){f&&(0===a.length?$(b).addClass("empty"):$(b).removeClass("empty"),f.innerHTML=a,l=!0)};a.show=function(){b&&!d&&($(b).css("visibility","visible"),d=!0,Modernizr.cssanimations?(e.runCSSAnimation(b,
"fade-in",200),!0==d&&$(b).css("display","block")):$(b).css("display","block"))};a.hide=function(){b&&d&&(d=!1,Modernizr.cssanimations?e.runCSSAnimation(b,"fade-out",200,function(){!1===d&&$(b).css("display","none")}):$(b).css("display","none"))};a.reset=function(){l=!1;a.hide()};Object.defineProperty(a,"hasText",{get:function(){return l}})}})(com.imc.controls);(function(f){var m=com.imc.core.statemachine.Transition;f.EventTransition=function(e,c,a,b,d){var f=this;m.call(this,a,b,d);$(e).on(c,function(){f.trigger()})}})(com.imc.core.statemachine);
var ContentFactory=com.imc.content.ContentFactory;(function(f){f.Preloader=function(){var f=document.createElement("div"),e=null;f.id="imc-content-preloader";$("body").append(f);$(f).css({display:"none"});f.loadContent=function(c){e&&($(e).remove(),e=null);if(c){if(c=ContentFactory.create(c))e=c,$(f).append(e),e.load(),$(e).on("imc:ready",function(){console.log(" ")})}else console.log("No Entry to preload")};f.content=function(){return e};f.takeContent=function(){var c=e;e=null;return c};return f}})(com.imc.util);
(function(f){var m=com.imc.core.screens.Screen,e=com.imc.core.statemachine.StateMachine,c=com.imc.core.statemachine.CSSClassState,a=com.imc.core.statemachine.Transition,b=com.imc.animation.AnimationDriver,d=com.imc.animation.Animation,n=com.imc.util.ControlLoader;f.OverlayViewport=function(){function f(){g&&(g.cleanup(),$(g).off("imc:ready",h),x.removeChild(g),g=null)}function h(){g=this;g.viewport=j;j.setAttribute("data-content-type",g.type);t();if(Modernizr.cssanimations)b.runCSSAnimation(g,"fade-in",
500);else{var a=new d(300,0,"quadin");$(g).css("opacity",0);a.animate(g,{opacity:1});b.run(a)}$(x).append(g);g.present();loading_=!1;$(this).off("imc:ready",h);"loading"===j.contentState&&(j.contentState="default")}function t(){var a=[$(x).width(),$(x).height()];g&&g.fitViewport&&g.fitViewport(a)}var j=m.call(this,"imc-overlayviewport","landscape"),x=document.createElement("div");x.id="imc-overlayviewport-container";j.appendChild(x);var g=null;Object.defineProperty(j,"content",{get:function(){return g},
set:function(a){f();a&&(loading_=!0,j.contentState="loading",$(a).on("imc:ready",h),a.load())},enumerable:!0});Object.defineProperty(j,"contentState",{get:function(){return j.getAttribute("data-content-state")},set:function(a){j.setAttribute("data-content-state",a)}});j.enableControls=function(){};j.disableControls=function(){};$(j).on("imc:screenSizeChange",function(a){t();a.stopPropagation()});$(j).on("imc:action",function(a,c,e){"overlayviewport"===c&&("close"===e&&(Modernizr.cssanimations?b.runCSSAnimation(g,
"fade-out",500,f):(c=new d(300,0,"quadin"),c.animate(g,{opacity:0}),e=new b,e.addAnimation(c),e.start(f)),$_P.hideContentOverlay()),a.stopPropagation())});j.addContentClass=function(a){$(j).addClass(a)};j.removeContentClass=function(a){$(j).removeClass(a)};var k=new e,r=new c(j,"default");k.setInitialState(r);var w=new c(j,"controls");k.addState(w);k.addTransition(new a(j,"imc:tap",r,w));r=new a(j,"imc:tap",w,r);k.addTransition(r);k.start();var z=new n({deviceFamilySpecific:!0});z.load("overlayviewport",
function(a){j.appendChild(a);z=null;$(window).trigger("imc:loaded")});return j}})(com.imc.core.screens);(function(f){var m=com.imc.core.statemachine.State;f.ScreenState=function(e){var c=this,a=new m(e);$.extend(c,a);Object.defineProperty(this,"screen",{value:e});this.apply=function(b,d){$(c.screen).addClass("active");a.apply(function(){b&&b();$(c.screen).trigger("imc:screenShown")},d);$_P.currentScreen=c.screen};this.unapply=function(){$(c.screen).removeClass("active");a.unapply()}}})(com.imc.core.statemachine);
(function(f){var m=com.imc.util.Watchable,e=["resources/assets/dummy.m4a","resources/assets/dummy.ogg"];f.AudioPlayer=function(){function c(a){for(var b=0;b<a.length;++b){var c=/\.([a-z0-9]{3,4})$/i.exec(a[b]);if(c&&(c.length&&!(2>c.length))&&c[1].toLowerCase()===v)return a[b]}return a[0]?a[0]:null}function a(){if(B){console.log("SETUP and NOTIFY "+g.src+" "+Date.now());if(0!==g.currentTime)try{g.currentTime=0;window.setTimeout(a,20);return}catch(c){window.setTimeout(a,20);return}B=!1;$("body").removeClass("audio-loading");
b.onready&&(console.log("READY "+g.src+" "+Date.now()),b.onready(),b.onready=null)}}var b=this;m.call(b);var d=!1,f=!1,l=!1,h=!1,t=!1,j=!1,x=!1,g=document.createElement("audio"),k={},r=null,w=null,z=null,B=!1,A=0;try{window.webkitAudioContext&&(r=new webkitAudioContext);g.id="imc-audioplayer";g.preload="auto";$("body").append(g);var v="m4a";"probably"===g.canPlayType('audio/ogg; codecs="vorbis"')&&(v="ogg");g.src=c(e);j=(t=/iPhone|iPad|iPod/i.test(navigator.platform))&&!r;x=/.*Android.*/.test(navigator.userAgent)}catch(p){}b.supportedFile=
c;b.prepare=function(){d||(g.play(),d=!0)};b.setTrack=function(a){l=!1;if(a=c(a))console.log("SET TRACK "+a+" "+Date.now()),B=!0,g.src=a,g.load(),l=!0,f=!1,$("body").addClass("audio-loading"),A=0;b.stopEventAudio()};b.synchronizeTime=function(a,c){A=a;if(!l||!h||t)return a;h=!1;var d;a:{try{if(!f||b.muted)g.currentTime=Math.min(g.duration,a/1E3);else if(a<1E3*g.duration){var e=1E3*g.currentTime;if(50<Math.abs(e-a)){d=Math.max(c,e);break a}}}catch(k){}d=a}return d};b.clear=function(){$("body").removeClass("audio-loading");
b.onready=null;l=!1;w=null;try{g.pause();g.src=c(e);g.load();for(var a in k)r||$(k[a]).remove(),delete k[a]}catch(d){console.error(d.message)}};b.addEventAudio=function(a,d){if(!j){var e=c(d);if(r){var f=new XMLHttpRequest;f.open("GET",e,!0);f.responseType="arraybuffer";f.onload=function(){try{r.decodeAudioData(f.response,function(c){k[a]=c;w===a&&b.playEventAudio(a)})}catch(c){console.error(c.message)}};f.send()}else{var g=new Audio;$("body").append(g);g.src=e;g.preload=!0;g.oncanplaythrough=function(){k[a]=
this;this.oncanplaythrough=null;w===a&&b.playEventAudio(a)}}}};b.playEventAudio=function(a){b.stopEventAudio();if(!b.muted)if(k[a]){w=null;try{if(r){var c=r.createBufferSource();c.connect(r.destination);c.buffer=k[a];c.playing=!0;c.onended=function(){this.playing=!1};c.start?c.start(0):c.noteOn(0);z=c}else k[a].pause(),k[a].currentTime=0,k[a].play(),z=k[a];z.id=a}catch(d){console.error(d.message)}}else w=a};b.stopEventAudio=function(a){if(z){if(a&&z.id!==a)return!1;a=!1;try{r?(z.stop?z.stop(0):z.noteOff(0),
a=z.playing):(a=z.playing,z.pause())}catch(b){}z=null;return a}return!1};Object.defineProperty(this,"currentTime",{get:function(){parseInt(1E3*g.currentTime)},set:function(a){try{g.currentTime=a/1E3}catch(b){}}});Object.defineProperty(this,"paused",{get:function(){return!f},set:function(a){a!==!f&&(f=!a,l&&(!b.muted&&f?g.play():g.pause()))}});b.defineWatchableProperty("muted",!1,function(a){a&&b.stopEventAudio();$(window).trigger("imc:mutedChanged",a);l&&(!a&&f?(g.currentTime=Math.min(g.duration,
A/1E3),g.play()):g.pause())});Object.defineProperty(this,"needsUserInteraction",{get:function(){return t||x}});Object.defineProperty(this,"isPrepared",{get:function(){return d}});Object.defineProperty(this,"onready",{value:null,writable:!0});$(g).on("loadedmetadata",function(){try{g.currentTime=0}catch(a){}});$(g).on("canplaythrough",a);$(g).on("error",function(){console.log("AUDIO LOADING ERROR : new Track = "+B);B&&g.load()});$(g).on("timeupdate",function(){h=!0})}})(com.imc.media);
(function(f){var m=com.imc.util.Watchable;f.Navigator=function(e,c){function a(b){if(b.children)for(var c=0;c<b.children.length;++c)a(b.children[c]);else b=f.getEntry(b.id),j.push(b),x[b.id]=b}function b(){var a=null,b=!1,c=!1,e=$_P.library.getEntry(t);e&&(e.navigation_options&&(b=!!e.navigation_options.disable_forward,c=!!e.navigation_options.disable_back),a=e.getNext());if(d.currentRootContent&&t!==d.currentRootContent)d.canNavigateBack=!c,d.enableBackButton=d.canNavigateBack,d.canNavigateForward=
!1,d.enableNextButton=!1,d.canSkipForward=!1;else{!a&&h<j.length-1&&(a=j[h+1]);e=null;0<h&&(e=j[h-1]);d.canNavigateForward=a&&!a.locked;d.enableNextButton=!b&&d.canNavigateForward;a=d.canNavigateForward;if(!a)for(b=h+1;b<j.length;++b)if(!j[b].locked){a=!0;break}d.canSkipForward=a;d.canNavigateBack=e&&!e.locked;d.enableBackButton=!c&&d.canNavigateBack}}var d=this,f=e,l=!0,h=-1,t=null,j=[],x={};Object.defineProperty(d,"currentContent",{get:function(){return $_P.library.getEntry(t)}});Object.defineProperty(d,
"nextContent",{get:function(){var a=d.currentContent.getNext();return a?a:j[h+1]}});m.call(d);Modernizr.history&&window.addEventListener("popstate",function(){try{l=!0,$(window).trigger("imc:navigationRequest",history.state.id)}catch(a){}});a(c);f.addChangeListener(b);Object.defineProperty(d,"length",{get:function(){return j.length}});d.defineWatchableProperty("canNavigateBack",!1);d.defineWatchableProperty("canNavigateForward",!1);d.defineWatchableProperty("canSkipForward",!1);d.defineWatchableProperty("enableNextButton",
!0);d.defineWatchableProperty("enableBackButton",!0);d.defineWatchableProperty("currentRootContent",null);d.data=function(a,b){try{var c=j[a];switch(b){case "identifier":return c.id;case "displaytext":return c.title;case "decorationimage":return c.thumbnail;default:return null}}catch(d){return null}};d.navigateForward=function(){if(!d.canNavigateForward)return null;var a=x[t];if(a){a.environment.commit();var b=a.getNext();if(b)return(a=a.jumpMessage)&&$_P.jumpMessage.show(a),d.navigateTo(b)}return d.navigateTo(j[h+
1].id)};d.skipForward=function(){if(d.canNavigateForward)return d.navigateForward();if(!d.canSkipForward)return null;for(var a=h+1;a<j.length;++a)if(!j[a].locked)return d.navigateTo(j[a].id);return null};d.navigateBack=function(){return!d.canNavigateBack?null:d.currentRootContent&&t!==d.currentRootContent?d.navigateTo(d.currentRootContent):d.navigateTo(j[h-1].id)};d.canNavigateTo=function(a){return a.locked?!1:!0};d.navigateTo=function(a){var c=f.getEntry(a);if(!c)return null;for(;c.children;){if(!c.children.length)return null;
c=c.children[0]}a=c.id;if(!d.canNavigateTo(c))return null;if(Modernizr.history&&a!==t){var e={id:a};l?(history.replaceState(e,null),l=!1):history.pushState(e,null)}e=!1;t&&!x[t]&&(e=!0);d.navigateFromHidden=e;t=a;x[a]&&(d.currentRootContent=a,h=j.indexOf(c));b();return c};b()}})(com.imc.core.navigation);
(function(f){var m=com.imc.core.screens.Screen,e=com.imc.util.ControlLoader;f.ErrorScreen=function(){var c=m.call(this,"imc-errorscreen"),a=new e,b=null,d=null,f="",l="",h="",t=null;Object.defineProperty(c,"header",{get:function(){return h},set:function(a){h=a;if(a=t.querySelector(".header"))a.innerHTML=h}});Object.defineProperty(c,"code",{get:function(){return d},set:function(a){d=a;if(a=t.querySelector(".code"))a.innerHTML=d}});Object.defineProperty(c,"message",{get:function(){return f},set:function(a){f=
a;if(a=t.querySelector(".message"))a.innerHTML=f}});Object.defineProperty(c,"description",{get:function(){return l},set:function(a){l=a;if(a=t.querySelector(".description"))a.innerHTML=l}});Object.defineProperty(c,"retry",{get:function(){return b},set:function(a){b=a;(a=t.querySelector(".buttons"))&&$(a).css("display",!b?"none":"block")}});a.load("errorscreen",function(a){t=a;c.appendChild(t);$(t).on("imc:action",function(a,c,d){if("errorscreen"===c){switch(d){case "retry":console.log("Trigger Retry"),
b&&($("#imc-errorscreen #imc-retry-indicator").css("display","block"),!0==b()&&$_P.hideErrorScreen(),window.setTimeout(function(){$("#imc-errorscreen #imc-retry-indicator").css("display","none")},500))}a.stopPropagation()}});$(window).trigger("imc:loaded")});$(c).on("imc:screenAboutToShow",function(){});return c}})(com.imc.core.screens);
(function(f){f.StorageBackendFactory={backends:[com.imc.storage.SCORM2004StorageBackend,com.imc.storage.SCORM12StorageBackend,com.imc.storage.IOSNativeClientStorageBackend,com.imc.storage.NativeClientStorageBackend,com.imc.storage.HTML5WebStorageBackend,com.imc.storage.CookieStorageBackend,com.imc.storage.NullStorageBackend],create:function(m){for(var e,c=0;c<f.StorageBackendFactory.backends.length;++c)if((e=f.StorageBackendFactory.backends[c])&&e.isAvailable())return new e(m);return null}}})(com.imc.storage);
(function(f){var m=com.imc.core.screens.Screen,e=com.imc.util.Watchable,c=com.imc.util.ControlLoader;f.VideoScreen=function(){function a(){var a=$("body").width(),b=$("body").height(),c=d.videoWidth/d.videoHeight;if(c){var e=a/c,c=b/(1/c);a-c<b-e?b=e:a=c}a||(a=$("body").width());b||(b=$("body").height());$(d).css({width:a+"px",height:b+"px"});$(h).css({width:a+"px",height:b+"px"})}var b=m.call(this,"imc-videoscreen"),d=document.createElement("video"),f=!1,l=!1,h=null,t=null,j=!1;$(b).append(d);e.call(b);
var x=new c;d.preload="metadata";Object.defineProperty(b,"isPrepared",{get:function(){return j}});Object.defineProperty(b,"duration",{get:function(){return d.duration}});Object.defineProperty(b,"currentTime",{get:function(){return d.currentTime||0},set:function(a){d.currentTime=a}});Object.defineProperty(b,"content",{value:b});Object.defineProperty(b,"timeChangeListener",{value:null,writable:!0});b.defineWatchableProperty("paused",!0,function(a){t&&(a?$(t).css("display","block"):$(t).css("display",
"none"));a?d.pause():d.play()});b.defineWatchableProperty("muted",!1,function(a){d.muted=a});Object.defineProperty(b,"seeking",{get:function(){return f},set:function(a){a!==f&&(f=a,!0===a?(l=b.paused,d.pause()):l||d.play())}});Object.defineProperty(b,"atEnd",{get:function(){return d.currentTime===d.duration}});$(b).on("tap",function(a){$_P.hideVideoScreen();a.stopPropagation()});b.setVideoUrl=function(c){b.paused=!0;d.src=c||void 0;a()};$(b).on("imc:screenSizeChange",a);$(b).on("imc:action",function(a,
b,c){"videoscreen"===b&&"close"===c&&($_P.hideVideoScreen(),a.stopPropagation())});d.addEventListener("loadedmetadata",function(){a();document.getElementById("imc-videoscreen-progress").timeline=b});d.addEventListener("canplay",function(){d.play()},!1);d.addEventListener("timeupdate",function(){b.timeChangeListener&&b.timeChangeListener(d.currentTime)},!1);d.addEventListener("play",function(){b.pause=!1},!1);d.addEventListener("playing",function(){b.paused=!1},!1);d.addEventListener("pause",function(){b.paused=
!0},!1);b.prepare=function(){j||(d.play(),j=!0)};b.initialize=function(){$_P.deviceFamily===com.imc.core.DeviceFamily.TABLET&&(t=document.createElement("div"),$(b).append(t),$(t).addClass("imc-video-playbutton"),$(t).on("tap",function(a){$(h).removeClass("active");b.paused=!1;a.stopPropagation()}));x.load("videoscreen",function(a){h=a;b.appendChild(a);document.getElementById("imc-videoscreen-pause").bind(b,"paused");document.getElementById("imc-toggle-videoscreen-muted").bind(b,"muted");$(h).on("tap",
function(a){$_P.deviceFamily!==com.imc.core.DeviceFamily.DESKTOP&&$(h).toggleClass("active");a.stopPropagation()});$(h).on("mouseenter",function(){$(h).addClass("active")});$(h).on("mouseleave",function(){$(h).removeClass("active")});$(window).trigger("imc:loaded")})};return b}})(com.imc.core.screens);
(function(f){var m=com.imc.core.screens.Screen,e=com.imc.touch.GestureRecognizer,c=com.imc.animation.AnimationDriver,a=com.imc.animation.Animation,b=com.imc.util.ControlLoader;f.HomeScreen=function(){var d=m.call(this,"imc-homescreen"),f=0;if(Modernizr.touch){var l=new e("swipe",d);l.change(function(a){f=Math.max(0,a[1]);$(d).css("transform","translateY("+f.toString()+"px)")});l.end(function(){if(0.3>f/window.innerHeight){var b=new a(300,0,"quadin");b.animate(d,{transform:"none"});f=0;c.run(b)}else $_P.hideHomeScreen()})}(new b).load("homescreen",
function(a){d.appendChild(a);$(window).trigger("imc:loaded")});$(d).on("imc:viewItemTapped",function(a,b){b&&$_P.navigateTo(b);a.stopPropagation();$_P.hideHomeScreen()});$(d).on("imc:lockedItemTapped",function(a,b){var c=$_P.library.getEntry(b);c&&$_P.lockMessage.show(c.lockMessage);a.stopPropagation()});$(d).on("imc:screenAboutToShow",function(){if(!d.isVisible){var a=document.getElementById("imc-homescreen-title");a&&(a.innerHTML=document.title);window.setTimeout(function(){var a=d.querySelectorAll(".imc-view");
try{for(var b=0;b<a.length;++b)a[b].scrollToCurrent()}catch(c){}},1E3)}});$(d).on("tap",function(a){$_P.hideHomeScreen();a.stopPropagation()});return d}})(com.imc.core.screens);(function(f){var m=com.imc.core.screens.Screen,e=com.imc.util.ControlLoader;f.InfoScreen=function(){var c=m.call(this,"imc-infoscreen","portrait");(new e).load("infoscreen",function(a){c.appendChild(a);$(window).trigger("imc:loaded")});return c}})(com.imc.core.screens);
(function(f){function m(a){for(var b=[],c=0;c<arguments.length;++c)b.push(arguments[c].toString().substring(0,80));e.log("API."+a+'("'+b.join('", "')+'")')}var e=com.imc.util.Logger,c=com.imc.scorm.scorm2004.Error,a=com.imc.scorm.scorm2004.Environment,b=c.Code;f.Adapter=function(){function d(){t.PersistData()}function f(){window.clearTimeout(w);w=window.setTimeout(l,100)}function l(){j.commit();$_P.storage&&z&&($_P.storage.commit(),z=!1,window.clearTimeout(B),B=window.setTimeout(d,6E5))}function h(a,
b){a.errorCode?(x=a.errorCode,g=a.diagnostic):(x=b,g=a.message)}var t=this,j=null,x=0,g="",k=!1,r=!1,w=0,z=!1,B=window.setTimeout(d,6E5);Object.defineProperty(t,"environment",{get:function(){return j},set:function(a){e.log("Setting new environment ...");j=a;r=k=!1}});t.Initialize=function(a){m("Initialize",a);x=b.NO_ERROR;try{if(""!==a)throw new c(b.GENERAL_ARGUMENT_ERROR);if(k)throw new c(b.ALREADY_INIT);if(r)throw new c(b.CONTENT_INSTANCE_TERM);j.initialize();k=!0;r=!1}catch(d){return h(d,b.GENERAL_INIT_FAILURE),
"false"}return"true"};t.Terminate=function(a){m("Terminate",a);try{x=b.NO_ERROR;if(""!==a)throw new c(b.GENERAL_ARGUMENT_ERROR);if(k){if(r)throw new c(b.TERM_AFTER_TERM);}else throw new c(b.TERM_BEFORE_INIT);f();j.terminate();r=!0}catch(d){return h(d,b.GENERAL_TERM_FAILURE),"false"}return"true"};t.Commit=function(a){m("Commit",a);x=b.NO_ERROR;try{if(""!==a)throw new c(b.GENERAL_ARGUMENT_ERROR);if(k){if(r)throw new c(b.COMMIT_AFTER_TERM);}else throw new c(b.COMMIT_BEFORE_INIT);f()}catch(d){h(d,b.GENERAL_COMMIT_FAILURE)}return"true"};
t.GetValue=function(a){m("GetValue",a);x=b.NO_ERROR;try{if(k){if(r)throw new c(b.RETRIEVE_AFTER_TERM);}else throw new c(b.RETRIEVE_BEFORE_INIT);var d=a.split(".");a=j;for(var e=0;e<d.length-1;++e){var f=new Number(d[e]);if("NaN"!==f.toString())if(a.isPackedArray)a=a.get(f.valueOf());else throw new c(b.UNDEFINED_ELEMENT);else if(a.propertyIsEnumerable(d[e]))a=a[d[e]];else throw new c(b.UNDEFINED_ELEMENT);}var g=d[d.length-1];if(!a.propertyIsEnumerable(g))throw new c(b.UNDEFINED_ELEMENT);return a[g]}catch(l){return h(l,
b.GENERAL_GET_FAILURE),""}};t.SetValue=function(d,e){m("SetValue",d,e);x=b.NO_ERROR;a.revertActions=[];var f;try{if(k){if(r)throw new c(b.STORE_AFTER_TERM);}else throw new c(b.STORE_BEFORE_INIT);var g=d.split("."),l=j;for(f=0;f<g.length-1;++f){var n=new Number(g[f]);if("NaN"!==n.toString())if(l.isPackedArray)l=l.set(n.valueOf());else throw new c(b.UNDEFINED_ELEMENT);else if(l.propertyIsEnumerable(g[f]))l=l[g[f]];else throw new c(b.UNDEFINED_ELEMENT);}l[g[g.length-1]]=e;return"true"}catch(t){h(t,b.GENERAL_SET_FAILURE);
for(f=0;f<a.revertActions.length;++f)a.revertActions[f]();return"false"}};t.PersistData=function(){console.log("Adapter.PersistData called");z=!0};t.GetLastError=function(){m("GetLastError");return x.toString()};t.GetDiagnostic=function(a){m("GetDiagnostic",a);return""!==a?"":g.substring(0,254)};t.GetErrorString=function(){m("GetErrorString");return c.resolveMessage(x)};return Object.freeze(t)};Object.defineProperty(f.Adapter.prototype,"version",{value:"1.0"})})(com.imc.scorm.scorm2004);
(function(f){var m=com.imc.core.screens.Screen,e=com.imc.util.ControlLoader;f.LoadScreen=function(){var c=m.call(this,"imc-loadscreen"),a=null;(new e).load("loadscreen",function(b){a=b;$(a).css({position:"absolute",top:"0px",left:"0px"});c.appendChild(a);$(window).trigger("imc:loaded")});return c}})(com.imc.core.screens);
(function(f){function m(c,a,b){var d=c.getEntry(b.id);if(d&&(a&&Object.defineProperty(d,"parent",{value:a,enumerable:!0}),b.children)){a=[];for(var e=null,f=0;f<b.children.length;++f)(e=c.getEntry(b.children[f].id))&&a.push(e);Object.defineProperty(d,"children",{value:a,enumerable:!0})}if(b.children)for(f=0;f<b.children.length;++f)m(c,d,b.children[f])}var e=com.imc.core.LibraryEntry;f.Library=function(c,a){for(var b={},d=[],f=c.length,l=[],h,t=0;t<c.length;++t){h=c[t];if(!h.id)throw Error("Found library entry without ID");
if(b[h.id])throw Error("Found duplicate library entry ID");var j=new e(c[t],this,t);b[h.id]=j;d[t]=j}Object.defineProperty(this,"length",{get:function(){return f}});this.getEntry=function(a){return b[a]?b[a]:null};this.getEntryAt=function(a){return 0<=a&&a<f?d[a]:null};this.each=function(a){for(var b=0;b<f;++b)a.call(this,b,d[b])};this.addChangeListener=function(a){l.push(a)};this.removeChangeListener=function(a){a=l.indexOf(a);-1!==a&&l.splice(a,1)};this.notifyChangeListeners=function(a){for(var b=
0;b<l.length;++b)try{l[b](a)}catch(c){console.error(c.message)}};this.prepare=function(){for(var a=null,c=0;c<d.length;++c)if(a=d[c],a.resolveRequirements(),a.resolveNavigationPaths(),a.excludedinteractions)for(var e=0;e<a.excludedinteractions.length;++e){var f=b[a.excludedinteractions[e]];f&&(f.excludedinteractions||Object.defineProperty(f,"excludedinteractions",{value:[]}),-1===f.excludedinteractions.indexOf(a.id)&&f.excludedinteractions.push(a.id))}};try{m(this,null,a)}catch(x){console.error(x.message)}}})(com.imc.core);
(function(f){var m=com.imc.util.ControlLoader,e=com.imc.animation.AnimationDriver;f.JumpMessageBox=function(){var c=this,a=null,b=0;(new m).load("jumpmessage",function(b){a=b;$(a).css("visibility","hidden");$("body").append(a);c.hide();$(a).on("tap",function(a){c.hide();a.stopPropagation()})});c.show=function(d){if(a&&d){var n=a.querySelector(".message");n&&(n.innerHTML=d);$(a).css("visibility","visible");Modernizr.cssanimations?($(a).css("display","block"),e.runCSSAnimation(a,"show-jumpmessage",
300)):$(a).css("display","block");b=window.setTimeout(function(){c.hide()},f.JumpMessageBox.HIDE_TIMEOUT)}};c.hide=function(){a&&(window.clearTimeout(b),Modernizr.cssanimations?e.runCSSAnimation(a,"hide-jumpmessage",300,function(){$(a).css("display","none")}):$(a).css("display","none"))}};f.JumpMessageBox.HIDE_TIMEOUT=7E3})(com.imc.controls);
(function(f){var m=com.imc.util.ControlLoader,e=com.imc.animation.AnimationDriver;f.LockMessageBox=function(){var c=this,a=null,b=!1;(new m).load("lockmessage",function(b){a=b;$(a).css("visibility","hidden");$(a).on("imc:action",function(a,b,d){if("lockmessage"===b){switch(d){case "close":c.hide()}a.stopPropagation()}});$("body").append(a);c.hide()});c.hide=function(){a&&b&&(b=!1,Modernizr.cssanimations?e.runCSSAnimation(a,"hide-lockmessage",300,function(){$(a).css("display","none")}):$(a).css("display",
"none"))};c.show=function(c){if(a||!b){$(a).css("visibility","visible");b=!0;var f=a.querySelector(".message");f&&(c||(c=$_P.stringTable.getString("lock-message")),f.innerHTML=c);Modernizr.cssanimations?e.runCSSAnimation(a,"show-lockmessage",300):$(a).removeAttr("style");$(a).css("display","block")}};$($_P).on("imc:currentContentChange",function(){c.hide()})}})(com.imc.controls);
(function(f){f.StringTable=function(f){var e={},c="lang/"+f+".json";this.getString=function(a){var b=arguments;return(e[a]||"").replace(/\$([1-9]|$)/g,function(a,c){if("$"===c)return"$";var e=parseInt(c);try{return b[e]}catch(f){return""}})};this.load=function(a){$.getJSON(c,function(b){e=b;a&&a()}).fail(function(){$.getJSON("lang/en.json",function(b){e=b;a&&a()})})}}})(com.imc.core);
(function(f){f.ContentTreeDataSource=function(f,e){function c(a){var e=[];if(a.children)for(var f=0;f<a.children.length;++f)c(a.children[f]),e.push(a.children[f].id);b[a.id]=e}var a=this,b={};c(e);f.addChangeListener(function(b){for(var c=0;c<b.length;++c)$(a).trigger("imc:dataChange",b[c].id)});Object.defineProperty(this,"rootIdentifier",{value:e.id});this.childIdentifiers=function(a){try{return b[a]}catch(c){return null}};this.data=function(a,b){try{var c=f.getEntry(a);switch(b){case "identifier":return c.id;
case "displaytext":return c.title;case "decorationimage":return c.thumbnail;case "statustext":return c.statusText;default:return c[b]?c[b]:null}}catch(e){return null}}}})(com.imc.core);
(function(f){function m(){return null}var e={encodeMapping:{suspenddataversion:"0",records:"1",id:"2",cmi:"3",timestamp:"4",tracked_attempts:"5",comments_from_learner:"6",location:"7",comment:"8",completion_status:"9",exit:"a",interactions:"b",type:"c",objectives:"d",correct_responses:"e",pattern:"f",weighting:"g",learner_response:"h",result:"i",latency:"j",description:"k",score:"l",min:"m",max:"n",raw:"o",scaled:"p",success_status:"q",progress_measure:"r",suspend_data:"s",total_time:"t"},valueHandlers:{id:function(a){return a.substr(8)},
2:function(a){return"urn:imc:"+a},timestamp:function(){return 1},4:function(){return"2000"},tracked_attempts:function(a){if($.isArray(a))for(var b=0;b<a.length;++b)a[b]=b+1;return a},learner_response:m,location:m},encodeKeywords:{normal:"%A",suspend:"%B",completed:"%C",incomplete:"%D",passed:"%E",failed:"%F",unknown:"%G",other:"%H",correct:"%J",incorrect:"%K"},decodeMapping:{},decodeKeywords:{},code:function(a,b,c){if($.isArray(a)){for(var e=[],f=0;f<a.length;++f)e.push(this.code(a[f],b,c));return e}if("object"===
typeof a){e={};for(f in a)if(b[f]||(b[f]=f),this.valueHandlers[f]){var h=this.valueHandlers[f](a[f]);null!==h&&(e[b[f]]=h)}else e[b[f]]=this.code(a[f],b,c);return e}return"string"===typeof a?c[a]?c[a]:a:a},compress:function(a){return this.code(a,this.encodeMapping,this.encodeKeywords)},uncompress:function(a){return this.code(a,this.decodeMapping,this.decodeKeywords)}},c;for(c in e.encodeMapping)e.decodeMapping[e.encodeMapping[c]]=c;for(c in e.encodeKeywords)e.decodeKeywords[e.encodeKeywords[c]]=c;
f.Compressor=e;f.SuspendData=function(a){Object.defineProperty(this,"compressionEnabled",{value:!1,writable:!0});var b={suspenddataversion:"1.0",records:[]};this.serialize=function(){var c=[];a.each(function(a,e){if(e.environment)try{var f=e.environment.getStatus();if(f)f.id=e.id,c.push(f);else for(f=0;f<b.records.length;++f){var m=b.records[f];if(m.id==e.id){c.push(m);break}}}catch(j){console.error(j.message)}});b.records=c;return this.compressionEnabled?JSON.stringify(e.compress(b)):JSON.stringify(b)};
this.restore=function(b){try{var c=this.compressionEnabled?e.uncompress(JSON.parse(b)):JSON.parse(b);for(b=0;b<c.records.length;++b){var f=c.records[b],h=a.getEntry(f.id);h.environment&&h.environment.setStatus(f)}}catch(m){console.error(m.message)}}}})(com.imc.storage);
(function(f){var m=com.imc.core.screens.Screen,e=com.imc.controls.SubtitleBox,c=com.imc.touch.GestureRecognizer,a=com.imc.animation.AnimationDriver,b=com.imc.animation.Animation,d=com.imc.core.statemachine.StateMachine,n=com.imc.core.statemachine.CSSClassState,l=com.imc.core.statemachine.Transition,h=com.imc.core.statemachine.EventTransition,t=com.imc.util.ControlLoader,j=com.imc.util.Watchable;f.Viewport=function(){function x(){r&&(r.viewport=null,F.removeChild(r),$(F).removeAttr("style"),r=null);
r=this;r.viewport=k;k.setAttribute("data-content-type",r.type);k.subtitleBox.reset();g();if(Modernizr.cssanimations)a.runCSSAnimation(r,"fade-in",500);else{var c=new b(300,0,"quadin");$(r).css("opacity",0);c.animate(r,{opacity:1});a.run(c)}$(F).append(r);k.contentState="default";r.present();k.isVisible||r.suspend();A=!1;$(this).off("imc:ready",x);z.trigger();$_P.preloader.loadContent($_P.navigator.nextContent)}function g(){var a=[$(J).width(),$(J).height()];0!==a[0]&&(0!==a[1]&&r&&r.fitViewport)&&
r.fitViewport(a)}var k=m.call(this,"imc-viewport","landscape");$(k).on("vclick",function(a){if(!a.isPropagationStopped())for(var b=$(".imc-listgap"),c=0;c<b.length;c++)b[c].closeOpen()&&a.stopPropagation();!a.isPropagationStopped()&&"input"===document.activeElement.nodeName.toLowerCase()&&(document.activeElement.blur(),a.stopPropagation())});var r=null,w=[],z=null,B=null,A=!1,v=[],p=[],D=null,I={pause:null,audio:null,subtitles:null,evaluate:null,retry:null,print:null,progress:null,"exam-forward":null,
"exam-back":null,"exam-handin":null,"exam-overview":null,"exam-remaining-time":null,"exam-current-interaction":null,"exam-num-correct":null,"exam-num-incorrect":null};$_P.deviceFamily===com.imc.core.DeviceFamily.DESKTOP&&(D=document.createElement("span"),$(D).css({position:"absolute","z-index":0,left:-300}));j.call(k);Object.defineProperty(k,"navigationState",{value:f.Viewport.NAVIGATE_NOOP,writable:!0});Object.defineProperty(k,"loading",{get:function(){return A}});var C=!1;try{"1"===$_P.storage.read("cmi.learner_preference.audio_captioning")&&
(C=!0)}catch(L){}k.defineWatchableProperty("subtitlesEnabled",C,function(a){k.subtitleBox&&(a&&k.subtitleBox.hasText?k.subtitleBox.show():k.subtitleBox.hide())});var J=document.createElement("div");J.id="imc-viewport-container";k.appendChild(J);var F=document.createElement("div");J.appendChild(F);Object.defineProperty(k,"content",{get:function(){return r},set:function(c){if(!$_P.isOldPlayer)for(k.disableControls.apply(k,Object.keys(I));0<v.length;){var d=v.pop();$(k).removeClass(d)}r&&(r.cleanup(),
$(r).off("imc:ready",x));if(c){A=!0;k.contentState="loading";for(d=0;d<w.length;++d)w[d].trigger();$(c).on("imc:ready",x);if(r)if(Modernizr.cssanimations){var e=F;switch(k.navigationTransition){case f.Viewport.NavigationTransition.SLIDE_LEFT:d="slide-left";break;case f.Viewport.NavigationTransition.SLIDE_RIGHT:d="slide-right";break;default:e=r,d="fade-out"}a.runCSSAnimation(e,d,500,function(){c.load()})}else{d=new b(300,0,"quadin");switch(k.navigationTransition){case f.Viewport.NavigationTransition.FADE_OVER:d.animate(r,
{opacity:0});break;case f.Viewport.NavigationTransition.SLIDE_LEFT:d.animate(F,{transform:"translateX("+-window.innerWidth+"px)"});break;case f.Viewport.NavigationTransition.SLIDE_RIGHT:d.animate(F,{transform:"translateX("+window.innerWidth+"px)"})}e=new a;e.addAnimation(d);e.start(function(){c.load()})}else c.load()}},enumerable:!0});Object.defineProperty(k,"contentState",{get:function(){return k.getAttribute("data-content-state")},set:function(a){D&&$(D).text(a);k.setAttribute("data-content-state",
a)}});Object.defineProperty(k,"navigationAllowed",{get:function(){return!k.content?!0:!A&&k.content.promptNavigation()}});var C=new d,H=new n(k,"default");C.setInitialState(H);var y=new n(k,"controls");C.addState(y);var u=new n(k,"navigating");C.addState(u);C.addTransition(new h(k,"tap",H,y));C.addTransition(new h(k,"tap",y,H));var G=new l(H,u);w.push(G);C.addTransition(G);G=new l(y,u);w.push(G);C.addTransition(G);z=new l(null,H);C.addTransition(z);C.start();Modernizr.touch&&(C=new c("swipe",k),C.change(function(a){if(r&&
!r.swipeDisabled){a=a[0];if(!$_P.navigator.canNavigateForward){a=Math.max(a,-100);try{$("#imc-endofswipe-right").css("opacity",-1*a/100)}catch(b){}}if(!$_P.navigator.canNavigateBack){a=Math.min(a,100);try{$("#imc-endofswipe-left").css("opacity",a/100)}catch(c){}}$(F).css("transform","translateX("+a.toString()+"px)");k.navigationState=-300>=a?f.Viewport.NAVIGATE_NEXT:300<=a?f.Viewport.NAVIGATE_PREV:f.Viewport.NAVIGATE_NOOP}}),C.end(function(){if(r&&!r.swipeDisabled){k.navigationState===f.Viewport.NAVIGATE_PREV?
$_P.navigateBack():k.navigationState===f.Viewport.NAVIGATE_NEXT&&$_P.navigateForward();var c=new b(300,0,"quadout");switch(k.navigationState){case f.Viewport.NAVIGATE_NOOP:c.animate(F,{transform:"none"}),c.animate($("#imc-endofswipe-left,#imc-endofswipe-right"),{opacity:0}),a.run(c)}}}));var s=new t({deviceFamilySpecific:!0});s.load("viewport",function(a){k.appendChild(a);D&&k.appendChild(D);s=null;if(!$_P.isOldPlayer){for(var b in I){var c=document.getElementById("imc-control-"+b);c&&(I[b]=c)}try{var d=
$_P.customButtons,f=k.querySelectorAll(".custom-button")||[];for(b=0;b<f.length;++b)d.length>b?p.push(f[b]):f[b].enabled=!1}catch(g){alert(g.message)}}Object.defineProperty(k,"subtitleBox",{value:new e(a)});k.subtitleBox.load(function(){$(window).trigger("imc:loaded")})});$(k).on("imc:screenSizeChange",function(a){g();a.stopPropagation()});$(k).on("imc:navigationRequest",function(a,b){if(/^urn:imc:.*/.test(b)){var c=b.split(":"),d=c.slice(0,3).join(":"),e=$_P.library.getEntry(d);if(e&&"glossary"===
e.type&&3<c.length)try{$_P.showInlineGlossary(d,"urn:imc:"+c[3]),a.stopPropagation()}catch(f){}}else if(/^videoscreen:.*/.test(b)){a.stopPropagation();c=b.split(":");try{c[1]?(console.log("TEST View 2"+b),$_P.showVideoScreen(c[1])):console.warn("no url to show in video screen")}catch(g){}}});k.enableControls=function(){for(var a=0;a<arguments.length;++a){var b=I[arguments[a]];b&&($(b).addClass("control-enabled"),$(k).addClass("control-"+arguments[a]),b.enabled=!0)}};k.disableControls=function(){for(var a=
0;a<arguments.length;++a){var b=I[arguments[a]];b&&(b.enabled=!1,$(b).removeClass("control-enabled"),$(k).removeClass("control-"+arguments[a]))}};k.addContentClass=function(a){-1===v.indexOf(a)&&($(k).addClass(a),v.push(a))};k.removeContentClass=function(a){var b=v.indexOf(a);-1!==b&&($(k).removeClass(a),v.splice(b,1))};$(k).on("imc:subtitle",function(a,b){if(r||"animation"!==!r.type)k.subtitleBox.display(b),k.subtitlesEnabled&&k.subtitleBox.show()});$(k).on("imc:action",function(a,b,c){if(!$_P.isOldPlayer&&
r&&r.executeAction(b,c))a.stopPropagation();else if("subtitles"===b){switch(c){case "disable":k.subtitlesEnabled=!1}a.stopPropagation()}else if("content"===b)switch(c){case "print":try{my_window=window.open("","mywindow","status=1,resizable=1,scrollbars=1"),my_window.document.write("<!DOCTYPE HTML> \x3c!--(c) 2013 imc GmbH. All rights reserved.--\x3e"),my_window.document.write("<html><head><title></title>"),my_window.document.write('<link rel="stylesheet" href="resources/fonts.css">'),my_window.document.write('<link rel="stylesheet" href="resources/print.css" media="print">'),
my_window.document.write('<script type="text/javascript">function printAll() { window.focus(); window.print(); }\x3c/script>'),my_window.document.write("</head>"),my_window.document.write('<body onload="printAll()"><div id="imc-print-support">'),my_window.document.write($("#imc-print-support").html()),my_window.document.write("</div></body></html>"),my_window.document.close()}catch(d){console.error(d.message)}}else if(!$_P.isOldPlayer&&"custom"===b){b=p.indexOf(a.target);if(-1!==b)try{var e=$_P.customButtons[b];
"navigate"===e.action?$_P.navigateTo(e.target):"overlay"===e.action&&$_P.showContentOverlay(e.target)}catch(f){console.error(f.message)}a.stopPropagation()}});$(k).on("imc:screenAboutToShow",function(){r&&r.unsuspend()});$(k).on("imc:screenAboutToHide",function(){r&&r.suspend()});$(window).on("imc:contentPaused",function(){if(!B){var c="imc-pause-indicator";$_P.isOldPlayer||(c="imc-animation-pause-indicator");c=document.getElementById(c);if(!c)return;var d=com.imc.animation.Transform;$(c).css("display",
"block");var e=$(c).css("transform");$(c).css("display","none");var f=new d(e),g=new d(e);g.scale(2,2);d=new d(e);d.scale(0.1,0.1);B=new a;e=new b(200,0,"quadin");e.animate(c,{opacity:[0,1],transform:[d.toString(),f.toString()],display:"block"});B.addAnimation(e);e=new b(400,200,"quadout");e.animate(c,{opacity:[1,0],display:"none",transform:[f.toString(),g.toString()]});B.addAnimation(e)}B&&B.start()});return k};Object.defineProperty(f.Viewport,"NAVIGATE_NOOP",{value:0});Object.defineProperty(f.Viewport,
"NAVIGATE_NEXT",{value:1});Object.defineProperty(f.Viewport,"NAVIGATE_PREV",{value:2});f.Viewport.NavigationTransition=Object.freeze({SLIDE_LEFT:1,SLIDE_RIGHT:2,FADE_OVER:3});Object.defineProperty(f.Viewport.prototype,"navigationTransition",{value:f.Viewport.NavigationTransition.FADE_OVER,writable:!0})})(com.imc.core.screens);
(function(f){var m=com.imc.core.screens.Screen,e=com.imc.util.ControlLoader,c=com.imc.touch.GestureRecognizer,a=com.imc.content.GlossaryEntry,b=com.imc.animation.Animation,d=com.imc.animation.AnimationDriver;f.GlossaryScreen=function(){function f(a,c){if(x===a&&g===c&&r){var e=new b;e.animate(r,{opacity:1});d.run(e)}else try{x!==a?(e=$_P.library.getEntry(a),$.getJSON(e.src,null,function(b){k=b;x=a;h(c)})):h(c)}catch(j){console.error(j.message)}}function l(a){$(a).css("opacity",0);j.appendChild(a);
r=a;var c=new b(300,0,"linear");c.animate(a,{opacity:1});d.run(c);j.scrollTop=0}function h(c){g=c;for(c=0;c<k.entries.length;++c)if(k.entries[c].id===g){j||(j=document.getElementById("imc-glossaryscreen-content"));var e=new a(k.entries[c].src);$(e).on("imc:ready",function(){if(r){var a=new b(300,0,"linear");a.animate(r,{opacity:0});var c=new d;c.addAnimation(a);c.start(function(){j.removeChild(r);l(e)})}else l(e)});e.load()}}var t=m.call(this,"imc-glossaryscreen"),j=null,x=null,g=null,k=null,r=null,
w=0;(new e).load("glossaryscreen",function(a){t.appendChild(a);$(window).trigger("imc:loaded")});$(t).on("tap",function(a){$_P.hideInlineGlossary();a.stopPropagation()});if(Modernizr.touch){var z=new c("swipe",t);z.change(function(a){w=Math.max(0,a[0]);$(t).css("transform","translateX("+w+"px)")});z.end(function(){if(w>$(t).width()/3){var a=new b(400,0,"linear");a.animate(t,{transform:"translateX("+$(t).width()+"px)"});var c=new d;c.addAnimation(a);c.start(function(){$_P.hideInlineGlossary()})}else a=
new b,a.animate(t,{transform:"none"}),d.run(a);w=0})}t.setEntryToLoad=function(a,b){t.isVisible?f(a,b):window.setTimeout(function(){f(a,b)},500)};$(t).on("imc:navigationRequest",function(a,b){if(/^urn:imc:.*/.test(b)){var c=b.split(":"),d=c.slice(0,3).join(":"),e=$_P.library.getEntry(d);if(e&&"glossary"===e.type&&3<c.length)try{f(d,"urn:imc:"+c[3]),a.stopPropagation()}catch(g){}}});$(t).on("imc:screenAboutToShow",function(){!t.isVisible&&r&&(j&&(j.scrollTop=0),$(r).css("opacity",0))});return t}})(com.imc.core.screens);
(function(f){f.ContentListDataSource=function(f,e){function c(a){if(a.children)for(var e=0;e<a.children.length;++e)c(a.children[e]);else b.push(a.id)}var a=this,b=[];c(e);f.addChangeListener(function(b){for(var c=0;c<b.length;++c)$(a).trigger("imc:dataChange",b[c].id)});Object.defineProperty(this,"length",{get:function(){return b.length}});this.identifierForRowIndex=function(a){try{return b[a]}catch(c){return null}};this.data=function(a,b){try{var c=f.getEntry(a);switch(b){case "identifier":return c.id;
case "displaytext":return c.title;case "decorationimage":return c.thumbnail;case "statustext":return c.statusText;default:return c[b]?c[b]:null}}catch(e){return null}}}})(com.imc.core);
(function(f){var m=com.imc.core.StringTable,e=com.imc.core.Library,c=com.imc.core.ContentListDataSource,a=com.imc.core.ContentTreeDataSource,b=com.imc.core.navigation.Navigator,d=com.imc.core.navigation.RequirementFactory,n=com.imc.core.screens.LoadScreen,l=com.imc.core.screens.InfoScreen,h=com.imc.core.screens.HomeScreen,t=com.imc.core.screens.GlossaryScreen,j=com.imc.core.screens.Viewport,x=com.imc.core.screens.OverlayViewport,g=com.imc.core.screens.VideoScreen,k=com.imc.core.screens.ErrorScreen,
r=com.imc.core.statemachine.StateMachine,w=com.imc.core.statemachine.ScreenState,z=com.imc.core.statemachine.Transition,B=com.imc.core.statemachine.EventTransition,A=com.imc.content.ContentFactory,v=com.imc.util.Preloader,p=com.imc.util.Watchable,D=com.imc.storage.StorageBackendFactory,I=com.imc.storage.SuspendData,C=com.imc.scorm.scorm2004.Adapter,L=com.imc.controls.LockMessageBox,J=com.imc.controls.JumpMessageBox,F=com.imc.media.AudioPlayer;f.DeviceFamily=Object.freeze({DESKTOP:1,TABLET:2,PHONE:3});
f.HTML5Player=function(){function H(){for(var a=!0,b=!1,c=0;c<Y.length;++c)if(Y[c].satisfied||(a=!1),Y[c].isFailed()){b=!0;break}a=b?"failed":a?"passed":"unknown";u.success!==a&&u.adapter.PersistData();u.success=a;console.log("Setting global success to "+a)}function y(){return $(window).height()>$(window).width()?"portrait":"landscape"}var u=this,G=null,s=null,q=null,E=null,M=null,R,K,X,W,U,P,V,Q,aa,ba,ca,Y=[],N=0,da=0;this.updateSuccess=H;if(!(1<!location.search.length)){for(var ea={},fa=location.search.substr(1).split("&"),
O=0;O<fa.length;++O){var S=fa[O].split("=");ea[S[0]]=S[1]}Object.defineProperty(u,"args",{value:Object.freeze(ea)})}p.call(u);Object.defineProperty(this,"adapter",{value:new C});Object.defineProperty(window,"API_1484_11",{value:this.adapter});Object.defineProperty(this,"currentScreen",{enumerable:!0,get:function(){return G},set:function(a){a!==G&&(G&&$(G).trigger("imc:screenAboutToHide"),a&&$(a).trigger("imc:screenAboutToShow"),G=a)}});document.addEventListener("touchmove",function(a){a.preventDefault()});
window.addEventListener("unload",function(){$_P.shutdown()},!1);this.run=function(){function a(){u.currentScreen&&(document[c]?$(u.currentScreen).trigger("imc:screenAboutToHide"):$(u.currentScreen).trigger("imc:screenAboutToShow"))}u.preloader||Object.defineProperty(u,"preloader",{value:new v});u.audioPlayer||Object.defineProperty(u,"audioPlayer",{value:new F});u.videoScreen||Object.defineProperty(u,"videoScreen",{writable:!1,value:new g});u.isMobile||Object.defineProperty(u,"isMobile",{value:/iPhone|iPod|iPad|Android|BlackBerry/.test(navigator.userAgent)});
u.deviceFamily||Object.defineProperty(u,"deviceFamily",{writable:!1,value:function(){if(-1!=navigator.userAgent.toLowerCase().indexOf("windows phone"))return f.DeviceFamily.PHONE;if(Modernizr.touch&&u.isMobile){var a=$("div#device-family-indicator"),b=a.css("z-index");a.remove();return"1"===b?f.DeviceFamily.PHONE:f.DeviceFamily.TABLET}return f.DeviceFamily.DESKTOP}(),configurable:!0});var b=u.audioPlayer;if(u.isMobile&&!b.isPrepared)b=document.createElement("div"),b.id="imc-audio-enabler",$(b).on("vmousedown",
function(){$(this).addClass("active")}),$(b).on("tap",function(){$(this).remove();u.audioPlayer.prepare();u.videoScreen.prepare();u.run()}),$("body").append(b);else{window.IMCNativeClient?$("body").addClass("imc-platform-nativeclient"):/iPhone|iPad|iPod/i.test(navigator.platform)?$("body").addClass("imc-platform-ios"):$("body").addClass("imc-platform-"+navigator.platform.toLowerCase());Object.defineProperty(u,"deviceFamilyName",{get:function(){switch(u.deviceFamily){case f.DeviceFamily.TABLET:return"tablet";
case f.DeviceFamily.PHONE:return"phone";default:return"desktop"}}});console.log("Device family: "+u.deviceFamilyName+" (isMobile: "+u.isMobile+")");$("body").addClass("imc-devicefamily-"+u.deviceFamilyName);u.deviceFamily!==f.DeviceFamily.DESKTOP?(u.deviceOrientation=y(),$(window).resize(function(){var a=y();a!==u.deviceOrientation&&(window.scroll(0,0),u.deviceOrientation=a,$(u).trigger("imc:deviceOrientationChange"))}),$(window).on("focusout",function(){window.scroll(0,0)})):u.deviceOrientation=
"landscape";var c,d;"undefined"!==typeof document.hidden?(c="hidden",d="visibilitychange"):"undefined"!==typeof document.mozHidden?(c="mozHidden",d="mozvisibilitychange"):"undefined"!==typeof document.msHidden?(c="msHidden",d="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(c="webkitHidden",d="webkitvisibilitychange");"undefined"!==typeof document[c]?document.addEventListener(d,a):"onpageshow"in window?(window.addEventListener("pageshow",function(){u.currentScreen&&$(u.currentScreen).trigger("imc:screenAboutToShow")}),
window.addEventListener("pagehide",function(){u.currentScreen&&$(u.currentScreen).trigger("imc:screenAboutToHide")})):(window.addEventListener("focus",function(){u.currentScreen&&$(u.currentScreen).trigger("imc:screenAboutToShow")}),window.addEventListener("blur",function(){u.currentScreen&&$(u.currentScreen).trigger("imc:screenAboutToHide")}));$.getJSON("content/manifest.json",function(a){u.readManifest(a);u.stringTable.load(function(){Object.defineProperty(u,"lockMessage",{value:new L});Object.defineProperty(u,
"jumpMessage",{value:new J});++N;Object.defineProperty(u,"loadScreen",{writable:!1,value:new n});++N;Object.defineProperty(u,"viewport",{writable:!1,value:new j});u.isOldPlayer||(++N,Object.defineProperty(u,"overlayViewport",{writable:!1,value:new x}));++N;Object.defineProperty(u,"infoScreen",{writable:!1,value:new l});++N;Object.defineProperty(u,"homeScreen",{writable:!1,value:new h});++N;Object.defineProperty(u,"glossaryScreen",{writable:!1,value:new t});++N;u.videoScreen.initialize();++N;Object.defineProperty(u,
"errorScreen",{writable:!1,value:new k});var a=new r,b=Math.max(window.innerWidth,window.innerHeight),c=Math.min(window.innerWidth,window.innerHeight),d={transform:"translateY("+b+"px)",display:"none"},e={transform:"translateY("+c+"px)",display:"none"},g={transform:"none",display:"block"};$_P.isOldPlayer?u.deviceFamily!==f.DeviceFamily.DESKTOP&&(d=e={transform:"scale(0.02)","transform-origin":"bottom left",opacity:0.7,display:"none"},g={transform:"none",opacity:1,display:"block"}):u.hasTouchUI||(d=
e={transform:"translateY("+b+"px)",opacity:0.7,display:"none"},g={transform:"none",opacity:1,display:"block"});var m={display:"none",transform:"translateX("+window.innerWidth+"px)"},p={display:"block",transform:"none"},c=new w(u.loadScreen);c.assign(u.loadScreen,{opacity:1,display:"block"});c.assign(u.viewport,{opacity:0,display:"none"});c.assign(u.infoScreen,{opacity:0,display:"none"});c.assign(u.videoScreen,{opacity:0,display:"none"});c.assign(u.errorScreen,{opacity:0,display:"none"});c.assign(u.homeScreen,
d);c.assign(u.glossaryScreen,m);a.setInitialState(c);b=new w(u.viewport);b.assign(u.loadScreen,{opacity:0,display:"none"});b.assign(u.viewport,{opacity:1,display:"block"});b.assign(u.infoScreen,{opacity:0,display:"none"});b.assign(u.videoScreen,{opacity:0,display:"none"});b.assign(u.errorScreen,{opacity:0,display:"none"});b.assign(u.homeScreen,e);b.assign(u.glossaryScreen,m);a.addState(b);if(u.overlayViewport){var v=new w(u.overlayViewport);a.addState(v);$(u.overlayViewport).css("display","none")}e=
new w(u.infoScreen);e.assign(u.loadScreen,{opacity:0,display:"none"});e.assign(u.infoScreen,{opacity:1,display:"block"});e.assign(u.viewport,{opacity:0,display:"none"});e.assign(u.homeScreen,d);e.assign(u.glossaryScreen,m);a.addState(e);d=new w(u.homeScreen);d.assign(u.homeScreen,g);d.assign(u.infoScreen,{opacity:1,display:"block"});d.assign(u.viewport,{opacity:0,display:"none"});d.assign(u.glossaryScreen,m);a.addState(d);var y=new w(u.homeScreen);y.assign(u.homeScreen,g);y.assign(u.viewport,{opacity:1,
display:"block"});y.assign(u.infoScreen,{opacity:0,display:"none"});d.assign(u.glossaryScreen,m);a.addState(y);g=new w(u.glossaryScreen);g.assign(u.glossaryScreen,p);g.assign(u.viewport,{opacity:1,display:"block"});g.assign(u.infoScreen,{opacity:0,display:"none"});a.addState(g);m=new w(u.glossaryScreen);m.assign(u.glossaryScreen,p);m.assign(u.infoScreen,{opacity:1,display:"block"});m.assign(u.viewport,{opacity:0,display:"none"});a.addState(m);p=new w(u.videoScreen);p.assign(u.videoScreen,{opacity:1,
display:"block"});a.addState(p);var A=new w(u.errorScreen);A.assign(u.errorScreen,{opacity:1,display:"block"});a.addState(A);var C=new z(c,b);a.addTransition(C);var T=new z(c,e);a.addTransition(T);u.start=function(){function a(){u.skipForward();$(u.viewport).off("imc:screenShown",a)}"portrait"===u.deviceOrientation?T.trigger():C.trigger();$(u.viewport).on("imc:screenShown",a)};c=null;c=new B(u,"imc:deviceOrientationChange",b,e,{duration:300,ease:"linear"});a.addTransition(c);c=new B(u,"imc:deviceOrientationChange",
e,b,{duration:300,ease:"linear"});a.addTransition(c);c=new B(u,"imc:deviceOrientationChange",d,y);a.addTransition(c);c=new B(u,"imc:deviceOrientationChange",y,d);a.addTransition(c);s=new z(b,y,{duration:300,ease:"quadout"});a.addTransition(s);q=new z(y,b,{duration:300,ease:"quadin"});a.addTransition(q);E=new z(e,d,{duration:300,ease:"quadout"});a.addTransition(E);M=new z(d,e,{duration:400,ease:"quadin"});a.addTransition(M);R=new z(b,g,{duration:400,ease:"quadout"});a.addTransition(R);K=new z(g,b,
{duration:300,ease:"quadin"});a.addTransition(K);X=new z(m,e,{duration:300,ease:"quadin"});a.addTransition(X);W=new B(u,"imc:deviceOrientationChange",g,m);a.addTransition(W);U=new B(u,"imc:deviceOrientationChange",m,g);a.addTransition(U);P=new z(b,p,{duration:300,ease:"quadin"});a.addTransition(P);V=new z(p,b,{duration:300,ease:"quadin"});a.addTransition(V);u.overlayViewport&&(Q=new z(b,v,{duration:300,ease:"quadin"}),a.addTransition(Q),aa=new z(v,b,{duration:300,ease:"quadin"}),a.addTransition(aa));
ba=new z(b,A,{duration:300,ease:"quadin"});a.addTransition(ba);ca=new z(A,b,{duration:300,ease:"quadin"});a.addTransition(ca);a.start()})})}};this.shutdown=function(){try{this.viewport.content.cleanup()}catch(a){}this.storage.terminate()};this.readManifest=function(f){try{if(!f.playerversion)throw Error("Missing player version");Object.defineProperty(this,"version",{enumerable:!0,value:f.playerversion,writable:!1});Object.defineProperty(this,"isOldPlayer",{enumerable:!0,value:"1.0.0"===f.playerversion,
writable:!1});console.log("Requested player version "+this.version);Object.defineProperty(this,"isOldPreview",{enumerable:!0,value:-1<navigator.userAgent.indexOf("AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.138 Safari/537.36"),writable:!1});if(!f.library)throw Error("Missing library definition");Object.defineProperty(this,"library",{value:new e(f.library,f.structure),enumerable:!0});Object.defineProperty(this,"structure",{value:f.structure});if(!f.structure)throw Error("Missing structure definition");
Object.defineProperty(this,"contentList",{value:new c(this.library,this.structure)});Object.defineProperty(this,"contentTree",{value:new a(this.library,this.structure)});Object.defineProperty(this,"suspendData",{value:new I(this.library),enumerable:!0});try{Object.defineProperty(this,"storage",{value:D.create(this.suspendData)}),console.log("Using storage backend "+this.storage.name),this.storage.initialize()}catch(g){console.error(g.message)}var h=u.library.getEntryAt(0);this.defineWatchableProperty("progress",
0);this.library.addChangeListener(function(){u.progress=h.progress});u.progress=h.progress;var j=this.storage.read("cmi.success_status");if(!j||!j.length)j="unknown";this.defineWatchableProperty("success",j);"0"===this.storage.read("cmi.learner_preference.audio_level")&&(u.audioPlayer.muted=!0);this.library.prepare();if(h.successrequirements)for(j=0;j<h.successrequirements.length;++j){var k=d.create(h.successrequirements[j],u.library);k&&"globalsuccess"!==k.type&&(Y.push(k),k.changeListener=H)}H();
u.isOldPlayer||Object.defineProperty(this,"customButtons",{value:f.custombuttons||[],writable:!1})}catch(l){console.error(l.message)}f=this.library.getEntryAt(0);document.title=f.title;Object.defineProperty(u,"navigator",{value:new b(this.library,this.structure)});Object.defineProperty(u,"stringTable",{value:new m(f.language)})};this.showHomeScreen=function(){s.trigger();E.trigger()};this.hideHomeScreen=function(){"portrait"===u.deviceOrientation?M.trigger():q.trigger()};this.loadContent=function(a,
b,c){var d=null,e=this.preloader.content();e&&e.id==a.id&&(d=this.preloader.takeContent());d||(d=A.create(a));d&&(this.audioPlayer.clear(),e=a.environment,Object.defineProperty(d,"lastAttempt",{value:0<e.attemptLimit&&e.trackedAttempts.length+1===e.attemptLimit}),e=1,c&&(e=u.viewport.content?u.viewport.content.currentAttempt||1:1,e+=1),Object.defineProperty(d,"currentAttempt",{value:e,enumerable:!0}),u.viewport.navigationTransition=b,u.viewport.content=d,u.adapter.environment=a.environment,$(u).trigger("imc:currentContentChange"))};
this.showContentOverlay=function(a){if(u.overlayViewport){var b=u.library.getEntry(a);if(u.navigator.canNavigateTo(b)){if(a=A.create(b))$(u.overlayViewport).css("display","block"),Q.trigger(),u.overlayViewport.content=a}else a=a.split(":"),3<=a.length&&(a=a.slice(0,3).join(":"),(b=u.library.getEntry(a))&&b.locked&&u.lockMessage.show(b.lockMessage))}};this.hideContentOverlay=function(){u.overlayViewport&&(aa.trigger(),$(u.overlayViewport).css("display","none"))};this.navigateTo=function(a){if(u.viewport.navigationAllowed){var b=
u.navigator.navigateTo(a);b?u.loadContent(b,j.NavigationTransition.FADE_OVER):(a=a.split(":"),3<=a.length&&(a=a.slice(0,3).join(":"),(b=u.library.getEntry(a))&&b.locked&&u.lockMessage.show(b.lockMessage)))}};this.navigateBack=function(){if(u.viewport.navigationAllowed){var a=u.navigator.navigateBack();a&&u.loadContent(a,j.NavigationTransition.SLIDE_RIGHT)}};this.navigateForward=function(){if(u.viewport.navigationAllowed){var a=u.navigator.navigateForward();a&&u.loadContent(a,j.NavigationTransition.SLIDE_LEFT)}};
this.skipForward=function(){if(u.viewport.navigationAllowed){var a=u.navigator.skipForward();a&&u.loadContent(a,j.NavigationTransition.SLIDE_LEFT)}};this.showInlineGlossary=function(a,b){u.glossaryScreen.setEntryToLoad(a,b);R.trigger()};this.hideInlineGlossary=function(){K.trigger();X.trigger()};this.showVideoScreen=function(a){try{u.videoScreen.setVideoUrl(a),P.trigger()}catch(b){console.log(b.message)}};this.hideVideoScreen=function(){u.videoScreen.setVideoUrl(null);V.trigger()};this.showErrorScreen=
function(){try{ba.trigger()}catch(a){console.log(a.message)}};this.hideErrorScreen=function(){try{ca.trigger()}catch(a){console.log(a.message)}};this.evaluateInteraction=function(){if($_P.isOldPlayer){"input"===document.activeElement.nodeName.toLowerCase()&&document.activeElement.blur();try{"interaction"===u.viewport.content.type&&u.viewport.content.evaluate()}catch(a){console.error(a.message)}}};this.reloadCurrentContent=function(){var a=this.navigator.currentContent;a&&this.loadContent(a,j.NavigationTransition.FADE_OVER,
!0)};$(window).on("imc:navigationRequest",function(a,b){try{switch(b){case "forward":u.navigateForward();break;case "skip":u.skipForward();break;case "back":u.navigateBack();break;default:if(/^urn:imc:.*/.test(b))u.navigateTo(b);else if(/^videoscreen:.*/.test(b)){var c=b.split(":");c[1]&&($_P.showVideoScreen(c[1]),a.stopPropagation())}else if(/^javascript:.*/.test(b)){var d=b.substring(11);Function(d)()}else window.open(b,"_blank")}}catch(e){console.error(e.message)}});$(window).on("imc:action",function(a,
b,c){switch(b){case "home":"hide"===c?u.hideHomeScreen():"show"===c&&u.showHomeScreen();break;case "interaction":$_P.isOldPlayer&&("evaluate"===c?u.evaluateInteraction():"retry"===c&&u.reloadCurrentContent())}});$(window).on("imc:loaded",function(){da++;da>=N&&window.setTimeout(function(){u.start()},1E3)})};Object.defineProperty(f.HTML5Player.prototype,"CAP_DEVICEORIENTATION",{value:1});f.HTML5Player.prototype.hasCapability=function(a){switch(a){case this.CAP_DEVICEORIENTATION:return"undefined"!==
typeof window.orientation&&window.DeviceOrientationEvent||1<window.navigator.msMaxTouchPoints;default:return!1}}})(com.imc.core);
